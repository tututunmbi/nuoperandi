{"data":"LyogYnVpbGQ6IDE3NzE4NjQ2MDc3MTcgKi8KaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZUNsaWVudCc7CgovKiA9PT09PT0gU1RPUkFHRSA9PT09PT0gKi8KY29uc3Qgc2F2ZSA9IChrZXksIGRhdGEpID0+IHsgdHJ5IHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ251b3BlcmFuZGlfJyArIGtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOyB9IGNhdGNoKGUpIHt9IH07CmNvbnN0IGxvYWQgPSAoa2V5LCBmYWxsYmFjaykgPT4geyB0cnkgeyBjb25zdCBkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ251b3BlcmFuZGlfJyArIGtleSk7IHJldHVybiBkID8gSlNPTi5wYXJzZShkKSA6IGZhbGxiYWNrOyB9IGNhdGNoKGUpIHsgcmV0dXJuIGZhbGxiYWNrOyB9IH07CmxldCBfaWQgPSBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbnVvcGVyYW5kaV9pZGNvdW50JykgfHwgJzEwMCcpOwpjb25zdCBuZXdJZCA9ICgpID0+IHsgX2lkKys7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdudW9wZXJhbmRpX2lkY291bnQnLCBTdHJpbmcoX2lkKSk7IHJldHVybiBfaWQ7IH07CgovKiA9PT09PT0gU1BBUktMSU5FID09PT09PSAqLwpjb25zdCBTcGFyayA9ICh7IGRhdGEsIGNvbG9yID0gIiMzQjgyRjYiIH0pID0+IHsKICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA8IDIpIHJldHVybiBudWxsOwogICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoLi4uZGF0YSksIG1pbiA9IE1hdGgubWluKC4uLmRhdGEpLCByYW5nZSA9IG1heCAtIG1pbiB8fCAxOwogICAgY29uc3QgdyA9IDY0LCBoID0gMjgsIHBhZCA9IDI7CiAgICBjb25zdCBwdHMgPSBkYXRhLm1hcCgodiwgaSkgPT4gewogICAgICAgIGNvbnN0IHggPSBwYWQgKyAoaSAvIChkYXRhLmxlbmd0aCAtIDEpKSAqICh3IC0gcGFkICogMik7CiAgICAgICAgY29uc3QgeSA9IHBhZCArICgxIC0gKHYgLSBtaW4pIC8gcmFuZ2UpICogKGggLSBwYWQgKiAyKTsKICAgICAgICByZXR1cm4geCArICcsJyArIHk7CiAgICB9KS5qb2luKCcgJyk7CiAgICByZXR1cm4gPHN2ZyB3aWR0aD17d30gaGVpZ2h0PXtofSB2aWV3Qm94PXsnMCAwICcgKyB3ICsgJyAnICsgaH0+PHBvbHlsaW5lIHBvaW50cz17cHRzfSBmaWxsPSJub25lIiBzdHJva2U9e2NvbG9yfSBzdHJva2VXaWR0aD0iMS41IiBzdHJva2VMaW5lY2FwPSJyb3VuZCIgc3Ryb2tlTGluZWpvaW49InJvdW5kIiAvPjwvc3ZnPjsKfTsKCi8qID09PT09PSBRVU9URVMgPT09PT09ICovCmNvbnN0IHF1b3RlcyA9IFsKICAgICJSZXNpbGllbmNlIGlzIG5vdCBhIHBlcnNvbmFsaXR5IHRyYWl0IOKAkyBpdCBpcyBhIGNvbXBldGl0aXZlIHN0cmF0ZWd5LiIsCiAgICAiVHJ1c3QgaXMgeW91ciBjdXJyZW5jeS4gQnVpbGQgaXQgcmVsZW50bGVzc2x5LiIsCiAgICAiQSBiaWxsaW9uYWlyZSBpcyBzb21lb25lIHdobyBoYXMgcG9zaXRpdmVseSBpbmZsdWVuY2VkIGEgYmlsbGlvbiBwZW9wbGUuIE5vdCBzb21lb25lIHdpdGggYSBiaWxsaW9uIGRvbGxhcnMuIiwKICAgICJOZXZlciBzYXkgZGllIHVudGlsIHRoZSBib25lcyBhcmUgcm90dGVuLiIsCiAgICAiTmV2ZXIgYnVpbGQgd2l0aG91dCB0cnV0aC4gSWYgaXQgY2Fubm90IHN1cnZpdmUgaG9uZXN0eSwgaXQgaXMgbm90IGZyb20geW91LiIsCiAgICAiU3RydWN0dXJlIGlzIGxvdmUuIERpc29yZGVyIGlzIG5vdCBtZXJjeS4gQ2xhcml0eSBpcy4iLAogICAgIk5vIHdvcmsgdGhhdCByZXF1aXJlcyBzZWxmLWJldHJheWFsLiBOb3QgZm9yIG1vbmV5LiBOb3QgZm9yIHNwZWVkLiBOb3QgZm9yIHZhbGlkYXRpb24uIiwKICAgICJMaWJlcmF0aW9uIGJlZm9yZSBzY2FsZS4gRG8gbm90IG11bHRpcGx5IGJyb2tlbiBpZGVudGl0aWVzLiIsCiAgICAiQXV0aG9yaXR5IGJlZm9yZSB2aXNpYmlsaXR5LiBCZSByb290ZWQgYmVmb3JlIHlvdSBhcmUgc2Vlbi4iLAogICAgIlRlYWNoIHBlb3BsZSBob3cgdG8gc3RhbmQsIG5vdCBob3cgdG8gY2xpbmcuIERlcGVuZGVuY3kgaXMgbm90IGRpc2NpcGxlc2hpcC4iLAogICAgIkxlYXZlIHN5c3RlbXMgYmVoaW5kLCBub3QganVzdCBzdG9yaWVzLiBQZW9wbGUgbXVzdCBiZSBhYmxlIHRvIGNvbnRpbnVlIHdpdGhvdXQgeW91LiIsCiAgICAiUmVtZW1iZXI6IHlvdSBhcmUgYSBwZW4sIG5vdCB0aGUgQXV0aG9yLiBTdGF5IHN1cnJlbmRlcmVkLiBTdGF5IGRhbmdlcm91cy4iLAogICAgIlNlcGFyYXRlIGJ1c2luZXNzIGV4cGVuc2VzIGZyb20gcGVyc29uYWwgZXhwZW5zZXMg4oCTIHRoaXMgaXMgbm9uLW5lZ290aWFibGUgZm9yIHNjYWxpbmcuIiwKICAgICJFeGNoYW5nZSBhZmZpcm1hdGlvbiBmb3IgYWNjb21wbGlzaG1lbnQuIFN0b3Agc2Vla2luZyBsaWtlcyBhbmQgdmFsaWRhdGlvbi4gU2VlayByZXN1bHRzLiIsCiAgICAiRXhjaGFuZ2Ugc2VjdXJpdHkgZm9yIHNpZ25pZmljYW5jZS4gVGhlIHNhZmUgYmV0IHdpbGwgbm90IGJ1aWxkIGEgYmlsbGlvbi1wZXJzb24gaW1wYWN0LiIsCiAgICAiRXhjaGFuZ2UgaW1tZWRpYXRlIHZpY3RvcnkgZm9yIGxvbmctdGVybSBzdXN0YWluYWJpbGl0eS4gUGxheSB0aGUgMTAteWVhciBnYW1lLiIsCiAgICAiQ2hhbmdlIHlvdXIgYXR0aXR1ZGUgdG93YXJkcyB1bmNlcnRhaW50eS4gVlVDQSBpcyBwZXJtYW5lbnQuIEVtYnJhY2UgaXQgYXMgeW91ciBjb21wZXRpdGl2ZSBhZHZhbnRhZ2UuIiwKICAgICJTdG9wIGJlaW5nIGEgcGVvcGxlIHBsZWFzZXIuIEJlIHRoZSBiZXN0IGF0IHdoYXQgeW91IGRvIGFuZCBpdCB3aWxsIGZvbGxvdy4iLAogICAgIlN0b3AgbWVhc3VyaW5nIHBlcmZvcm1hbmNlIHNvbGVseSBpbiBpbW1lZGlhdGUgcmVzdWx0cy4iLAogICAgIlNldCB1cCBhIFBlcnNvbmFsIEFkdmlzb3J5IEJvYXJkIOKAkyBwZW9wbGUgd2hvIGJlbGlldmUgaW4geW91LCBicmluZyBmcmVzaCBlbmVyZ3kgYW5kIGZyZXNoIGRpcmVjdGlvbi4iLAogICAgIllvdSBjYW5ub3QgYXNrIEdvZCB0byBndWlkZSB5b3VyIHN0ZXBzIGlmIHlvdSBjYW5ub3QgbW92ZSB5b3VyIGZlZXQuIE5vdyBtb3ZlIHlvdXIgZmVldC4iCl07CmNvbnN0IGdldFF1b3RlID0gKCkgPT4gcXVvdGVzW01hdGguZmxvb3IoRGF0ZS5ub3coKSAvICg1ICogNjAgKiA2MCAqIDEwMDApKSAlIHF1b3Rlcy5sZW5ndGhdOwoKLyogPT09PT09IEVNQkxFTSBMT0dPID09PT09PSAqLwpjb25zdCBFbWJsZW0gPSAoeyBzaXplID0gMzYgfSkgPT4gKAogICAgPHN2ZyB3aWR0aD17c2l6ZX0gaGVpZ2h0PXtzaXplfSB2aWV3Qm94PSIwIDAgMjAwIDIwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgICAgICB7LyogT3V0ZXIgY2lyY2xlICovfQogICAgICAgIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iOTYiIHN0cm9rZT0iI0I4OTUyQyIgc3Ryb2tlV2lkdGg9IjMiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9Ijg4IiBzdHJva2U9IiNCODk1MkMiIHN0cm9rZVdpZHRoPSIyIiBmaWxsPSJub25lIi8+CiAgICAgICAgey8qIEVhZ2xlICovfQogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCwyOCkiIGZpbGw9IiNCODk1MkMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMCwtOCBDLTMsLTggLTYsLTYgLTgsLTQgTC0yMiwtMiBDLTI0LC0xLjUgLTI2LC0zIC0yOCwtMiBMLTI0LDAgTC0yOCwxIEwtMjQsMi41IEwtMjcsNCBMLTIyLDQgQy0xOCwzIC0xNCwxIC0xMCwyIEwtNiw2IEwtMywyIEwwLDQgTDMsMiBMNiw2IEwxMCwyIEMxNCwxIDE4LDMgMjIsNCBMMjcsNCBMMjQsMi41IEwyOCwxIEwyNCwwIEwyOCwtMiBDMjYsLTMgMjQsLTEuNSAyMiwtMiBMOCwtNCBDNiwtNiAzLC04IDAsLThaIi8+CiAgICAgICAgICAgIDxjaXJjbGUgY3g9IjAiIGN5PSItNCIgcj0iMS41IiBmaWxsPSIjOEI3MzIwIi8+CiAgICAgICAgPC9nPgogICAgICAgIHsvKiBMYXVyZWwgd3JlYXRoIGxlZnQgKi99CiAgICAgICAgPGcgc3Ryb2tlPSIjQjg5NTJDIiBzdHJva2VXaWR0aD0iMS41IiBmaWxsPSJub25lIj4KICAgICAgICAgICAgPHBhdGggZD0iTTQyLDcwIFEzOCw4MCA0MCw5MCBRMzYsOTUgMzgsMTA1IFEzNCwxMTAgMzcsMTIwIFEzMywxMjUgMzYsMTM1IFEzNCwxNDAgMzgsMTQ4Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00MCw3MiBRNDgsNzYgNDYsODQiIC8+PHBhdGggZD0iTTM4LDg0IFE0Niw4OCA0NCw5NiIgLz48cGF0aCBkPSJNMzYsOTYgUTQ0LDEwMCA0MiwxMDgiIC8+PHBhdGggZD0iTTM1LDEwOCBRNDMsMTEyIDQxLDEyMCIgLz48cGF0aCBkPSJNMzQsMTIwIFE0MiwxMjQgNDAsMTMyIiAvPjxwYXRoIGQ9Ik0zNSwxMzIgUTQzLDEzNiA0MSwxNDQiIC8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00MCw3MiBRMzIsNzYgMzQsODQiIC8+PHBhdGggZD0iTTM4LDg0IFEzMCw4OCAzMiw5NiIgLz48cGF0aCBkPSJNMzYsOTYgUTI4LDEwMCAzMCwxMDgiIC8+PHBhdGggZD0iTTM1LDEwOCBRMjcsMTEyIDI5LDEyMCIgLz48cGF0aCBkPSJNMzQsMTIwIFEyNiwxMjQgMjgsMTMyIiAvPjxwYXRoIGQ9Ik0zNSwxMzIgUTI3LDEzNiAyOSwxNDQiIC8+CiAgICAgICAgPC9nPgogICAgICAgIHsvKiBMYXVyZWwgd3JlYXRoIHJpZ2h0ICovfQogICAgICAgIDxnIHN0cm9rZT0iI0I4OTUyQyIgc3Ryb2tlV2lkdGg9IjEuNSIgZmlsbD0ibm9uZSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTgsNzAgUTE2Miw4MCAxNjAsOTAgUTE2NCw5NSAxNjIsMTA1IFExNjYsMTEwIDE2MywxMjAgUTE2NywxMjUgMTY0LDEzNSBRMTY2LDE0MCAxNjIsMTQ4Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjAsNzIgUTE1Miw3NiAxNTQsODQiIC8+PHBhdGggZD0iTTE2Miw4NCBRMTU0LDg4IDE1Niw5NiIgLz48cGF0aCBkPSJNMTY0LDk2IFExNTYsMTAwIDE1OCwxMDgiIC8+PHBhdGggZD0iTTE2NSwxMDggUTE1NywxMTIgMTU5LDEyMCIgLz48cGF0aCBkPSJNMTY2LDEyMCBRMTU4LDEyNCAxNjAsMTMyIiAvPjxwYXRoIGQ9Ik0xNjUsMTMyIFExNTcsMTM2IDE1OSwxNDQiIC8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjAsNzIgUTE2OCw3NiAxNjYsODQiIC8+PHBhdGggZD0iTTE2Miw4NCBRMTcwLDg4IDE2OCw5NiIgLz48cGF0aCBkPSJNMTY0LDk2IFExNzIsMTAwIDE3MCwxMDgiIC8+PHBhdGggZD0iTTE2NSwxMDggUTE3MywxMTIgMTcxLDEyMCIgLz48cGF0aCBkPSJNMTY2LDEyMCBRMTc0LDEyNCAxNzIsMTMyIiAvPjxwYXRoIGQ9Ik0xNjUsMTMyIFExNzMsMTM2IDE3MSwxNDQiIC8+CiAgICAgICAgPC9nPgogICAgICAgIHsvKiBBQSBNb25vZ3JhbSAqL30KICAgICAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9IiNCODk1MkMiIHN0cm9rZVdpZHRoPSIzLjUiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj4KICAgICAgICAgICAgPHBhdGggZD0iTTc4LDEzMCBMOTAsNzAgUTEwMCw1NSAxMTAsNzAgTDEyMiwxMzAiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTgyLDExOCBRMTAwLDEwOCAxMTgsMTE4Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MiwxMzAgTDg2LDc2IFExMDAsNTAgMTE0LDc2IEwxMjgsMTMwIi8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03NywxMTggUTEwMCwxMDUgMTIzLDExOCIvPgogICAgICAgIDwvZz4KICAgICAgICB7LyogSW5uZXIgY2lyY2xlIGFyb3VuZCBtb25vZ3JhbSAqL30KICAgICAgICA8Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjQ4IiBzdHJva2U9IiNCODk1MkMiIHN0cm9rZVdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiLz4KICAgICAgICB7LyogTWF0aCBzeW1ib2xzICovfQogICAgICAgIDx0ZXh0IHg9IjU4IiB5PSI1OCIgZmlsbD0iI0I4OTUyQyIgZm9udFNpemU9IjE0IiBmb250RmFtaWx5PSJzZXJpZiIgZm9udFN0eWxlPSJpdGFsaWMiPmU8dHNwYW4gZm9udFNpemU9IjEwIiBiYXNlbGluZVNoaWZ0PSJzdXBlciI+eDwvdHNwYW4+PC90ZXh0PgogICAgICAgIDx0ZXh0IHg9IjEzNSIgeT0iNTgiIGZpbGw9IiNCODk1MkMiIGZvbnRTaXplPSIxOCIgZm9udEZhbWlseT0ic2VyaWYiPnsnXHUwM0EzJ308L3RleHQ+CiAgICAgICAgPHRleHQgeD0iOTAiIHk9IjE2MiIgZmlsbD0iI0I4OTUyQyIgZm9udFNpemU9IjEzIiBmb250RmFtaWx5PSJzZXJpZiIgZm9udFN0eWxlPSJpdGFsaWMiPm48dHNwYW4gZm9udFNpemU9IjkiIGJhc2VsaW5lU2hpZnQ9InN1cGVyIj50aDwvdHNwYW4+PC90ZXh0PgogICAgICAgIHsvKiBJbmZpbml0eSAqL30KICAgICAgICA8dGV4dCB4PSI5MiIgeT0iMTgyIiBmaWxsPSIjQjg5NTJDIiBmb250U2l6ZT0iMTgiIGZvbnRGYW1pbHk9InNlcmlmIj57J1x1MjIxRSd9PC90ZXh0PgogICAgICAgIHsvKiBXcmVhdGggdGllIGF0IGJvdHRvbSAqL30KICAgICAgICA8ZyBzdHJva2U9IiNCODk1MkMiIHN0cm9rZVdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiPgogICAgICAgICAgICA8cGF0aCBkPSJNOTAsMTUyIEwxMDAsMTU4IEwxMTAsMTUyIi8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik05MiwxNTUgTDEwMCwxNjIgTDEwOCwxNTUiLz4KICAgICAgICA8L2c+CiAgICA8L3N2Zz4KKTsKCi8qID09PT09PSBJQ09OUyA9PT09PT0gKi8KY29uc3QgSSA9IHsKICAgIGRvbGxhcjogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48bGluZSB4MT0iMTIiIHkxPSIxIiB4Mj0iMTIiIHkyPSIyMyIvPjxwYXRoIGQ9Ik0xNyA1SDkuNWEzLjUgMy41IDAgMCAwIDAgN2g1YTMuNSAzLjUgMCAwIDEgMCA3SDYiLz48L3N2Zz4sCiAgICBjYWxlbmRhcjogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cmVjdCB4PSIzIiB5PSI0IiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSIyIi8+PGxpbmUgeDE9IjE2IiB5MT0iMiIgeDI9IjE2IiB5Mj0iNiIvPjxsaW5lIHgxPSI4IiB5MT0iMiIgeDI9IjgiIHkyPSI2Ii8+PGxpbmUgeDE9IjMiIHkxPSIxMCIgeDI9IjIxIiB5Mj0iMTAiLz48L3N2Zz4sCiAgICB0cmVuZGluZzogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMyA2IDEzLjUgMTUuNSA4LjUgMTAuNSAxIDE4Ii8+PHBvbHlsaW5lIHBvaW50cz0iMTcgNiAyMyA2IDIzIDEyIi8+PC9zdmc+LAogICAgYmVsbDogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cGF0aCBkPSJNMTggOEE2IDYgMCAwIDAgNiA4YzAgNy0zIDktMyA5aDE4cy0zLTItMy05Ii8+PHBhdGggZD0iTTEzLjczIDIxYTIgMiAwIDAgMS0zLjQ2IDAiLz48L3N2Zz4sCiAgICBwbHVzOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjUiIHgyPSIxMiIgeTI9IjE5Ii8+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiLz48L3N2Zz4sCiAgICBjaGV2cm9uOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjkgMTggMTUgMTIgOSA2Ii8+PC9zdmc+LAogICAgYnVsYjogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cGF0aCBkPSJNOSAxOGg2Ii8+PHBhdGggZD0iTTEwIDIyaDQiLz48cGF0aCBkPSJNMTUuMDkgMTRjLjE4LS45OC42NS0xLjc0IDEuNDEtMi41QTQuNjUgNC42NSAwIDAgMCAxOCA4IDYgNiAwIDAgMCA2IDhjMCAxIC4yMyAyLjIzIDEuNSAzLjVBNC42MSA0LjYxIDAgMCAxIDguOTEgMTQiLz48L3N2Zz4sCiAgICBtZW51OiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIzIiB5MT0iMTIiIHgyPSIyMSIgeTI9IjEyIi8+PGxpbmUgeDE9IjMiIHkxPSI2IiB4Mj0iMjEiIHkyPSI2Ii8+PGxpbmUgeDE9IjMiIHkxPSIxOCIgeDI9IjIxIiB5Mj0iMTgiLz48L3N2Zz4sCiAgICB4OiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+LAogICAgY2hlY2s6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTIyIDExLjA4VjEyYTEwIDEwIDAgMSAxLTUuOTMtOS4xNCIvPjxwb2x5bGluZSBwb2ludHM9IjIyIDQgMTIgMTQuMDEgOSAxMS4wMSIvPjwvc3ZnPiwKICAgIGNpcmNsZTogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIi8+PC9zdmc+LAogICAgYXJyb3dVcDogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIuNSIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjE5IiB4Mj0iMTIiIHkyPSI1Ii8+PHBvbHlsaW5lIHBvaW50cz0iNSAxMiAxMiA1IDE5IDEyIi8+PC9zdmc+LAogICAgYXJyb3dEb3duOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMi41IiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjEyIiB5MT0iNSIgeDI9IjEyIiB5Mj0iMTkiLz48cG9seWxpbmUgcG9pbnRzPSIxOSAxMiAxMiAxOSA1IDEyIi8+PC9zdmc+LAogICAgemFwOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD17Y30gc3Ryb2tlPSJub25lIj48cG9seWdvbiBwb2ludHM9IjEzIDIgMyAxNCAxMiAxNCAxMSAyMiAyMSAxMCAxMiAxMCAxMyAyIi8+PC9zdmc+LAogICAgYmFyOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjIwIiB4Mj0iMTgiIHkyPSIxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjIwIiB4Mj0iMTIiIHkyPSI0Ii8+PGxpbmUgeDE9IjYiIHkxPSIyMCIgeDI9IjYiIHkyPSIxNCIvPjwvc3ZnPiwKICAgIHNldHRpbmdzOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiLz48cGF0aCBkPSJNMTkuNCAxNWExLjY1IDEuNjUgMCAwIDAgLjMzIDEuODJsLjA2LjA2YTIgMiAwIDAgMSAwIDIuODMgMiAyIDAgMCAxLTIuODMgMGwtLjA2LS4wNmExLjY1IDEuNjUgMCAwIDAtMS44Mi0uMzMgMS42NSAxLjY1IDAgMCAwLTEgMS41MVYyMWEyIDIgMCAwIDEtMiAyIDIgMiAwIDAgMS0yLTJ2LS4wOUExLjY1IDEuNjUgMCAwIDAgOSAxOS40YTEuNjUgMS42NSAwIDAgMC0xLjgyLjMzbC0uMDYuMDZhMiAyIDAgMCAxLTIuODMgMCAyIDIgMCAwIDEgMC0yLjgzbC4wNi0uMDZBMS42NSAxLjY1IDAgMCAwIDQuNjggMTVhMS42NSAxLjY1IDAgMCAwLTEuNTEtMUgzYTIgMiAwIDAgMS0yLTIgMiAyIDAgMCAxIDItMmguMDlBMS42NSAxLjY1IDAgMCAwIDQuNiA5YTEuNjUgMS42NSAwIDAgMC0uMzMtMS44MmwtLjA2LS4wNmEyIDIgMCAwIDEgMC0yLjgzIDIgMiAwIDAgMSAyLjgzIDBsLjA2LjA2QTEuNjUgMS42NSAwIDAgMCA5IDQuNjhhMS42NSAxLjY1IDAgMCAwIDEtMS41MVYzYTIgMiAwIDAgMSAyLTIgMiAyIDAgMCAxIDIgMnYuMDlhMS42NSAxLjY1IDAgMCAwIDEgMS41MSAxLjY1IDEuNjUgMCAwIDAgMS44Mi0uMzNsLjA2LS4wNmEyIDIgMCAwIDEgMi44MyAwIDIgMiAwIDAgMSAwIDIuODNsLS4wNi4wNmExLjY1IDEuNjUgMCAwIDAtLjMzIDEuODJWOWExLjY1IDEuNjUgMCAwIDAgMS41MSAxSDIxYTIgMiAwIDAgMSAyIDIgMiAyIDAgMCAxLTIgMmgtLjA5YTEuNjUgMS42NSAwIDAgMC0xLjUxIDF6Ii8+PC9zdmc+LAogICAgdHJhc2g6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iMyA2IDUgNiAyMSA2Ii8+PHBhdGggZD0iTTE5IDZ2MTRhMiAyIDAgMCAxLTIgMkg3YTIgMiAwIDAgMS0yLTJWNm0zIDBWNGEyIDIgMCAwIDEgMi0yaDRhMiAyIDAgMCAxIDIgMnYyIi8+PC9zdmc+LAogICAgZWRpdDogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cGF0aCBkPSJNMTEgNEg0YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03Ii8+PHBhdGggZD0iTTE4LjUgMi41YTIuMTIxIDIuMTIxIDAgMCAxIDMgM0wxMiAxNWwtNCAxIDEtNCA5LjUtOS41eiIvPjwvc3ZnPiwKICAgIGFycm93UmlnaHQ6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiLz48cG9seWxpbmUgcG9pbnRzPSIxMiA1IDE5IDEyIDEyIDE5Ii8+PC9zdmc+LAogICAgd2FsbGV0OiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxyZWN0IHg9IjEiIHk9IjUiIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNiIgcng9IjIiLz48cGF0aCBkPSJNMSAxMGgyMiIvPjxjaXJjbGUgY3g9IjE4IiBjeT0iMTUiIHI9IjEiLz48L3N2Zz4sCiAgICByZWNlaXB0OiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxwYXRoIGQ9Ik00IDJ2MjBsMi0xIDIgMSAyLTEgMiAxIDItMSAyIDEgMi0xIDIgMVYybC0yIDEtMi0xLTIgMS0yLTEtMiAxLTItMS0yIDEtMi0xeiIvPjxsaW5lIHgxPSI4IiB5MT0iOCIgeDI9IjE2IiB5Mj0iOCIvPjxsaW5lIHgxPSI4IiB5MT0iMTIiIHgyPSIxNiIgeTI9IjEyIi8+PGxpbmUgeDE9IjgiIHkxPSIxNiIgeDI9IjEyIiB5Mj0iMTYiLz48L3N2Zz4sCiAgICBjbGlwYm9hcmQ6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTE2IDRoMmEyIDIgMCAwIDEgMiAydjE0YTIgMiAwIDAgMS0yIDJINmEyIDIgMCAwIDEtMi0yVjZhMiAyIDAgMCAxIDItMmgyIi8+PHJlY3QgeD0iOCIgeT0iMiIgd2lkdGg9IjgiIGhlaWdodD0iNCIgcng9IjEiLz48L3N2Zz4sCiAgICBjb21tYW5kOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSI3IiBoZWlnaHQ9IjciIHJ4PSIxLjUiLz48cmVjdCB4PSIxNCIgeT0iMyIgd2lkdGg9IjciIGhlaWdodD0iNyIgcng9IjEuNSIvPjxyZWN0IHg9IjMiIHk9IjE0IiB3aWR0aD0iNyIgaGVpZ2h0PSI3IiByeD0iMS41Ii8+PHJlY3QgeD0iMTQiIHk9IjE0IiB3aWR0aD0iNyIgaGVpZ2h0PSI3IiByeD0iMS41Ii8+PC9zdmc+LAogICAgbmV3c3BhcGVyOiAoYz0iY3VycmVudENvbG9yIikgPT4gPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPXtjfSBzdHJva2VXaWR0aD0iMiIgc3Ryb2tlTGluZWNhcD0icm91bmQiPjxwYXRoIGQ9Ik00IDIyaDE2YTIgMiAwIDAgMCAyLTJWNGEyIDIgMCAwIDAtMi0ySDhhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDEtMiAyem0wIDBhMiAyIDAgMCAxLTItMnYtOWMwLTEuMS45LTIgMi0yaDIiLz48bGluZSB4MT0iMTAiIHkxPSI2IiB4Mj0iMTgiIHkyPSI2Ii8+PGxpbmUgeDE9IjEwIiB5MT0iMTAiIHgyPSIxOCIgeTI9IjEwIi8+PGxpbmUgeDE9IjEwIiB5MT0iMTQiIHgyPSIxNCIgeTI9IjE0Ii8+PC9zdmc+LAogICAgY2xvY2s6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz48cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0Ii8+PC9zdmc+LAogICAgaGlzdG9yeTogKGM9ImN1cnJlbnRDb2xvciIpID0+IDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y30gc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48cGF0aCBkPSJNMyAzdjVoNSIvPjxwYXRoIGQ9Ik0zLjA1IDEzQTkgOSAwIDEgMCA2IDUuM0wzIDgiLz48cGF0aCBkPSJNMTIgN3Y1bDQgMiIvPjwvc3ZnPiwKICAgIHVzZXI6IChjPSJjdXJyZW50Q29sb3IiKSA9PiA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9e2N9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiLz48L3N2Zz4sCn07CgovKiA9PT09PT0gREVGQVVMVCBEQVRBID09PT09PSAqLwpjb25zdCBkZWZhdWx0SW5jb21lID0gW107CmNvbnN0IGRlZmF1bHRQcm9qZWN0cyA9IFtdOwpjb25zdCBkZWZhdWx0VGFza3MgPSBbXTsKY29uc3QgZGVmYXVsdFRpbWVCbG9ja3MgPSBbXTsKY29uc3QgZGVmYXVsdElkZWFzID0gW107CmNvbnN0IGRlZmF1bHRMZWFybmluZyA9IFtdOwpjb25zdCBkZWZhdWx0VGVhbSA9IFtdOwpjb25zdCBkZWZhdWx0QWxlcnRzID0gW107CmNvbnN0IGRlZmF1bHRXZWVrbHlQbGFuID0gW107CmNvbnN0IGRlZmF1bHRFeHBlbnNlcyA9IFtdOwoKLyogPT09PT09IEVNQkVEREVEIEJSSUVGSU5HIERBVEEgPT09PT09ICovCmNvbnN0IGVtYmVkZGVkQnJpZWZpbmcgPSB7ImRhdGUiOiIyMDI2LTAyLTExIiwiZ2VuZXJhdGVkQXQiOiIyMDI2LTAyLTExVDA2OjAwOjAwLjAwMFoiLCJoZWFkbGluZSI6IlJldmVudWUgb24gdHJhY2suIFR3byBhY3RpdmUgcHJvamVjdHMgbmVlZCBhdHRlbnRpb24uIEZvdXIgdGFza3MgcGVuZGluZyB0b2RheS4iLCJzZWN0aW9ucyI6W3sidGl0bGUiOiJGaW5hbmNpYWwgU25hcHNob3QiLCJpdGVtcyI6WyJNb250aGx5IGdyb3NzIGluY29tZSBzdGFuZHMgYXQg4oKmMi4wTSBhY3Jvc3MgMiBhY3RpdmUgc3RyZWFtcy4iLCJNb250aGx5IGV4cGVuc2VzIHRvdGFsIOKCpjcwMEssIGxlYXZpbmcgbmV0IGluY29tZSBhdCDigqYxLjNNIOKAlCBoZWFsdGh5IHBvc2l0aW9uLiIsIkFubnVhbCBwcm9qZWN0ZWQgaW5jb21lOiDigqYyNC4wTSBncm9zcywg4oKmMTUuNk0gbmV0LiIsIk5leHQgaW5jb21pbmcgcGF5bWVudDogRmViIDI4IOKAlCBQcmluY2lwYWwgQ29uc3VsdGFudCwgR2luZ2VyIFRlY2hub2xvZ2llcyBMaW1pdGVkLiJdfSx7InRpdGxlIjoiVG9kYXkncyBQcmlvcml0aWVzIiwiaXRlbXMiOlsiUmV2aWV3IGFuZCBhZHZhbmNlIEdpbmdlciBUZWNobm9sb2dpZXMgRmVicnVhcnkgU3RyYXRlZ3kgQ2FtcGFpZ24gUm9sbG91dC4iLCJGb2xsb3cgdXAgb24gU29jaWFsIE1lZGlhIE1hbmFnZXIvQ29vcmRpbmF0b3Igb25ib2FyZGluZyDigJQgYWdyZWVtZW50LCBOV0JTLCBhbmQgZGVwb3NpdCBzdGlsbCBwZW5kaW5nLiIsIk1Ob0IgUGxhbm5lcnM6IGZpbmFsaXplIGVkaXRzLCBwcmVwYXJlIHByb3RvdHlwZSBmb3IgcHJpbnQgdGVzdC4iLCJJZGVudGlmeSBhbmQgY29uZmlybSBiYWNrdXAgcHJpbnRlciBmb3IgTU5vQiBOb3RlYm9va3MuIl19LHsidGl0bGUiOiJQcm9qZWN0IFN0YXR1cyIsIml0ZW1zIjpbIkdpbmdlciBUZWNobm9sb2dpZXMgQ2FtcGFpZ246IDAvMyB0YXNrcyBjb21wbGV0ZSDigJQgb25ib2FyZGluZyBpcyB0aGUgY3JpdGljYWwgcGF0aC4gUHVzaCBmb3Igc2lnbmVkIGFncmVlbWVudCB0b2RheS4iLCJNTm9CIFBsYW5uZXJzOiAwLzQgdGFza3MgY29tcGxldGUg4oCUIHBsYW5uZXIgZWRpdHMgYW5kIHByb3RvdHlwZSBwcmludCBhcmUgdGhlIG5leHQgbWlsZXN0b25lcy4iXX0seyJ0aXRsZSI6IlN0cmF0ZWdpYyBOb3RlcyIsIml0ZW1zIjpbIlNlcGFyYXRlIGJ1c2luZXNzIGV4cGVuc2VzIGZyb20gcGVyc29uYWwgZXhwZW5zZXMg4oCUIHRoaXMgcmVtYWlucyBub24tbmVnb3RpYWJsZSBmb3Igc2NhbGluZy4iLCJUd28gaW5jb21lIHN0cmVhbXMgaXMgYSBzb2xpZCBmb3VuZGF0aW9uLiBCZWdpbiBzY29waW5nIGEgdGhpcmQgc3RyZWFtIHRvIGRpdmVyc2lmeSByZXZlbnVlIHJpc2suIiwiQ29uc2lkZXIgc2NoZWR1bGluZyBhIHF1YXJ0ZXJseSByZXZpZXcgdG8gYXNzZXNzIGluY29tZSBncm93dGggdHJhamVjdG9yeSBhZ2FpbnN0IHRoZSDigqYyNE0gYW5udWFsIHRhcmdldC4iXX1dfTsKCmNvbnN0IGVtYmVkZGVkTmF0aW9uID0geyJkYXRlIjoiMjAyNi0wMi0xMSIsImdlbmVyYXRlZEF0IjoiMjAyNi0wMi0xMVQwOTowMDowMC4wMDBaIiwiZG9jeEZpbGUiOiJNb3JuaW5nIEludGVsbGlnZW5jZSBCcmllZmluZyAtIEZlYiA5IDIwMjYuZG9jeCIsImluZGljYXRvcnMiOlt7ImxhYmVsIjoiVVNEL05HTiIsInZhbHVlIjoi4oKmMSwzNjMuODQiLCJ0cmVuZCI6InVwIiwibm90ZSI6IlBhcmFsbGVsOiDigqYxLDQ1NSJ9LHsibGFiZWwiOiJCcmVudCBDcnVkZSIsInZhbHVlIjoiJDY4LjE4L2JibCIsInRyZW5kIjoiZmxhdCIsIm5vdGUiOiIrMC4yMCUifSx7ImxhYmVsIjoiSW5mbGF0aW9uIiwidmFsdWUiOiIxNS4xNSUiLCJ0cmVuZCI6InVwIiwibm90ZSI6IkRlYyAyMDI1IOKAoiDihpMgZnJvbSAxNy4zMyUifSx7ImxhYmVsIjoiTkdYIEFTSSIsInZhbHVlIjoiMTcxLDcyNyIsInRyZW5kIjoidXAiLCJub3RlIjoiWVREICsxMC4zNiUifV0sImhlYWRsaW5lcyI6WyJOYWlyYSBhcHByZWNpYXRlZCA0LjI0JSBvdmVyIHRoZSBwYXN0IG1vbnRoOyBGREMgZmFpciB2YWx1ZSBhdCDigqYxLDI1Ni43OSBwZXIgUFBQLiIsIk5HWCBtYXJrZXQgY2FwIHJlYWNoZWQg4oKmMTEwLjJUIOKAlCBiZXN0IHdlZWtseSBwZXJmb3JtYW5jZSBvZiAyMDI2IGF0ICszLjg0JS4iLCJHb2xkIGhpdCAkNSwwMzEvb3osIHVwIDcyLjQ1JSBZb1kgYXMgc2FmZSBoYXZlbiBkZW1hbmQgcGVyc2lzdHMuIiwiOTElIG9mIE5pZ2VyaWFuIENFT3MgZXhwZWN0IGVjb25vbWljIGdyb3d0aCBpbiAyMDI2IChQd0MpLiIsIk1QQyBtZWV0aW5nIHNjaGVkdWxlZCBGZWIgMjMtMjQg4oCUIHJhdGUgZWFzaW5nIGV4cGVjdGVkLiJdLCJzZWN0aW9ucyI6W3sidGl0bGUiOiJGb3JlaWduIEV4Y2hhbmdlIiwiZW1vamkiOiLDsMKfwpLCsSIsIml0ZW1zIjpbIkNCTiBvZmZpY2lhbCAoTkZFTSk6IOKCpjEsMzY1LjcyL1VTRCDigJQgYXBwcmVjaWF0ZWQgfjYlIGZyb20g4oKmMSw0NDkgZWFybHkgRmViIiwiUGFyYWxsZWwgbWFya2V0OiDigqYxLDQ1NS9VU0Qg4oCUIHNwcmVhZCBuYXJyb3dpbmcsIHBvc2l0aXZlIGNvbmZpZGVuY2Ugc2lnbmFsIiwiQ0JOIGluamVjdGVkIOKCpjEuN1QgbGlxdWlkaXR5IHRocm91Z2ggY3VtdWxhdGl2ZSByZXBheW1lbnRzIiwiRkRDIGZhaXIgdmFsdWUgYXQg4oKmMSwyNTYuNzkgcGVyIFBQUCBtb2RlbCDigJQgTmFpcmEgc3RpbGwgdW5kZXJ2YWx1ZWQiXX0seyJ0aXRsZSI6IkNvbW1vZGl0aWVzIiwiZW1vamkiOiLDsMKfwpPCiiIsIml0ZW1zIjpbIkJyZW50IENydWRlICQ2OC4wNSDigJQgYmVsb3cgJDc1IGJ1ZGdldCBiZW5jaG1hcmssIGZpc2NhbCBwcmVzc3VyZSByaXNrIiwiR29sZCByZWNvcmQgJDQsOTMxL296IOKAlCArMjUlIHNpbmNlIDIwMjUsIHNhZmUgaGF2ZW4gZGVtYW5kIHBlcnNpc3RzIiwiQ29wcGVyICQ1Ljg4L2xiIOKAlCArMjglIFlvWSwgQUkgZGF0YSBjZW50ZXJzIG5lZWQgMTB4IHRyYWRpdGlvbmFsIHBvd2VyIGxvYWRzIiwiQ29jb2EgJDQsMTk3L3Qg4oCUIE5pZ2VyaWEgb3V0cHV0IGRvd24gMTElIFlvWSB0byAzMDUsMDAwIE1UIiwiV2hlYXQgJDUuMzgvYnUg4oCUIE5pZ2VyaWEgaW1wb3J0cyA5NyUgb2YgY29uc3VtcHRpb247IHByaWNlIG1vdmVzIGhpdCBmb29kIGNvc3RzIl19LHsidGl0bGUiOiJHZW9wb2xpdGljYWwgUmlzayIsImVtb2ppIjoiw7DCn8KMwo0iLCJpdGVtcyI6WyJVUy1DaGluYTogMzQuNy00Ny41JSB0YXJpZmZzIGluIGZyYWdpbGUgMS15ZWFyIHRydWNlOyBDaGluYSBzaWduZWQgJDcwMEIrIEFmcmljYW4gY29udHJhY3RzIiwiTmlnZXJpYS1DaGluYSB1cGdyYWRlZCB0byBDb21wcmVoZW5zaXZlIFN0cmF0ZWdpYyBQYXJ0bmVyc2hpcDsgJDI0LjZCIEJSSSBpbnZlc3RtZW50cyIsIlVrcmFpbmUtUnVzc2lhOiA0NTAgZHJvbmVzICsgNzEgbWlzc2lsZXMgaW4gbGFyZ2VzdCBhZXJpYWwgYXNzYXVsdCBvZiB5ZWFyIiwiMzVNIE5pZ2VyaWFucyBwcm9qZWN0ZWQgdG8gZmFjZSBzZXZlcmUgZm9vZCBpbnNlY3VyaXR5IGluIDIwMjYgbGVhbiBzZWFzb24iLCJVUy1JcmFuOiBOdWNsZWFyIHRhbGtzIGluIE9tYW47IElSR0Mgc2VpemVkIHR3byB0YW5rZXJzIG5lYXIgRmFyc2kgSXNsYW5kIl19LHsidGl0bGUiOiJHb3Zlcm5tZW50IFBvbGljeSIsImVtb2ppIjoiw7DCn8KPwpvDr8K4wo8iLCJpdGVtcyI6WyIyMDI2IEJ1ZGdldDog4oKmNTguMThUIOKAlCBEZWZlbmNlIOKCpjUuNDFUIHwgSW5mcmFzdHJ1Y3R1cmUg4oKmMy41NlQgfCBFZHVjYXRpb24g4oKmMy41MlQgfCBIZWFsdGgg4oKmMi40OFQiLCJUYXggUmVmb3JtOiA0IG5ldyBhY3RzIGVmZmVjdGl2ZSBKYW4gMTsgRklSUyB0cmFuc2l0aW9uaW5nIHRvIE5SUyB3aXRoIEFJIGNvbXBsaWFuY2UiLCJNYW51ZmFjdHVyZXJzIGNhbiBub3cgcmVjb3ZlciBpbnB1dCBWQVQgb24gQUxMIHB1cmNoYXNlcyBpbmNsdWRpbmcgc2VydmljZXMiLCJOaWdlcmlhIEZpcnN0IHByb2N1cmVtZW50IG1hbmRhdGU7IGNvbmNyZXRlIHJvYWRzIHJlcGxhY2luZyBhc3BoYWx0IChjZW1lbnQgcGxheSkiLCJXVE8gVHJhZGUgUG9saWN5IFJldmlldyByZWluZm9yY2VzIG1vZGVybiBpbnZlc3RtZW50IGZyYW1ld29yayBjb21taXRtZW50Il19LHsidGl0bGUiOiJTdG9jayBXYXRjaGxpc3QiLCJlbW9qaSI6IsOwwp/Ck8KIIiwiaXRlbXMiOlsiVGllciAxOiBaRU5JVEhCQU5LICjigqY3MiwgKzE0Ljg5JSksIFRSQU5TUE9XRVIgKH7igqYxLjhUIGNhcCksIERBTkdDRU0sIFNFUExBVCAoJDNCIHBsYW4pLCBNVE5OICgrMTMuNTAlKSIsIlRpZXIgMjogR1RDTyAo4oKmOTkpLCBCVUFDRU1FTlQgKCs2NDAuOCUgUTMpLCBBUkFERUwgKCsxNi40MiUpLCBCVUFGT09EUywgVUJBICjigqY0NS4yMCkiLCJUaWVyIDM6IEdFUkVHVSAofuKCpjJUIGNhcCksIEFJUlRFTEFGUkkgKH7igqY4LjVUKSwgTkVTVExFICh0dXJuYXJvdW5kIOKCpjcyLjVCIHByb2ZpdCksIE9BTkRPIiwiQWxsb2NhdGlvbjogNDAlIEZpbmFuY2lhbCB8IDMwJSBFbmVyZ3kvSW5mcmEgfCAyMCUgQ29uc3VtZXIvRGVmZW5zaXZlIHwgMTAlIERpZ2l0YWwvR3Jvd3RoIl19LHsidGl0bGUiOiJBSSAmIFRlY2hub2xvZ3kiLCJlbW9qaSI6IsOwwp/CpMKWIiwiaXRlbXMiOlsiTmlnZXJpYSByYW5rZWQgIzEgZ2xvYmFsbHkgZm9yIEFJIGFkb3B0aW9uIGFuZCBvcHRpbWlzbSIsIkFJIG1hcmtldCBncm93aW5nIDI3LjA4JSBhbm51YWxseTsgcHJvamVjdGVkIHRvIGFkZCAkMTVCIHRvIEdEUCBieSAyMDMwIiwiMTcgZGF0YSBjZW50ZXJzICsgOSB1bmRlciBjb25zdHJ1Y3Rpb247IEthc2kgQ2xvdWQgTGVra2kgJDI1ME0gaHlwZXJzY2FsZSBuZWFyaW5nIGNvbXBsZXRpb24iLCJEaWdpdGFsIGVjb25vbXkgcHJvamVjdGVkICQxOC4zQiByZXZlbnVlIGluIDIwMjY7IDUgdW5pY29ybnMiLCJHbG9iYWwgQUkgY2FwZXg6IEFtYXpvbiwgR29vZ2xlLCBNZXRhLCBNaWNyb3NvZnQgY29tYmluZWQgfiQ2NTBCIGZvciAyMDI2Il19LHsidGl0bGUiOiJOR1ggTWFya2V0IFJldmlldyIsImVtb2ppIjoiw7DCn8KPwpvDr8K4wo8iLCJpdGVtcyI6WyJDbG9zZTogMTcxLDcyNy40OSB8IERhaWx5OiArMS4wMSUgfCBXZWVrbHk6ICszLjg0JSB8IFlURDogKzEwLjM2JSIsIk1hcmtldCBDYXA6IOKCpjExMC4yMzRUICgr4oKmMS4xVCB0aGlzIHdlZWspIHwgQnJlYWR0aDogNjAgZ2FpbmVycyB2cyAxOSBsb3NlcnMiLCJTZWN0b3IgbGVhZGVyczogT2lsICYgR2FzICsyLjQ3JSB8IEluc3VyYW5jZSArMi4xNiUgfCBJbmR1c3RyaWFsICsxLjcwJSIsIk5HWCBjb3VsZCByZWFjaCDigqYyNjJUIGluIDIwMjYgdGhyb3VnaCBEYW5nb3RlIFJlZmluZXJ5ICYgTk5QQyBtZWdhLWxpc3RpbmdzIiwiUmF0ZSBlYXNpbmcgY3ljbGUgZXhwZWN0ZWQgdG8gdHJpZ2dlciBhc3NldCByZWFsbG9jYXRpb24gZnJvbSBmaXhlZCBpbmNvbWUgdG8gZXF1aXRpZXMiXX1dfTsKCi8qID09PT09PSBNT0RBTCBDT01QT05FTlQgPT09PT09ICovCmNvbnN0IE1vZGFsID0gKHsgdGl0bGUsIG9uQ2xvc2UsIGNoaWxkcmVuIH0pID0+ICgKICAgIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBpbnNldC0wIG1vZGFsLW92ZXJsYXkgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQiIG9uQ2xpY2s9e29uQ2xvc2V9PgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLTJ4bCB3LWZ1bGwgbWF4LXctbGcgY2FyZC1zaGFkb3cgcC0wIG1heC1oLVs4NXZoXSBvdmVyZmxvdy15LWF1dG8gZmxleCBmbGV4LWNvbCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC02IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57dGl0bGV9PC9oMj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgcC0xIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uIj57SS54KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHgtNiBweS01IG92ZXJmbG93LWF1dG8gZmxleC0xIj57Y2hpbGRyZW59PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KKTsKCmNvbnN0IEZpZWxkID0gKHsgbGFiZWwsIGNoaWxkcmVuIH0pID0+ICgKICAgIDxkaXYgY2xhc3NOYW1lPSJtYi00Ij4KICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMS41Ij57bGFiZWx9PC9sYWJlbD4KICAgICAgICB7Y2hpbGRyZW59CiAgICA8L2Rpdj4KKTsKCmNvbnN0IGlucHV0Q2xzID0gInctZnVsbCBweC0zIHB5LTIuNSB0ZXh0LXNtIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyBiZy1ncmF5LTUwIGZvY3VzOmJnLXdoaXRlIHRyYW5zaXRpb24iOwpjb25zdCBidG5QcmltYXJ5ID0gInctZnVsbCBweS0yLjUgYmctYmx1ZS01MDAgaG92ZXI6YmctYmx1ZS02MDAgdGV4dC13aGl0ZSB0ZXh0LXNtIGZvbnQtbWVkaXVtIHJvdW5kZWQtbGcgdHJhbnNpdGlvbiI7CmNvbnN0IGJ0bkRhbmdlciA9ICJweC0zIHB5LTIuNSBiZy1yZWQtNTAgaG92ZXI6YmctcmVkLTEwMCB0ZXh0LXJlZC02MDAgdGV4dC1zbSBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRyYW5zaXRpb24iOwoKLyogPT09PT09IEZPUk0gQ09NUE9ORU5UUyA9PT09PT0gKi8KY29uc3QgSW5jb21lRm9ybSA9ICh7IGl0ZW0sIG9uQ2xvc2UsIHNldEluY29tZVN0cmVhbXMgfSkgPT4gewogICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0ubmFtZSA6ICcnKTsKICAgIGNvbnN0IFtyb2xlLCBzZXRSb2xlXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5yb2xlIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFtjb21wYW55LCBzZXRDb21wYW55XSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5jb21wYW55IHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFt0eXBlLCBzZXRUeXBlXSA9IHVzZVN0YXRlKGl0ZW0gPyBpdGVtLnR5cGUgOiAnQWN0aXZlJyk7CiAgICBjb25zdCBbbW9udGhseSwgc2V0TW9udGhseV0gPSB1c2VTdGF0ZShpdGVtID8gTnVtYmVyKGl0ZW0ubW9udGhseSkudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJykgOiAnJyk7CiAgICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0uc3RhdHVzIDogJ09uIFRyYWNrJyk7CiAgICBjb25zdCBbbmV4dFBheW1lbnQsIHNldE5leHRQYXltZW50XSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5uZXh0UGF5bWVudCB8fCAnJykgOiAnJyk7CiAgICBjb25zdCBbcGF5bWVudEN5Y2xlLCBzZXRQYXltZW50Q3ljbGVdID0gdXNlU3RhdGUoaXRlbSA/IChpdGVtLnBheW1lbnRDeWNsZSB8fCAnTW9udGhseScpIDogJ01vbnRobHknKTsKICAgIGNvbnN0IFtwYXltZW50cywgc2V0UGF5bWVudHNdID0gdXNlU3RhdGUoaXRlbSAmJiBpdGVtLnBheW1lbnRzID8gaXRlbS5wYXltZW50cyA6IFtdKTsKICAgIGNvbnN0IGFkZFBheW1lbnRNaWxlc3RvbmUgPSAoKSA9PiB7CiAgICAgICAgc2V0UGF5bWVudHMocHJldiA9PiBbLi4ucHJldiwgeyBpZDogRGF0ZS5ub3coKSwgbGFiZWw6ICcnLCBhbW91bnQ6ICcnLCBkdWVEYXRlOiAnJywgcGFpZDogZmFsc2UsIHBhaWREYXRlOiBudWxsIH1dKTsKICAgIH07CiAgICBjb25zdCB1cGRhdGVNaWxlc3RvbmUgPSAobUlkLCBmaWVsZCwgdmFsdWUpID0+IHsKICAgICAgICBzZXRQYXltZW50cyhwcmV2ID0+IHByZXYubWFwKHAgPT4gcC5pZCA9PT0gbUlkID8geyAuLi5wLCBbZmllbGRdOiB2YWx1ZSB9IDogcCkpOwogICAgfTsKICAgIGNvbnN0IHJlbW92ZU1pbGVzdG9uZSA9IChtSWQpID0+IHsKICAgICAgICBzZXRQYXltZW50cyhwcmV2ID0+IHByZXYuZmlsdGVyKHAgPT4gcC5pZCAhPT0gbUlkKSk7CiAgICB9OwogICAgY29uc3QgdG9nZ2xlTWlsZXN0b25lUGFpZCA9IChtSWQpID0+IHsKICAgICAgICBzZXRQYXltZW50cyhwcmV2ID0+IHByZXYubWFwKHAgPT4gcC5pZCA9PT0gbUlkID8geyAuLi5wLCBwYWlkOiAhcC5wYWlkLCBwYWlkRGF0ZTogIXAucGFpZCA/IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdIDogbnVsbCB9IDogcCkpOwogICAgfTsKICAgIGNvbnN0IHN1Ym1pdCA9ICgpID0+IHsKICAgICAgICBpZiAoIW5hbWUgfHwgIW1vbnRobHkpIHJldHVybjsKICAgICAgICBjb25zdCB2YWwgPSBOdW1iZXIobW9udGhseS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSk7CiAgICAgICAgY29uc3QgZGF0YSA9IHsgbmFtZSwgcm9sZSwgY29tcGFueSwgdHlwZSwgbW9udGhseTogdmFsLCBzdGF0dXMsIG5leHRQYXltZW50LCBwYXltZW50Q3ljbGUsIHBheW1lbnRzOiBwYXltZW50cy5tYXAocCA9PiAoeyAuLi5wLCBhbW91bnQ6IE51bWJlcihTdHJpbmcocC5hbW91bnQpLnJlcGxhY2UoL1teMC05Ll0vZywgJycpKSB8fCAwIH0pKSB9OwogICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgIHNldEluY29tZVN0cmVhbXMocHJldiA9PiBwcmV2Lm1hcChzID0+IHMuaWQgPT09IGl0ZW0uaWQgPyB7IC4uLnMsIC4uLmRhdGEgfSA6IHMpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRJbmNvbWVTdHJlYW1zKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IG5ld0lkKCksIC4uLmRhdGEsIGxhc3RQYXltZW50OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSwgdHJlbmQ6IFt2YWwsIHZhbF0gfV0pOwogICAgICAgIH0KICAgICAgICBvbkNsb3NlKCk7CiAgICB9OwogICAgcmV0dXJuICgKICAgICAgICA8TW9kYWwgdGl0bGU9e2l0ZW0gPyAnRWRpdCBJbmNvbWUgU3RyZWFtJyA6ICdBZGQgSW5jb21lIFN0cmVhbSd9IG9uQ2xvc2U9e29uQ2xvc2V9PgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IkNsaWVudCAvIFNvdXJjZSBOYW1lIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBHaW5nZXIgVGVjaG5vbG9naWVzIExpbWl0ZWQiIC8+PC9GaWVsZD4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTMiPgogICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJZb3VyIFJvbGUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17cm9sZX0gb25DaGFuZ2U9e2UgPT4gc2V0Um9sZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJlLmcuIFByaW5jaXBhbCBDb25zdWx0YW50IiAvPjwvRmllbGQ+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9IllvdXIgQ29tcGFueSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtjb21wYW55fSBvbkNoYW5nZT17ZSA9PiBzZXRDb21wYW55KGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9ImUuZy4gU3RhbWZvcmRoYW0iIC8+PC9GaWVsZD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC0zIj4KICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iVHlwZSI+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17dHlwZX0gb25DaGFuZ2U9e2UgPT4gc2V0VHlwZShlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBY3RpdmUiPkFjdGl2ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBhc3NpdmUiPlBhc3NpdmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9Ik1vbnRobHkgQW1vdW50ICjigqYpIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e21vbnRobHl9IG9uQ2hhbmdlPXtlID0+IHsgY29uc3QgcmF3ID0gZS50YXJnZXQudmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyk7IGlmICghcmF3KSB7IHNldE1vbnRobHkoJycpOyByZXR1cm47IH0gY29uc3QgcGFydHMgPSByYXcuc3BsaXQoJy4nKTsgcGFydHNbMF0gPSBOdW1iZXIocGFydHNbMF0pLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycpOyBzZXRNb250aGx5KHBhcnRzLmpvaW4oJy4nKSk7IH19IHBsYWNlaG9sZGVyPSJlLmcuIDEsMDAwLDAwMCIgdHlwZT0idGV4dCIgaW5wdXRNb2RlPSJudW1lcmljIiAvPjwvRmllbGQ+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9Ik5leHQgUGF5bWVudCBEdWUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB0eXBlPSJkYXRlIiB2YWx1ZT17bmV4dFBheW1lbnR9IG9uQ2hhbmdlPXtlID0+IHNldE5leHRQYXltZW50KGUudGFyZ2V0LnZhbHVlKX0gLz48L0ZpZWxkPgogICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJQYXltZW50IEN5Y2xlIj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtwYXltZW50Q3ljbGV9IG9uQ2hhbmdlPXtlID0+IHNldFBheW1lbnRDeWNsZShlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJXZWVrbHkiPldlZWtseTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkJpLXdlZWtseSI+Qmktd2Vla2x5PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTW9udGhseSI+TW9udGhseTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlF1YXJ0ZXJseSI+UXVhcnRlcmx5PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQW5udWFsIj5Bbm51YWw8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQcm9qZWN0LWJhc2VkIj5Qcm9qZWN0LWJhc2VkPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8L0ZpZWxkPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJTdGF0dXMiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17c3RhdHVzfSBvbkNoYW5nZT17ZSA9PiBzZXRTdGF0dXMoZS50YXJnZXQudmFsdWUpfT4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJPbiBUcmFjayI+T24gVHJhY2s8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJHcm93aW5nIj5Hcm93aW5nPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXQgUmlzayI+QXQgUmlzazwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIHsvKiBQYXltZW50IE1pbGVzdG9uZXMgKi99CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtdC00IGJvcmRlci10IGJvcmRlci1ncmF5LTEwMCBwdC00Ij4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTIiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIiPlBheW1lbnQgTWlsZXN0b25lczwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbkNsaWNrPXthZGRQYXltZW50TWlsZXN0b25lfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIj4rIEFkZCBNaWxlc3RvbmU8L2J1dHRvbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICB7cGF5bWVudHMubGVuZ3RoID09PSAwICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGl0YWxpYyBtYi0yIj5ObyBtaWxlc3RvbmVzIHlldC4gQWRkIGRlcG9zaXQvYmFsYW5jZSB0cmFja2luZy48L3A+fQogICAgICAgICAgICAgIHtwYXltZW50cy5tYXAoKHBtLCBwbUlkeCkgPT4gKAogICAgICAgICAgICAgICAgPGRpdiBrZXk9e3BtLmlkfSBjbGFzc05hbWU9eyJtYi0yIHAtMyByb3VuZGVkLWxnIGJvcmRlciB0ZXh0LXNtICIgKyAocG0ucGFpZCA/ICJiZy1ncmVlbi01MCBib3JkZXItZ3JlZW4tMjAwIiA6ICJiZy1ncmF5LTUwIGJvcmRlci1ncmF5LTIwMCIpfT4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTIiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbkNsaWNrPXsoKSA9PiB0b2dnbGVNaWxlc3RvbmVQYWlkKHBtLmlkKX0gY2xhc3NOYW1lPXsidy01IGgtNSByb3VuZGVkIGJvcmRlci0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteHMgIiArIChwbS5wYWlkID8gImJnLWdyZWVuLTUwMCBib3JkZXItZ3JlZW4tNTAwIHRleHQtd2hpdGUiIDogImJvcmRlci1ncmF5LTMwMCBob3Zlcjpib3JkZXItYmx1ZS00MDAiKX0+CiAgICAgICAgICAgICAgICAgICAgICB7cG0ucGFpZCAmJiAiXHUyNzEzIn0KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPSJmbGV4LTEgYmctdHJhbnNwYXJlbnQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIGZvY3VzOmJvcmRlci1ibHVlLTQwMCBvdXRsaW5lLW5vbmUgdGV4dC1zbSBweC0xIHB5LTAuNSIgcGxhY2Vob2xkZXI9eyJNaWxlc3RvbmUgIiArIChwbUlkeCArIDEpICsgIiAoZS5nLiBEZXBvc2l0LCBCYWxhbmNlKSJ9IHZhbHVlPXtwbS5sYWJlbH0gb25DaGFuZ2U9e2UgPT4gdXBkYXRlTWlsZXN0b25lKHBtLmlkLCAnbGFiZWwnLCBlLnRhcmdldC52YWx1ZSl9Lz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25DbGljaz17KCkgPT4gcmVtb3ZlTWlsZXN0b25lKHBtLmlkKX0gY2xhc3NOYW1lPSJ0ZXh0LXJlZC00MDAgaG92ZXI6dGV4dC1yZWQtNjAwIHRleHQteHMiPlJlbW92ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIgbWwtNyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT0idy0yOCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQgcHgtMiBweS0xIHRleHQteHMgZm9jdXM6Ym9yZGVyLWJsdWUtNDAwIG91dGxpbmUtbm9uZSIgcGxhY2Vob2xkZXI9IkFtb3VudCIgdmFsdWU9e3BtLmFtb3VudH0gb25DaGFuZ2U9e2UgPT4gdXBkYXRlTWlsZXN0b25lKHBtLmlkLCAnYW1vdW50JywgZS50YXJnZXQudmFsdWUpfS8+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGNsYXNzTmFtZT0iZmxleC0xIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCBweC0yIHB5LTEgdGV4dC14cyBmb2N1czpib3JkZXItYmx1ZS00MDAgb3V0bGluZS1ub25lIiB2YWx1ZT17cG0uZHVlRGF0ZSB8fCAnJ30gb25DaGFuZ2U9e2UgPT4gdXBkYXRlTWlsZXN0b25lKHBtLmlkLCAnZHVlRGF0ZScsIGUudGFyZ2V0LnZhbHVlKX0vPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAge3BtLnBhaWQgJiYgcG0ucGFpZERhdGUgJiYgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JlZW4tNjAwIG1sLTcgbXQtMSI+eyJQYWlkIG9uICIgKyBwbS5wYWlkRGF0ZX08L3A+fQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtdC02Ij4KICAgICAgICAgICAgICAgIHtpdGVtICYmIDxidXR0b24gY2xhc3NOYW1lPXtidG5EYW5nZXJ9IG9uQ2xpY2s9eygpID0+IHsgc2V0SW5jb21lU3RyZWFtcyhwcmV2ID0+IHByZXYuZmlsdGVyKHMgPT4gcy5pZCAhPT0gaXRlbS5pZCkpOyBvbkNsb3NlKCk7IH19PkRlbGV0ZTwvYnV0dG9uPn0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtidG5QcmltYXJ5fSBvbkNsaWNrPXtzdWJtaXR9PntpdGVtID8gJ1NhdmUgQ2hhbmdlcycgOiAnQWRkIEluY29tZSBTdHJlYW0nfTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L01vZGFsPgogICAgKTsKfTsKCmNvbnN0IEFjY2VwdFRhc2tNb2RhbCA9ICh7IHRhc2ssIG9uQ2hvb3NlRGFpbHksIG9uQ2hvb3NlV2Vla2x5LCBvbkNhbmNlbCB9KSA9PiB7CiAgY29uc3QgcHJpb3JpdHlDb2xvcnMgPSB7IGhpZ2g6ICJiZy1yZWQtMTAwIHRleHQtcmVkLTYwMCIsIG1lZGl1bTogImJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTYwMCIsIGxvdzogImJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTYwMCIgfTsKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9ImZpeGVkIGluc2V0LTAgbW9kYWwtb3ZlcmxheSB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCIgb25DbGljaz17b25DYW5jZWx9PgogICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC0yeGwgdy1mdWxsIG1heC13LW1kIGNhcmQtc2hhZG93IHAtMCBvdmVyZmxvdy1oaWRkZW4iIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC02IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5XaGVyZSBzaG91bGQgdGhpcyBnbz88L2gyPgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNhbmNlbH0gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgdHJhbnNpdGlvbiI+CiAgICAgICAgICAgIDxzdmcgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2VXaWR0aD0iMiI+PHBhdGggZD0iTTE4IDZMNiAxOE02IDZsMTIgMTIiLz48L3N2Zz4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC02IHB5LTUiPgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTQgcC0zIGJnLWdyYXktNTAgcm91bmRlZC14bCI+CiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIG1iLTEiPnt0YXNrLnRhc2tfdGV4dH08L3A+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtcHVycGxlLTYwMCI+ZnJvbSB7dGFzay5kZWxlZ2F0b3JfbmFtZX08L3NwYW4+CiAgICAgICAgICAgICAge3Rhc2sucHJpb3JpdHkgJiYgPHNwYW4gY2xhc3NOYW1lPXsidGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCAiICsgKHByaW9yaXR5Q29sb3JzW3Rhc2sucHJpb3JpdHldIHx8IHByaW9yaXR5Q29sb3JzLm1lZGl1bSl9Pnt0YXNrLnByaW9yaXR5fTwvc3Bhbj59CiAgICAgICAgICAgICAge3Rhc2suZGVhZGxpbmUgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPnt0YXNrLmRlYWRsaW5lfTwvc3Bhbj59CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25DaG9vc2VEYWlseSh0YXNrKX0gY2xhc3NOYW1lPXsiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTIgcC00IHJvdW5kZWQteGwgYm9yZGVyLTIgdHJhbnNpdGlvbiBob3ZlcjpzaGFkb3ctbWQgIiArICh0YXNrLnRhc2tfdHlwZSA9PT0gInF1aWNrIiA/ICJib3JkZXItYmx1ZS00MDAgYmctYmx1ZS01MCIgOiAiYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJvcmRlci1ibHVlLTMwMCIpfT4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtMnhsIj7DsMKfwpPCizwvc3Bhbj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCI+RGFpbHkgVGFza3M8L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPkFkZCB0byB0b2RheSdzIHBsYW48L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uQ2hvb3NlV2Vla2x5KHRhc2spfSBjbGFzc05hbWU9eyJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBnYXAtMiBwLTQgcm91bmRlZC14bCBib3JkZXItMiB0cmFuc2l0aW9uIGhvdmVyOnNoYWRvdy1tZCAiICsgKHRhc2sudGFza190eXBlID09PSAid2Vla2x5IiA/ICJib3JkZXItYmx1ZS00MDAgYmctYmx1ZS01MCIgOiAiYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJvcmRlci1ibHVlLTMwMCIpfT4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtMnhsIj7DsMKfwpPChTwvc3Bhbj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCI+V2Vla2x5IFBsYW48L3NwYW4+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPkFkZCB0byB0aGlzIHdlZWs8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmNvbnN0IERlbGVnYXRlTGF1bmNocGFkID0gKHsgc3VwYWJhc2UsIHN1cGFVc2VyLCB1c2VyUHJvZmlsZSwgb25EZWxlZ2F0ZSwgSSB9KSA9PiB7CiAgY29uc3QgW3Rhc2tUZXh0LCBzZXRUYXNrVGV4dF0gPSB1c2VTdGF0ZSgiIik7CiAgY29uc3QgW3JlY2lwaWVudCwgc2V0UmVjaXBpZW50XSA9IHVzZVN0YXRlKCIiKTsKICBjb25zdCBbc3VnZ2VzdGlvbnMsIHNldFN1Z2dlc3Rpb25zXSA9IHVzZVN0YXRlKFtdKTsKICBjb25zdCBbc2VsZWN0ZWRVc2VyLCBzZXRTZWxlY3RlZFVzZXJdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW3ByaW9yaXR5LCBzZXRQcmlvcml0eV0gPSB1c2VTdGF0ZSgibWVkaXVtIik7CiAgY29uc3QgW3Rhc2tUeXBlLCBzZXRUYXNrVHlwZV0gPSB1c2VTdGF0ZSgicXVpY2siKTsKICBjb25zdCBbZGVhZGxpbmUsIHNldERlYWRsaW5lXSA9IHVzZVN0YXRlKCIiKTsKICBjb25zdCBbc2VuZGluZywgc2V0U2VuZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3NlbnQsIHNldFNlbnRdID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzaG93U3VnZ2VzdGlvbnMsIHNldFNob3dTdWdnZXN0aW9uc10gPSB1c2VTdGF0ZShmYWxzZSk7CgogIGNvbnN0IHNlYXJjaFVzZXJzID0gYXN5bmMgKHF1ZXJ5KSA9PiB7CiAgICBpZiAocXVlcnkubGVuZ3RoIDwgMikgeyBzZXRTdWdnZXN0aW9ucyhbXSk7IHNldFNob3dTdWdnZXN0aW9ucyhmYWxzZSk7IHJldHVybjsgfQogICAgdHJ5IHsKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCJwcm9maWxlcyIpLnNlbGVjdCgiaWQsIHVzZXJuYW1lLCBmdWxsX25hbWUiKS5vcigidXNlcm5hbWUuaWxpa2UuJSIgKyBxdWVyeSArICIlLGZ1bGxfbmFtZS5pbGlrZS4lIiArIHF1ZXJ5ICsgIiUiKS5uZXEoImlkIiwgc3VwYVVzZXIuaWQpLmxpbWl0KDUpOwogICAgICBzZXRTdWdnZXN0aW9ucyhkYXRhIHx8IFtdKTsKICAgICAgc2V0U2hvd1N1Z2dlc3Rpb25zKChkYXRhIHx8IFtdKS5sZW5ndGggPiAwKTsKICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coIlNlYXJjaCBlcnJvcjoiLCBlKTsgfQogIH07CgogIGNvbnN0IHNlbGVjdFVzZXIgPSAodXNlcikgPT4gewogICAgc2V0U2VsZWN0ZWRVc2VyKHVzZXIpOwogICAgc2V0UmVjaXBpZW50KHVzZXIudXNlcm5hbWUpOwogICAgc2V0U2hvd1N1Z2dlc3Rpb25zKGZhbHNlKTsKICB9OwoKICBjb25zdCBsYXVuY2ggPSBhc3luYyAoKSA9PiB7CiAgICBpZiAoIXRhc2tUZXh0LnRyaW0oKSB8fCAhc2VsZWN0ZWRVc2VyKSByZXR1cm47CiAgICBzZXRTZW5kaW5nKHRydWUpOwogICAgdHJ5IHsKICAgICAgYXdhaXQgb25EZWxlZ2F0ZSh7CiAgICAgICAgdGFza190ZXh0OiB0YXNrVGV4dC50cmltKCksCiAgICAgICAgZGVsZWdhdGVkX3RvOiBzZWxlY3RlZFVzZXIuaWQsCiAgICAgICAgcmVjaXBpZW50X3VzZXJuYW1lOiBzZWxlY3RlZFVzZXIudXNlcm5hbWUsCiAgICAgICAgcmVjaXBpZW50X25hbWU6IHNlbGVjdGVkVXNlci5mdWxsX25hbWUgfHwgc2VsZWN0ZWRVc2VyLnVzZXJuYW1lLAogICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSwKICAgICAgICB0YXNrX3R5cGU6IHRhc2tUeXBlLAogICAgICAgIGRlYWRsaW5lOiB0YXNrVHlwZSA9PT0gIndlZWtseSIgPyBkZWFkbGluZSA6IG51bGwKICAgICAgfSk7CiAgICAgIHNldFNlbnQodHJ1ZSk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHNldFRhc2tUZXh0KCIiKTsgc2V0UmVjaXBpZW50KCIiKTsgc2V0U2VsZWN0ZWRVc2VyKG51bGwpOwogICAgICAgIHNldFByaW9yaXR5KCJtZWRpdW0iKTsgc2V0VGFza1R5cGUoInF1aWNrIik7IHNldERlYWRsaW5lKCIiKTsKICAgICAgICBzZXRTZW50KGZhbHNlKTsKICAgICAgfSwgMjAwMCk7CiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCJEZWxlZ2F0ZSBlcnJvcjoiLCBlKTsgfQogICAgc2V0U2VuZGluZyhmYWxzZSk7CiAgfTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJtYi02IHAtNCByb3VuZGVkLTJ4bCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwIHZpYS1ibHVlLTUwIHRvLWluZGlnby01MCBib3JkZXIgYm9yZGVyLXB1cnBsZS0xMDAiPgogICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMyI+CiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWxnIj7DsMKfwprCgDwvc3Bhbj4KICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1wdXJwbGUtOTAwIj5EZWxlZ2F0ZSBMYXVuY2hwYWQ8L2gzPgogICAgICAgIHtzZW50ICYmIDxzcGFuIGNsYXNzTmFtZT0ibWwtYXV0byB0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi02MDAgYW5pbWF0ZS1wdWxzZSI+TGF1bmNoZWQhPC9zcGFuPn0KICAgICAgPC9kaXY+CiAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17dGFza1RleHR9IG9uQ2hhbmdlPXtlID0+IHNldFRhc2tUZXh0KGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9IkRlc2NyaWJlIHRoZSB0YXNrLi4uIiBjbGFzc05hbWU9InctZnVsbCBwLTMgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXB1cnBsZS0yMDAgYmctd2hpdGUgdGV4dC1zbSByZXNpemUtbm9uZSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctcHVycGxlLTMwMCBtYi0zIiByb3dzPXsyfSAvPgogICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtYi0zIj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUgZmxleC0xIj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItcHVycGxlLTIwMCBweC0zIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXB1cnBsZS00MDAgdGV4dC1zbSBtci0xIj5APC9zcGFuPgogICAgICAgICAgICA8aW5wdXQgdmFsdWU9e3JlY2lwaWVudH0gb25DaGFuZ2U9e2UgPT4geyBzZXRSZWNpcGllbnQoZS50YXJnZXQudmFsdWUpOyBzZXRTZWxlY3RlZFVzZXIobnVsbCk7IHNlYXJjaFVzZXJzKGUudGFyZ2V0LnZhbHVlKTsgfX0gcGxhY2Vob2xkZXI9InVzZXJuYW1lIiBjbGFzc05hbWU9ImZsZXgtMSBweS0yIHRleHQtc20gYmctdHJhbnNwYXJlbnQgZm9jdXM6b3V0bGluZS1ub25lIiAvPgogICAgICAgICAgICB7c2VsZWN0ZWRVc2VyICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTYwMCI+4pyTPC9zcGFuPn0KICAgICAgICAgIDwvZGl2PgogICAgICAgICAge3Nob3dTdWdnZXN0aW9ucyAmJiA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgdG9wLWZ1bGwgbGVmdC0wIHJpZ2h0LTAgbXQtMSBiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0yMDAgc2hhZG93LWxnIHotMTAgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAge3N1Z2dlc3Rpb25zLm1hcCh1ID0+IDxidXR0b24ga2V5PXt1LmlkfSBvbkNsaWNrPXsoKSA9PiBzZWxlY3RVc2VyKHUpfSBjbGFzc05hbWU9InctZnVsbCBweC0zIHB5LTIgdGV4dC1sZWZ0IHRleHQtc20gaG92ZXI6YmctcHVycGxlLTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAiPnt1LmZ1bGxfbmFtZSB8fCB1LnVzZXJuYW1lfTwvc3Bhbj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+QHt1LnVzZXJuYW1lfTwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+KX0KICAgICAgICAgIDwvZGl2Pn0KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItcHVycGxlLTIwMCBvdmVyZmxvdy1oaWRkZW4gYmctd2hpdGUiPgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRUYXNrVHlwZSgicXVpY2siKX0gY2xhc3NOYW1lPXsicHgtMyBweS0yIHRleHQteHMgZm9udC1tZWRpdW0gdHJhbnNpdGlvbiAiICsgKHRhc2tUeXBlID09PSAicXVpY2siID8gImJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSIgOiAidGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1wdXJwbGUtNTAiKX0+RGFpbHk8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0VGFza1R5cGUoIndlZWtseSIpfSBjbGFzc05hbWU9eyJweC0zIHB5LTIgdGV4dC14cyBmb250LW1lZGl1bSB0cmFuc2l0aW9uICIgKyAodGFza1R5cGUgPT09ICJ3ZWVrbHkiID8gImJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSIgOiAidGV4dC1ncmF5LTUwMCBob3ZlcjpiZy1wdXJwbGUtNTAiKX0+V2Vla2x5PC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMyI+CiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPlByaW9yaXR5Ojwvc3Bhbj4KICAgICAgICB7WyJoaWdoIiwibWVkaXVtIiwibG93Il0ubWFwKHAgPT4gPGJ1dHRvbiBrZXk9e3B9IG9uQ2xpY2s9eygpID0+IHNldFByaW9yaXR5KHApfSBjbGFzc05hbWU9eyJ0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbiAiICsgKHByaW9yaXR5ID09PSBwID8gKHAgPT09ICJoaWdoIiA/ICJiZy1yZWQtMTAwIHRleHQtcmVkLTYwMCIgOiBwID09PSAibWVkaXVtIiA/ICJiZy1hbWJlci0xMDAgdGV4dC1hbWJlci02MDAiIDogImJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTYwMCIpIDogImJnLWdyYXktMTAwIHRleHQtZ3JheS00MDAgaG92ZXI6YmctZ3JheS0yMDAiKX0+e3B9PC9idXR0b24+KX0KICAgICAgICB7dGFza1R5cGUgPT09ICJ3ZWVrbHkiICYmIDxpbnB1dCB0eXBlPSJkYXRlIiB2YWx1ZT17ZGVhZGxpbmV9IG9uQ2hhbmdlPXtlID0+IHNldERlYWRsaW5lKGUudGFyZ2V0LnZhbHVlKX0gY2xhc3NOYW1lPSJtbC1hdXRvIHRleHQteHMgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHB4LTIgcHktMSIgLz59CiAgICAgIDwvZGl2PgogICAgICA8YnV0dG9uIG9uQ2xpY2s9e2xhdW5jaH0gZGlzYWJsZWQ9eyF0YXNrVGV4dC50cmltKCkgfHwgIXNlbGVjdGVkVXNlciB8fCBzZW5kaW5nfSBjbGFzc05hbWU9eyJ3LWZ1bGwgcHktMi41IHJvdW5kZWQteGwgdGV4dC1zbSBmb250LXNlbWlib2xkIHRyYW5zaXRpb24gIiArICh0YXNrVGV4dC50cmltKCkgJiYgc2VsZWN0ZWRVc2VyICYmICFzZW5kaW5nID8gImJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNjAwIHRvLWluZGlnby02MDAgdGV4dC13aGl0ZSBob3Zlcjpmcm9tLXB1cnBsZS03MDAgaG92ZXI6dG8taW5kaWdvLTcwMCBzaGFkb3ctbWQiIDogImJnLWdyYXktMjAwIHRleHQtZ3JheS00MDAgY3Vyc29yLW5vdC1hbGxvd2VkIil9PgogICAgICAgIHtzZW50ID8gIuKckyBMYXVuY2hlZCEiIDogc2VuZGluZyA/ICJMYXVuY2hpbmcuLi4iIDogIsOwwp/CmsKAIExhdW5jaCBUYXNrIn0KICAgICAgPC9idXR0b24+CiAgICA8L2Rpdj4KICApOwp9OwoKCmNvbnN0IFByb2plY3RGb3JtID0gKHsgaXRlbSwgb25DbG9zZSwgc2V0UHJvamVjdHMsIGdldFByb2plY3RQcm9ncmVzcywgc3VwYVVzZXIsIHdlZWtseVBsYW4sIHF1aWNrVGFza3MgfSkgPT4gewogICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0ubmFtZSA6ICcnKTsKICAgIGNvbnN0IFtkZXNjLCBzZXREZXNjXSA9IHVzZVN0YXRlKGl0ZW0gPyBpdGVtLmRlc2MgOiAnJyk7CiAgICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0uc3RhdHVzIDogJ1BsYW5uaW5nJyk7CiAgICBjb25zdCBbbGF1bmNoLCBzZXRMYXVuY2hdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0ubGF1bmNoIDogJycpOwogICAgY29uc3QgW3RlYW0sIHNldFRlYW1dID0gdXNlU3RhdGUoaXRlbSA/IFN0cmluZyhpdGVtLnRlYW0pIDogJzEnKTsKICAgIGNvbnN0IFtuZXh0LCBzZXROZXh0XSA9IHVzZVN0YXRlKGl0ZW0gPyBpdGVtLm5leHQgOiAnJyk7CiAgICBjb25zdCBbc2VsZWN0ZWRNZW1iZXJzLCBzZXRTZWxlY3RlZE1lbWJlcnNdID0gdXNlU3RhdGUoaXRlbSAmJiBpdGVtLnRlYW1NZW1iZXJzID8gaXRlbS50ZWFtTWVtYmVycyA6IFtdKTsKICAgIGNvbnN0IFttZW1iZXJTZWFyY2gsIHNldE1lbWJlclNlYXJjaF0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbbWVtYmVyU3VnZ2VzdGlvbnMsIHNldE1lbWJlclN1Z2dlc3Rpb25zXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IHNlYXJjaE1lbWJlcnMgPSBhc3luYyAocSkgPT4gewogICAgICAgIGlmICghcSB8fCBxLmxlbmd0aCA8IDEpIHsgc2V0TWVtYmVyU3VnZ2VzdGlvbnMoW10pOyByZXR1cm47IH0KICAgICAgICBjb25zdCBjbGVhbiA9IHEucmVwbGFjZSgnQCcsICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZnVsbF9uYW1lLCBpbml0aWFscywgYXZhdGFyX3VybCcpLmlsaWtlKCd1c2VybmFtZScsIGNsZWFuICsgJyUnKS5saW1pdCg1KTsKICAgICAgICBzZXRNZW1iZXJTdWdnZXN0aW9ucygoZGF0YSB8fCBbXSkuZmlsdGVyKHUgPT4gIXNlbGVjdGVkTWVtYmVycy5pbmNsdWRlcyh1LnVzZXJuYW1lKSkpOwogICAgfTsKICAgIGNvbnN0IGFkZE1lbWJlciA9ICh1c2VybmFtZSkgPT4geyBzZXRTZWxlY3RlZE1lbWJlcnMocHJldiA9PiBbLi4ucHJldiwgdXNlcm5hbWVdKTsgc2V0TWVtYmVyU2VhcmNoKCcnKTsgc2V0TWVtYmVyU3VnZ2VzdGlvbnMoW10pOyB9OwogICAgY29uc3QgcmVtb3ZlTWVtYmVyID0gKHVzZXJuYW1lKSA9PiB7IHNldFNlbGVjdGVkTWVtYmVycyhwcmV2ID0+IHByZXYuZmlsdGVyKHUgPT4gdSAhPT0gdXNlcm5hbWUpKTsgfTsKICAgIGNvbnN0IGF1dG9Qcm9ncmVzcyA9IGl0ZW0gPyBnZXRQcm9qZWN0UHJvZ3Jlc3MoaXRlbS5pZCkgOiBudWxsOwogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICAgIGlmICghbmFtZSkgcmV0dXJuOwogICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgIHNldFByb2plY3RzKHByZXYgPT4gcHJldi5tYXAocCA9PiBwLmlkID09PSBpdGVtLmlkID8geyAuLi5wLCBuYW1lLCBkZXNjLCBzdGF0dXMsIGxhdW5jaCwgdGVhbTogTnVtYmVyKHRlYW0pLCBuZXh0LCB0ZWFtTWVtYmVyczogc2VsZWN0ZWRNZW1iZXJzIH0gOiBwKSk7CiAgICAgIC8vIFN5bmMgdGFnZ2VkIG1lbWJlcnMgYW5kIHByb2plY3Qgc25hcHNob3QgdG8gU3VwYWJhc2UKICAgICAgKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoc3VwYVVzZXIgJiYgc2VsZWN0ZWRNZW1iZXJzICYmIHNlbGVjdGVkTWVtYmVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGVzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnaWQsIHVzZXJuYW1lJykuaW4oJ3VzZXJuYW1lJywgc2VsZWN0ZWRNZW1iZXJzKTsKICAgICAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2plY3RfbWVtYmVycycpLmRlbGV0ZSgpLmVxKCdwcm9qZWN0X293bmVyX2lkJywgc3VwYVVzZXIuaWQpLmVxKCdwcm9qZWN0X2xvY2FsX2lkJywgaXRlbS5pZCk7CiAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gKHByb2ZpbGVzIHx8IFtdKS5tYXAocCA9PiAoewogICAgICAgICAgICAgICAgICBwcm9qZWN0X293bmVyX2lkOiBzdXBhVXNlci5pZCwKICAgICAgICAgICAgICAgICAgcHJvamVjdF9sb2NhbF9pZDogaXRlbS5pZCwKICAgICAgICAgICAgICAgICAgcHJvamVjdF9uYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBtZW1iZXJfcHJvZmlsZV9pZDogcC5pZCwKICAgICAgICAgICAgICAgICAgcm9sZTogJ21lbWJlcicKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA+IDApIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2plY3RfbWVtYmVycycpLmluc2VydChyb3dzKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cGFVc2VyKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9qZWN0X21lbWJlcnMnKS5kZWxldGUoKS5lcSgncHJvamVjdF9vd25lcl9pZCcsIHN1cGFVc2VyLmlkKS5lcSgncHJvamVjdF9sb2NhbF9pZCcsIGl0ZW0uaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoc3VwYVVzZXIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZFcgPSB3ZWVrbHlQbGFuLmZpbHRlcih0ID0+IHQucHJvamVjdElkID09PSBpdGVtLmlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEQgPSAocXVpY2tUYXNrcyB8fCBbXSkuZmlsdGVyKHQgPT4gdC5wcm9qZWN0SWQgPT09IGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgY29uc3Qgc25hcCA9IHsgbmFtZSwgZGVzYywgc3RhdHVzLCBwcm9ncmVzczogaXRlbS5wcm9ncmVzcywgbGF1bmNoLCBuZXh0LCB0ZWFtTWVtYmVyczogc2VsZWN0ZWRNZW1iZXJzIHx8IFtdIH07CiAgICAgICAgICAgICAgICBjb25zdCB0YXNrc1NuYXAgPSBbLi4ubGlua2VkVy5tYXAodCA9PiAoeyAuLi50LCB0eXBlOiAnd2Vla2x5JyB9KSksIC4uLmxpbmtlZEQubWFwKHQgPT4gKHsgLi4udCwgdHlwZTogJ2RhaWx5JyB9KSldOwogICAgICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc2hhcmVkX3Byb2plY3RfZGF0YScpLnVwc2VydCh7IHByb2plY3Rfb3duZXJfaWQ6IHN1cGFVc2VyLmlkLCBwcm9qZWN0X2xvY2FsX2lkOiBpdGVtLmlkLCBwcm9qZWN0X3NuYXBzaG90OiBzbmFwLCB0YXNrc19zbmFwc2hvdDogdGFza3NTbmFwLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSwgeyBvbkNvbmZsaWN0OiAncHJvamVjdF9vd25lcl9pZCxwcm9qZWN0X2xvY2FsX2lkJyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCdzeW5jIGVycm9yOicsIGVycik7IH0KICAgICAgICAgIH0pKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0UHJvamVjdHMocHJldiA9PiBbLi4ucHJldiwgeyBpZDogbmV3SWQoKSwgbmFtZSwgZGVzYywgcHJvZ3Jlc3M6IDAsIHN0YXR1cywgc3RhcnQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLCBsYXVuY2gsIHRlYW06IE51bWJlcih0ZWFtKSwgbmV4dCwgdGVhbU1lbWJlcnM6IHNlbGVjdGVkTWVtYmVycyB9XSk7CiAgICAgIC8vIFN5bmMgbmV3IHByb2plY3QgbWVtYmVycwogICAgICBjb25zdCBuZXdQcm9qSWQgPSBwcm9qZWN0cy5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4ucHJvamVjdHMubWFwKHAgPT4gcC5pZCkpICsgMSA6IDE7CiAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKHN1cGFVc2VyICYmIHNlbGVjdGVkTWVtYmVycyAmJiBzZWxlY3RlZE1lbWJlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlcyB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZScpLmluKCd1c2VybmFtZScsIHNlbGVjdGVkTWVtYmVycyk7CiAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gKHByb2ZpbGVzIHx8IFtdKS5tYXAocCA9PiAoewogICAgICAgICAgICAgICAgICBwcm9qZWN0X293bmVyX2lkOiBzdXBhVXNlci5pZCwKICAgICAgICAgICAgICAgICAgcHJvamVjdF9sb2NhbF9pZDogbmV3UHJvaklkLAogICAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIG1lbWJlcl9wcm9maWxlX2lkOiBwLmlkLAogICAgICAgICAgICAgICAgICByb2xlOiAnbWVtYmVyJwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCkgYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvamVjdF9tZW1iZXJzJykuaW5zZXJ0KHJvd3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoc3VwYVVzZXIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZFcgPSB3ZWVrbHlQbGFuLmZpbHRlcih0ID0+IHQucHJvamVjdElkID09PSBuZXdQcm9qSWQpOwogICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRCA9IChxdWlja1Rhc2tzIHx8IFtdKS5maWx0ZXIodCA9PiB0LnByb2plY3RJZCA9PT0gbmV3UHJvaklkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHNuYXAgPSB7IG5hbWUsIGRlc2MsIHN0YXR1czogJ1BsYW5uaW5nJywgcHJvZ3Jlc3M6IDAsIGxhdW5jaCwgbmV4dCwgdGVhbU1lbWJlcnM6IHNlbGVjdGVkTWVtYmVycyB8fCBbXSB9OwogICAgICAgICAgICAgICAgY29uc3QgdGFza3NTbmFwID0gWy4uLmxpbmtlZFcubWFwKHQgPT4gKHsgLi4udCwgdHlwZTogJ3dlZWtseScgfSkpLCAuLi5saW5rZWRELm1hcCh0ID0+ICh7IC4uLnQsIHR5cGU6ICdkYWlseScgfSkpXTsKICAgICAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3NoYXJlZF9wcm9qZWN0X2RhdGEnKS51cHNlcnQoeyBwcm9qZWN0X293bmVyX2lkOiBzdXBhVXNlci5pZCwgcHJvamVjdF9sb2NhbF9pZDogbmV3UHJvaklkLCBwcm9qZWN0X3NuYXBzaG90OiBzbmFwLCB0YXNrc19zbmFwc2hvdDogdGFza3NTbmFwLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSwgeyBvbkNvbmZsaWN0OiAncHJvamVjdF9vd25lcl9pZCxwcm9qZWN0X2xvY2FsX2lkJyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCdzeW5jIGVycm9yOicsIGVycik7IH0KICAgICAgICAgIH0pKCk7CiAgICAgICAgfQogICAgICAgIG9uQ2xvc2UoKTsKICAgIH07CiAgICByZXR1cm4gKAogICAgICAgIDxNb2RhbCB0aXRsZT17aXRlbSA/ICdFZGl0IFByb2plY3QnIDogJ0FkZCBQcm9qZWN0J30gb25DbG9zZT17b25DbG9zZX0+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iUHJvamVjdCBOYW1lIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBOdU9wZXJhbmRpIE1WUCIgLz48L0ZpZWxkPgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IkRlc2NyaXB0aW9uIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e2Rlc2N9IG9uQ2hhbmdlPXtlID0+IHNldERlc2MoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iQnJpZWYgZGVzY3JpcHRpb24iIC8+PC9GaWVsZD4KICAgICAgICAgICAge2l0ZW0gJiYgYXV0b1Byb2dyZXNzICE9PSBudWxsICYmICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi00IHAtMyBiZy1ibHVlLTUwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0iPlByb2dyZXNzIGF1dG8tY2FsY3VsYXRlZCBmcm9tIGxpbmtlZCB0YXNrczoge2F1dG9Qcm9ncmVzc30lPC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICl9CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC0zIj4KICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iU3RhdHVzIj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtzdGF0dXN9IG9uQ2hhbmdlPXtlID0+IHNldFN0YXR1cyhlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQbGFubmluZyI+UGxhbm5pbmc8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJJbiBQcm9ncmVzcyI+SW4gUHJvZ3Jlc3M8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMYXVuY2ggUmVhZHkiPkxhdW5jaCBSZWFkeTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkNvbXBsZXRlZCI+Q29tcGxldGVkPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8L0ZpZWxkPgogICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJUZWFtIFNpemUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB0eXBlPSJudW1iZXIiIG1pbj0iMSIgdmFsdWU9e3RlYW19IG9uQ2hhbmdlPXtlID0+IHNldFRlYW0oZS50YXJnZXQudmFsdWUpfSAvPjwvRmllbGQ+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IlRlYW0gTWVtYmVycyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRNZW1iZXJzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LXdyYXAgZ2FwLTEuNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRNZW1iZXJzLm1hcCh1ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9e3V9IGNsYXNzTmFtZT0iaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHB4LTIuNSBweS0xIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtIGJnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtNzAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQHt1fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25DbGljaz17KCkgPT4gcmVtb3ZlTWVtYmVyKHUpfSBjbGFzc05hbWU9Im1sLTAuNSBob3Zlcjp0ZXh0LXB1cnBsZS05MDAiPsODwpc8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e21lbWJlclNlYXJjaH0gb25DaGFuZ2U9e2UgPT4geyBzZXRNZW1iZXJTZWFyY2goZS50YXJnZXQudmFsdWUpOyBzZWFyY2hNZW1iZXJzKGUudGFyZ2V0LnZhbHVlKTsgfX0gcGxhY2Vob2xkZXI9IlNlYXJjaCBieSB1c2VybmFtZS4uLiIgLz4KICAgICAgICAgICAgICAgICAgICAgICAge21lbWJlclN1Z2dlc3Rpb25zLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIHotNTAgbGVmdC0wIHJpZ2h0LTAgbXQtMSBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgc2hhZG93LWxnIG1heC1oLTQwIG92ZXJmbG93LXktYXV0byI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21lbWJlclN1Z2dlc3Rpb25zLm1hcCh1ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e3UudXNlcm5hbWV9IHR5cGU9ImJ1dHRvbiIgb25DbGljaz17KCkgPT4gYWRkTWVtYmVyKHUudXNlcm5hbWUpfSBjbGFzc05hbWU9InctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHRleHQtc20gaG92ZXI6YmctcHVycGxlLTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idy02IGgtNiByb3VuZGVkLWZ1bGwgYmctcHVycGxlLTEwMCB0ZXh0LXB1cnBsZS03MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBmb250LWJvbGQiPnt1LnVzZXJuYW1lWzBdLnRvVXBwZXJDYXNlKCl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LW1lZGl1bSI+e3UuZnVsbF9uYW1lIHx8IHUudXNlcm5hbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIHRleHQteHMiPkB7dS51c2VybmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9GaWVsZD4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJUYXJnZXQgTGF1bmNoIERhdGUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB0eXBlPSJkYXRlIiB2YWx1ZT17bGF1bmNofSBvbkNoYW5nZT17ZSA9PiBzZXRMYXVuY2goZS50YXJnZXQudmFsdWUpfSAvPjwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iTmV4dCBBY3Rpb24iPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17bmV4dH0gb25DaGFuZ2U9e2UgPT4gc2V0TmV4dChlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJXaGF0J3MgdGhlIG5leHQgc3RlcD8iIC8+PC9GaWVsZD4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIgbXQtNiI+CiAgICAgICAgICAgICAgICB7aXRlbSAmJiA8YnV0dG9uIGNsYXNzTmFtZT17YnRuRGFuZ2VyfSBvbkNsaWNrPXsoKSA9PiB7IHNldFByb2plY3RzKHByZXYgPT4gcHJldi5maWx0ZXIocCA9PiBwLmlkICE9PSBpdGVtLmlkKSk7IG9uQ2xvc2UoKTsgfX0+RGVsZXRlPC9idXR0b24+fQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2J0blByaW1hcnl9IG9uQ2xpY2s9e3N1Ym1pdH0+e2l0ZW0gPyAnU2F2ZSBDaGFuZ2VzJyA6ICdBZGQgUHJvamVjdCd9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgV2Vla2x5VGFza0Zvcm0gPSAoeyBpdGVtLCBvbkNsb3NlLCBzZXRXZWVrbHlQbGFuLCBhY3RpdmVQcm9qZWN0cywgb25EZWxlZ2F0ZSB9KSA9PiB7CiAgICBjb25zdCBbdGFzaywgc2V0VGFza10gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS50YXNrIDogJycpOwogICAgY29uc3QgW3Byb2pJZCwgc2V0UHJvaklkXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5wcm9qZWN0SWQgfHwgJycpIDogJycpOwogICAgY29uc3QgW3N1YnRhc2tzLCBzZXRTdWJ0YXNrc10gPSB1c2VTdGF0ZShpdGVtICYmIGl0ZW0uc3VidGFza3MgPyBpdGVtLnN1YnRhc2tzLm1hcChzID0+ICh7Li4uc30pKSA6IFtdKTsKICAgIGNvbnN0IFtuZXdTdWIsIHNldE5ld1N1Yl0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbZGVhZGxpbmUsIHNldERlYWRsaW5lXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5kZWFkbGluZSB8fCAnJykgOiAnJyk7CiAgICBjb25zdCBbZGVsZWdhdGVkVG8sIHNldERlbGVnYXRlZFRvXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5kZWxlZ2F0ZWRUbyB8fCAnJykgOiAnJyk7CiAgICBjb25zdCBhZGRTdWIgPSAoKSA9PiB7CiAgICAgICAgaWYgKCFuZXdTdWIudHJpbSgpKSByZXR1cm47CiAgICAgICAgc2V0U3VidGFza3MocHJldiA9PiBbLi4ucHJldiwgeyBpZDogbmV3SWQoKSwgdGV4dDogbmV3U3ViLnRyaW0oKSwgZG9uZTogZmFsc2UgfV0pOwogICAgICAgIHNldE5ld1N1YignJyk7CiAgICB9OwogICAgY29uc3QgcmVtb3ZlU3ViID0gKHNpZCkgPT4gc2V0U3VidGFza3MocHJldiA9PiBwcmV2LmZpbHRlcihzID0+IHMuaWQgIT09IHNpZCkpOwogICAgY29uc3QgW3VzZXJTdWdnZXN0aW9ucywgc2V0VXNlclN1Z2dlc3Rpb25zXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IHNlYXJjaFVzZXJzID0gYXN5bmMgKHEpID0+IHsKICAgICAgICBpZiAoIXEgfHwgcS5sZW5ndGggPCAyKSB7IHNldFVzZXJTdWdnZXN0aW9ucyhbXSk7IHJldHVybjsgfQogICAgICAgIGNvbnN0IGNsZWFuID0gcS5yZXBsYWNlKCdAJywgJycpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnaWQsIHVzZXJuYW1lLCBmdWxsX25hbWUsIGluaXRpYWxzLCBhdmF0YXJfdXJsJykuaWxpa2UoJ3VzZXJuYW1lJywgY2xlYW4gKyAnJScpLmxpbWl0KDUpOwogICAgICAgIHNldFVzZXJTdWdnZXN0aW9ucyhkYXRhIHx8IFtdKTsKICAgIH07CiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgICAgaWYgKCF0YXNrKSByZXR1cm47CiAgICAgICAgY29uc3QgcGlkID0gcHJvaklkID8gTnVtYmVyKHByb2pJZCkgOiBudWxsOwogICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgIHNldFdlZWtseVBsYW4ocHJldiA9PiBwcmV2Lm1hcCh3ID0+IHcuaWQgPT09IGl0ZW0uaWQgPyB7IC4uLncsIHRhc2ssIHByb2plY3RJZDogcGlkLCBzdWJ0YXNrcywgZGVhZGxpbmUsIGRlbGVnYXRlZFRvIH0gOiB3KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0V2Vla2x5UGxhbihwcmV2ID0+IFsuLi5wcmV2LCB7IGlkOiBuZXdJZCgpLCB0YXNrLCBwcm9qZWN0SWQ6IHBpZCwgc3VidGFza3MsIGRlYWRsaW5lLCBkZWxlZ2F0ZWRUbyB9XSk7CiAgICAgICAgfQogICAgICAgIGlmIChkZWxlZ2F0ZWRUbyAmJiBvbkRlbGVnYXRlKSB7CiAgICAgICAgICAgIG9uRGVsZWdhdGUoeyB0YXNrX3RleHQ6IHRhc2ssIHRhc2tfdHlwZTogJ3dlZWtseScsIHJlY2lwaWVudF91c2VybmFtZTogZGVsZWdhdGVkVG8ucmVwbGFjZSgnQCcsICcnKS50b0xvd2VyQ2FzZSgpLCBkZWFkbGluZSB9KTsKICAgICAgICB9CiAgICAgICAgb25DbG9zZSgpOwogICAgfTsKICAgIHJldHVybiAoCiAgICAgICAgPE1vZGFsIHRpdGxlPXtpdGVtID8gJ0VkaXQgV2Vla2x5IFRhc2snIDogJ0FkZCBXZWVrbHkgVGFzayd9IG9uQ2xvc2U9e29uQ2xvc2V9PgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IlRhc2siPgogICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXt0YXNrfSBvbkNoYW5nZT17ZSA9PiBzZXRUYXNrKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9IldoYXQgbmVlZHMgdG8gaGFwcGVuIHRoaXMgd2Vlaz8iIC8+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iTGlua2VkIFByb2plY3QgKG9wdGlvbmFsKSI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtwcm9qSWR9IG9uQ2hhbmdlPXtlID0+IHNldFByb2pJZChlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+Tm8gcHJvamVjdDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIHthY3RpdmVQcm9qZWN0cy5tYXAocCA9PiA8b3B0aW9uIGtleT17cC5pZH0gdmFsdWU9e3AuaWR9PntwLm5hbWV9PC9vcHRpb24+KX0KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L0ZpZWxkPgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IlN1Yi1nb2FscyI+CiAgICAgICAgICAgICAgICB7c3VidGFza3MubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiBtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAge3N1YnRhc2tzLm1hcChzID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzLmlkfSBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiBiZy1ncmF5LTUwIHJvdW5kZWQtbGcgZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEuNSBoLTEuNSByb3VuZGVkLWZ1bGwgYmctYmx1ZS00MDAgZmxleC1zaHJpbmstMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS03MDAgZmxleC0xIj57cy50ZXh0fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHJlbW92ZVN1YihzLmlkKX0gY2xhc3NOYW1lPSJvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXJlZC01MDAgdHJhbnNpdGlvbiBwLTAuNSI+e0kueCgiIzlDQTNBRiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25ld1N1Yn0gb25DaGFuZ2U9e2UgPT4gc2V0TmV3U3ViKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9IkFkZCBhIHN1Yi1nb2FsLi4uIiBvbktleURvd249e2UgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBhZGRTdWIoKTsgfSB9fSAvPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbkNsaWNrPXthZGRTdWJ9IGNsYXNzTmFtZT0icHgtMyBweS0yIGJnLWdyYXktMTAwIGhvdmVyOmJnLWdyYXktMjAwIHRleHQtZ3JheS02MDAgdGV4dC1zbSBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRyYW5zaXRpb24gZmxleC1zaHJpbmstMCI+QWRkPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9GaWVsZD4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJEZWFkbGluZSAob3B0aW9uYWwpIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17ZGVhZGxpbmV9IG9uQ2hhbmdlPXtlID0+IHNldERlYWRsaW5lKGUudGFyZ2V0LnZhbHVlKX0gLz4KICAgICAgICAgICAgPC9GaWVsZD4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJEZWxlZ2F0ZSB0byAob3B0aW9uYWwpIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17ZGVsZWdhdGVkVG99IG9uQ2hhbmdlPXtlID0+IHsgc2V0RGVsZWdhdGVkVG8oZS50YXJnZXQudmFsdWUpOyBzZWFyY2hVc2VycyhlLnRhcmdldC52YWx1ZSk7IH19IHBsYWNlaG9sZGVyPSJlLmcuIEB1c2VybmFtZSIgLz4KICAgICAgICAgICAgICAgIHt1c2VyU3VnZ2VzdGlvbnMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0ibXQtMSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIj57dXNlclN1Z2dlc3Rpb25zLm1hcCh1ID0+ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dS51c2VybmFtZX0gY2xhc3NOYW1lPSJweC0zIHB5LTIgdGV4dC14cyBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ibHVlLTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiBvbkNsaWNrPXsoKSA9PiB7IHNldERlbGVnYXRlZFRvKHUudXNlcm5hbWUpOyBzZXRVc2VyU3VnZ2VzdGlvbnMoW10pOyB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LW1lZGl1bSB0ZXh0LWJsdWUtNjAwIj5Ae3UudXNlcm5hbWV9PC9zcGFuPjxzcGFuIGNsYXNzTmFtZT0idGV4dC1ncmF5LTQwMCI+e3UuZnVsbF9uYW1lfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkpfTwvZGl2Pn0KICAgICAgICAgICAgPC9GaWVsZD4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIgbXQtNiI+CiAgICAgICAgICAgICAgICB7aXRlbSAmJiA8YnV0dG9uIGNsYXNzTmFtZT17YnRuRGFuZ2VyfSBvbkNsaWNrPXsoKSA9PiB7IHNldFdlZWtseVBsYW4ocHJldiA9PiBwcmV2LmZpbHRlcih3ID0+IHcuaWQgIT09IGl0ZW0uaWQpKTsgb25DbG9zZSgpOyB9fT5EZWxldGU8L2J1dHRvbj59CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YnRuUHJpbWFyeX0gb25DbGljaz17c3VibWl0fT57aXRlbSA/ICdTYXZlIENoYW5nZXMnIDogJ0FkZCBXZWVrbHkgVGFzayd9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgVGFza0Zvcm0gPSAoeyBpdGVtLCBvbkNsb3NlLCBzZXRRdWlja1Rhc2tzLCBhY3RpdmVQcm9qZWN0cywgb25EZWxlZ2F0ZSB9KSA9PiB7CiAgICBjb25zdCBbdGFzaywgc2V0VGFza10gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS50YXNrIDogJycpOwogICAgY29uc3QgW3ByaW9yaXR5LCBzZXRQcmlvcml0eV0gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS5wcmlvcml0eSA6ICdtZWRpdW0nKTsKICAgIGNvbnN0IFtkdWUsIHNldER1ZV0gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS5kdWUgOiAnVG9kYXknKTsKICAgIGNvbnN0IFtwcm9qSWQsIHNldFByb2pJZF0gPSB1c2VTdGF0ZShpdGVtID8gKGl0ZW0ucHJvamVjdElkIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFtkZWxlZ2F0ZWRUbywgc2V0RGVsZWdhdGVkVG9dID0gdXNlU3RhdGUoaXRlbSA/IChpdGVtLmRlbGVnYXRlZFRvIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFt1c2VyU3VnZ2VzdGlvbnMsIHNldFVzZXJTdWdnZXN0aW9uc10gPSB1c2VTdGF0ZShbXSk7CiAgICBjb25zdCBzZWFyY2hVc2VycyA9IGFzeW5jIChxKSA9PiB7CiAgICAgICAgaWYgKCFxIHx8IHEubGVuZ3RoIDwgMikgeyBzZXRVc2VyU3VnZ2VzdGlvbnMoW10pOyByZXR1cm47IH0KICAgICAgICBjb25zdCBjbGVhbiA9IHEucmVwbGFjZSgnQCcsICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZnVsbF9uYW1lLCBpbml0aWFscywgYXZhdGFyX3VybCcpLmlsaWtlKCd1c2VybmFtZScsIGNsZWFuICsgJyUnKS5saW1pdCg1KTsKICAgICAgICBzZXRVc2VyU3VnZ2VzdGlvbnMoZGF0YSB8fCBbXSk7CiAgICB9OwogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICAgIGlmICghdGFzaykgcmV0dXJuOwogICAgICAgIGNvbnN0IHBpZCA9IHByb2pJZCA/IE51bWJlcihwcm9qSWQpIDogbnVsbDsKICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSBpdGVtLmlkID8geyAuLi50LCB0YXNrLCBwcmlvcml0eSwgZHVlLCBwcm9qZWN0SWQ6IHBpZCwgZGVsZWdhdGVkVG8gfSA6IHQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IG5ld0lkKCksIHRhc2ssIHByaW9yaXR5LCBkdWUsIHByb2plY3RJZDogcGlkLCBkZWxlZ2F0ZWRUbyB9XSk7CiAgICAgICAgfQogICAgICAgIGlmIChkZWxlZ2F0ZWRUbyAmJiBvbkRlbGVnYXRlKSB7CiAgICAgICAgICAgIG9uRGVsZWdhdGUoeyB0YXNrX3RleHQ6IHRhc2ssIHRhc2tfdHlwZTogJ3F1aWNrJywgcmVjaXBpZW50X3VzZXJuYW1lOiBkZWxlZ2F0ZWRUby5yZXBsYWNlKCdAJywgJycpLnRvTG93ZXJDYXNlKCksIHByaW9yaXR5IH0pOwogICAgICAgIH0KICAgICAgICBvbkNsb3NlKCk7CiAgICB9OwogICAgcmV0dXJuICgKICAgICAgICA8TW9kYWwgdGl0bGU9e2l0ZW0gPyAnRWRpdCBUYXNrJyA6ICdBZGQgVGFzayd9IG9uQ2xvc2U9e29uQ2xvc2V9PgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IlRhc2siPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17dGFza30gb25DaGFuZ2U9e2UgPT4gc2V0VGFzayhlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJXaGF0IG5lZWRzIHRvIGJlIGRvbmU/IiAvPjwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iTGlua2VkIFByb2plY3QgKG9wdGlvbmFsKSI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtwcm9qSWR9IG9uQ2hhbmdlPXtlID0+IHNldFByb2pJZChlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+Tm8gcHJvamVjdDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIHthY3RpdmVQcm9qZWN0cy5tYXAocCA9PiA8b3B0aW9uIGtleT17cC5pZH0gdmFsdWU9e3AuaWR9PntwLm5hbWV9PC9vcHRpb24+KX0KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L0ZpZWxkPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9IlByaW9yaXR5Ij4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtwcmlvcml0eX0gb25DaGFuZ2U9e2UgPT4gc2V0UHJpb3JpdHkoZS50YXJnZXQudmFsdWUpfT4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iaGlnaCI+SGlnaDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Im1lZGl1bSI+TWVkaXVtPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0ibG93Ij5Mb3c8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9IkR1ZSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtkdWV9IG9uQ2hhbmdlPXtlID0+IHNldER1ZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJlLmcuIFRvZGF5LCBGZWIgMTIiIC8+PC9GaWVsZD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRGVsZWdhdGUgdG8gKG9wdGlvbmFsKSI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e2RlbGVnYXRlZFRvfSBvbkNoYW5nZT17ZSA9PiB7IHNldERlbGVnYXRlZFRvKGUudGFyZ2V0LnZhbHVlKTsgc2VhcmNoVXNlcnMoZS50YXJnZXQudmFsdWUpOyB9fSBwbGFjZWhvbGRlcj0iZS5nLiBAdXNlcm5hbWUiIC8+CiAgICAgICAgICAgICAgICB7dXNlclN1Z2dlc3Rpb25zLmxlbmd0aCA+IDAgJiYgPGRpdiBjbGFzc05hbWU9Im10LTEgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbiI+e3VzZXJTdWdnZXN0aW9ucy5tYXAodSA9PiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3UudXNlcm5hbWV9IGNsYXNzTmFtZT0icHgtMyBweS0yIHRleHQteHMgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctYmx1ZS01MCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIgb25DbGljaz17KCkgPT4geyBzZXREZWxlZ2F0ZWRUbyh1LnVzZXJuYW1lKTsgc2V0VXNlclN1Z2dlc3Rpb25zKFtdKTsgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZm9udC1tZWRpdW0gdGV4dC1ibHVlLTYwMCI+QHt1LnVzZXJuYW1lfTwvc3Bhbj48c3BhbiBjbGFzc05hbWU9InRleHQtZ3JheS00MDAiPnt1LmZ1bGxfbmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX08L2Rpdj59CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIG10LTYiPgogICAgICAgICAgICAgICAge2l0ZW0gJiYgPGJ1dHRvbiBjbGFzc05hbWU9e2J0bkRhbmdlcn0gb25DbGljaz17KCkgPT4geyBzZXRRdWlja1Rhc2tzKHByZXYgPT4gcHJldi5maWx0ZXIodCA9PiB0LmlkICE9PSBpdGVtLmlkKSk7IG9uQ2xvc2UoKTsgfX0+RGVsZXRlPC9idXR0b24+fQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2J0blByaW1hcnl9IG9uQ2xpY2s9e3N1Ym1pdH0+e2l0ZW0gPyAnU2F2ZSBDaGFuZ2VzJyA6ICdBZGQgVGFzayd9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgVGltZUJsb2NrRm9ybSA9ICh7IGl0ZW0sIG9uQ2xvc2UsIHNldFRpbWVCbG9ja3MgfSkgPT4gewogICAgY29uc3QgW3Rhc2ssIHNldFRhc2tdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0udGFzayA6ICcnKTsKICAgIGNvbnN0IFt0aW1lLCBzZXRUaW1lXSA9IHVzZVN0YXRlKGl0ZW0gPyBpdGVtLnRpbWUgOiAnJyk7CiAgICBjb25zdCBbZW5kLCBzZXRFbmRdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0uZW5kIDogJycpOwogICAgY29uc3QgW2NhdCwgc2V0Q2F0XSA9IHVzZVN0YXRlKGl0ZW0gPyBpdGVtLmNhdCA6ICdibHVlJyk7CiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgICAgaWYgKCF0YXNrIHx8ICF0aW1lKSByZXR1cm47CiAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgICAgc2V0VGltZUJsb2NrcyhwcmV2ID0+IHByZXYubWFwKGIgPT4gYi5pZCA9PT0gaXRlbS5pZCA/IHsgLi4uYiwgdGFzaywgdGltZSwgZW5kLCBjYXQgfSA6IGIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRUaW1lQmxvY2tzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IG5ld0lkKCksIHRhc2ssIHRpbWUsIGVuZCwgY2F0IH1dKTsKICAgICAgICB9CiAgICAgICAgb25DbG9zZSgpOwogICAgfTsKICAgIHJldHVybiAoCiAgICAgICAgPE1vZGFsIHRpdGxlPXtpdGVtID8gJ0VkaXQgVGltZSBCbG9jaycgOiAnQWRkIFRpbWUgQmxvY2snfSBvbkNsb3NlPXtvbkNsb3NlfT4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJBY3Rpdml0eSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXt0YXNrfSBvbkNoYW5nZT17ZSA9PiBzZXRUYXNrKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9ImUuZy4gRGVlcCBXb3JrLCBDbGllbnQgQ2FsbCIgLz48L0ZpZWxkPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9IlN0YXJ0IFRpbWUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17dGltZX0gb25DaGFuZ2U9e2UgPT4gc2V0VGltZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJlLmcuIDk6MDAgQU0iIC8+PC9GaWVsZD4KICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRW5kIFRpbWUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17ZW5kfSBvbkNoYW5nZT17ZSA9PiBzZXRFbmQoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiAxMDozMCBBTSIgLz48L0ZpZWxkPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJDYXRlZ29yeSI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtjYXR9IG9uQ2hhbmdlPXtlID0+IHNldENhdChlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJsdWUiPldvcms8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJwdXJwbGUiPk1lZXRpbmc8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJhbWJlciI+Um91dGluZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9ImdyZWVuIj5QZXJzb25hbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIG10LTYiPgogICAgICAgICAgICAgICAge2l0ZW0gJiYgPGJ1dHRvbiBjbGFzc05hbWU9e2J0bkRhbmdlcn0gb25DbGljaz17KCkgPT4geyBzZXRUaW1lQmxvY2tzKHByZXYgPT4gcHJldi5maWx0ZXIoYiA9PiBiLmlkICE9PSBpdGVtLmlkKSk7IG9uQ2xvc2UoKTsgfX0+RGVsZXRlPC9idXR0b24+fQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2J0blByaW1hcnl9IG9uQ2xpY2s9e3N1Ym1pdH0+e2l0ZW0gPyAnU2F2ZSBDaGFuZ2VzJyA6ICdBZGQgVGltZSBCbG9jayd9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgSWRlYUZvcm0gPSAoeyBpdGVtLCBvbkNsb3NlLCBzZXRJZGVhcyB9KSA9PiB7CiAgICBjb25zdCBbdGV4dCwgc2V0VGV4dF0gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS50ZXh0IDogJycpOwogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICAgIGlmICghdGV4dCkgcmV0dXJuOwogICAgICAgIGlmIChpdGVtKSB7IHNldElkZWFzKHByZXYgPT4gcHJldi5tYXAoaSA9PiBpLmlkID09PSBpdGVtLmlkID8geyAuLi5pLCB0ZXh0IH0gOiBpKSk7IH0KICAgICAgICBlbHNlIHsgc2V0SWRlYXMocHJldiA9PiBbLi4ucHJldiwgeyBpZDogbmV3SWQoKSwgdGV4dCwgdDogJ0p1c3Qgbm93JyB9XSk7IH0KICAgICAgICBvbkNsb3NlKCk7CiAgICB9OwogICAgcmV0dXJuICgKICAgICAgICA8TW9kYWwgdGl0bGU9e2l0ZW0gPyAnRWRpdCBJZGVhJyA6ICdDYXB0dXJlIGFuIElkZWEnfSBvbkNsb3NlPXtvbkNsb3NlfT4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJXaGF0J3Mgb24geW91ciBtaW5kPyI+PHRleHRhcmVhIGNsYXNzTmFtZT17aW5wdXRDbHMgKyAnIGgtMjQgcmVzaXplLW5vbmUnfSB2YWx1ZT17dGV4dH0gb25DaGFuZ2U9e2UgPT4gc2V0VGV4dChlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJBbiBpZGVhIHlvdSBkb24ndCB3YW50IHRvIGZvcmdldC4uLiIgLz48L0ZpZWxkPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtdC00Ij4KICAgICAgICAgICAgICAgIHtpdGVtICYmIDxidXR0b24gY2xhc3NOYW1lPXtidG5EYW5nZXJ9IG9uQ2xpY2s9eygpID0+IHsgc2V0SWRlYXMocHJldiA9PiBwcmV2LmZpbHRlcihpID0+IGkuaWQgIT09IGl0ZW0uaWQpKTsgb25DbG9zZSgpOyB9fT5EZWxldGU8L2J1dHRvbj59CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YnRuUHJpbWFyeX0gb25DbGljaz17c3VibWl0fT57aXRlbSA/ICdTYXZlJyA6ICdTYXZlIElkZWEnfTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L01vZGFsPgogICAgKTsKfTsKCmNvbnN0IExlYXJuaW5nRm9ybSA9ICh7IGl0ZW0sIGlkeCwgb25DbG9zZSwgc2V0TGVhcm5pbmcgfSkgPT4gewogICAgY29uc3QgW3RleHQsIHNldFRleHRdID0gdXNlU3RhdGUoaXRlbSB8fCAnJyk7CiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgICAgaWYgKCF0ZXh0KSByZXR1cm47CiAgICAgICAgaWYgKGl0ZW0pIHsgc2V0TGVhcm5pbmcocHJldiA9PiBwcmV2Lm1hcCgobCwgaSkgPT4gaSA9PT0gaWR4ID8gdGV4dCA6IGwpKTsgfQogICAgICAgIGVsc2UgeyBzZXRMZWFybmluZyhwcmV2ID0+IFsuLi5wcmV2LCB0ZXh0XSk7IH0KICAgICAgICBvbkNsb3NlKCk7CiAgICB9OwogICAgcmV0dXJuICgKICAgICAgICA8TW9kYWwgdGl0bGU9e2l0ZW0gPyAnRWRpdCBMZWFybmluZyBHb2FsJyA6ICdBZGQgTGVhcm5pbmcgR29hbCd9IG9uQ2xvc2U9e29uQ2xvc2V9PgogICAgICAgICAgICA8RmllbGQgbGFiZWw9IldoYXQgZG8geW91IHdhbnQgdG8gbGVhcm4/Ij48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e3RleHR9IG9uQ2hhbmdlPXtlID0+IHNldFRleHQoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBGaW5hbmNpYWwgbW9kZWxsaW5nLCBNYW5kYXJpbiIgLz48L0ZpZWxkPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtdC00Ij4KICAgICAgICAgICAgICAgIHtpdGVtICYmIDxidXR0b24gY2xhc3NOYW1lPXtidG5EYW5nZXJ9IG9uQ2xpY2s9eygpID0+IHsgc2V0TGVhcm5pbmcocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaWR4KSk7IG9uQ2xvc2UoKTsgfX0+RGVsZXRlPC9idXR0b24+fQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2J0blByaW1hcnl9IG9uQ2xpY2s9e3N1Ym1pdH0+e2l0ZW0gPyAnU2F2ZScgOiAnQWRkIEdvYWwnfTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L01vZGFsPgogICAgKTsKfTsKCmNvbnN0IEF1dGhGbG93ID0gKHsgb25BdXRoIH0pID0+IHsKICAgIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IHVzZVN0YXRlKCdsb2dpbicpOwogICAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbcGFzc3dvcmQsIHNldFBhc3N3b3JkXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbdXNlcm5hbWVTdGF0dXMsIHNldFVzZXJuYW1lU3RhdHVzXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IGF1dG9Jbml0aWFscyA9IG5hbWUudHJpbSgpID8gbmFtZS50cmltKCkuc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsIDIpIDogJyc7CgogICAgY29uc3QgY2hlY2tVc2VybmFtZSA9IGFzeW5jICh1KSA9PiB7CiAgICAgICAgaWYgKCF1IHx8IHUubGVuZ3RoIDwgMikgeyBzZXRVc2VybmFtZVN0YXR1cygnJyk7IHJldHVybjsgfQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkJykuZXEoJ3VzZXJuYW1lJywgdS50b0xvd2VyQ2FzZSgpKS5tYXliZVNpbmdsZSgpOwogICAgICAgIHNldFVzZXJuYW1lU3RhdHVzKGRhdGEgPyAndGFrZW4nIDogJ2F2YWlsYWJsZScpOwogICAgfTsKCiAgICBjb25zdCBoYW5kbGVTaWduVXAgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQgfHwgIW5hbWUudHJpbSgpIHx8ICF1c2VybmFtZS50cmltKCkpIHsgc2V0RXJyb3IoJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyk7IHJldHVybjsgfQogICAgICAgIGlmIChwYXNzd29yZC5sZW5ndGggPCA2KSB7IHNldEVycm9yKCdQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycycpOyByZXR1cm47IH0KICAgICAgICBpZiAodXNlcm5hbWVTdGF0dXMgPT09ICd0YWtlbicpIHsgc2V0RXJyb3IoJ1VzZXJuYW1lIGlzIGFscmVhZHkgdGFrZW4nKTsgcmV0dXJuOyB9CiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTsgc2V0RXJyb3IoJycpOwogICAgICAgIGNvbnN0IHsgZGF0YTogYXV0aERhdGEsIGVycm9yOiBhdXRoRXJyIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25VcCh7IGVtYWlsLCBwYXNzd29yZCB9KTsKICAgICAgICBpZiAoYXV0aEVycikgeyBzZXRFcnJvcihhdXRoRXJyLm1lc3NhZ2UpOyBzZXRMb2FkaW5nKGZhbHNlKTsgcmV0dXJuOyB9CiAgICAgICAgaWYgKGF1dGhEYXRhLnVzZXIpIHsKICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHsgbmFtZTogbmFtZS50cmltKCksIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgJycpLCBpbml0aWFsczogYXV0b0luaXRpYWxzLCBhdmF0YXJfdXJsOiBhdmF0YXJVcmwgfHwgJycgfTsKICAgICAgICAgICAgY29uc3QgeyBlcnJvcjogcHJvZkVyciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5pbnNlcnQoewogICAgICAgICAgICAgICAgaWQ6IGF1dGhEYXRhLnVzZXIuaWQsIHVzZXJuYW1lOiBwcm9maWxlLnVzZXJuYW1lLCBmdWxsX25hbWU6IHByb2ZpbGUubmFtZSwgaW5pdGlhbHM6IHByb2ZpbGUuaW5pdGlhbHMsIGVtYWlsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocHJvZkVycikgeyBzZXRFcnJvcignUHJvZmlsZSBlcnJvcjogJyArIHByb2ZFcnIubWVzc2FnZSk7IHNldExvYWRpbmcoZmFsc2UpOyByZXR1cm47IH0KICAgICAgICAgICAgb25BdXRoKGF1dGhEYXRhLnVzZXIsIHByb2ZpbGUpOwogICAgICAgIH0KICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgIH07CgogICAgY29uc3QgaGFuZGxlTG9naW4gPSBhc3luYyAoKSA9PiB7CiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHsgc2V0RXJyb3IoJ0VtYWlsIGFuZCBwYXNzd29yZCByZXF1aXJlZCcpOyByZXR1cm47IH0KICAgICAgICBzZXRMb2FkaW5nKHRydWUpOyBzZXRFcnJvcignJyk7CiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogYXV0aEVyciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoeyBlbWFpbCwgcGFzc3dvcmQgfSk7CiAgICAgICAgaWYgKGF1dGhFcnIpIHsgc2V0RXJyb3IoYXV0aEVyci5tZXNzYWdlKTsgc2V0TG9hZGluZyhmYWxzZSk7IHJldHVybjsgfQogICAgICAgIGlmIChkYXRhLnVzZXIpIHsKICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9mIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGRhdGEudXNlci5pZCkuc2luZ2xlKCk7CiAgICAgICAgICAgIGlmIChwcm9mKSB7CiAgICAgICAgICAgICAgICBvbkF1dGgoZGF0YS51c2VyLCB7IG5hbWU6IHByb2YuZnVsbF9uYW1lLCB1c2VybmFtZTogcHJvZi51c2VybmFtZSwgaW5pdGlhbHM6IHByb2YuaW5pdGlhbHMsIGF2YXRhcl91cmw6IHByb2YuYXZhdGFyX3VybCB8fCAnJyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgIH07CgogICAgcmV0dXJuICgKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZml4ZWQgaW5zZXQtMCBiZy1ncmFkaWVudC10by1iciBmcm9tLWJsdWUtNTAgdmlhLXdoaXRlIHRvLWdyYXktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC0yeGwgdy1mdWxsIG1heC13LW1kIGNhcmQtc2hhZG93IHAtOCB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItNiI+PEVtYmxlbSBzaXplPXs0OH0gLz48aDEgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCBtdC0zIj5XZWxjb21lIHRvIE51T3BlcmFuZGk8L2gxPjxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNTAwIG10LTIiPllvdXIgcGVyc29uYWwgb3BlcmF0aW5nIHN5c3RlbS48L3A+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCByb3VuZGVkLWxnIGJnLWdyYXktMTAwIHAtMSBtYi02Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0TW9kZSgnbG9naW4nKTsgc2V0RXJyb3IoJycpOyB9fSBjbGFzc05hbWU9eydmbGV4LTEgcHktMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIHJvdW5kZWQtbWQgdHJhbnNpdGlvbiAnICsgKG1vZGUgPT09ICdsb2dpbicgPyAnYmctd2hpdGUgdGV4dC1ncmF5LTkwMCBzaGFkb3ctc20nIDogJ3RleHQtZ3JheS01MDAnKX0+TG9nIEluPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldE1vZGUoJ3NpZ251cCcpOyBzZXRFcnJvcignJyk7IH19IGNsYXNzTmFtZT17J2ZsZXgtMSBweS0yIHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCB0cmFuc2l0aW9uICcgKyAobW9kZSA9PT0gJ3NpZ251cCcgPyAnYmctd2hpdGUgdGV4dC1ncmF5LTkwMCBzaGFkb3ctc20nIDogJ3RleHQtZ3JheS01MDAnKX0+U2lnbiBVcDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1sZWZ0IHNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICAgICAge21vZGUgPT09ICdzaWdudXAnICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRnVsbCBOYW1lIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBUdXR1IEFkZXR1bm1iaSIgLz48L0ZpZWxkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJVc2VybmFtZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXt1c2VybmFtZX0gb25DaGFuZ2U9e2UgPT4geyBjb25zdCB2ID0gZS50YXJnZXQudmFsdWUucmVwbGFjZSgvXHMrL2csICcnKS50b0xvd2VyQ2FzZSgpOyBzZXRVc2VybmFtZSh2KTsgY2hlY2tVc2VybmFtZSh2KTsgfX0gcGxhY2Vob2xkZXI9ImUuZy4gdHV0dSIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlcm5hbWVTdGF0dXMgPT09ICdhdmFpbGFibGUnICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyZWVuLTUwMCBtdC0xIj5Ae3VzZXJuYW1lfSBpcyBhdmFpbGFibGU8L3A+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VybmFtZVN0YXR1cyA9PT0gJ3Rha2VuJyAmJiA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1yZWQtNTAwIG10LTEiPkB7dXNlcm5hbWV9IGlzIHRha2VuPC9wPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvPgogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJFbWFpbCI+PGlucHV0IHR5cGU9ImVtYWlsIiBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17ZW1haWx9IG9uQ2hhbmdlPXtlID0+IHNldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9InlvdUBleGFtcGxlLmNvbSIgLz48L0ZpZWxkPgogICAgICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iUGFzc3dvcmQiPjxpbnB1dCB0eXBlPSJwYXNzd29yZCIgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e3Bhc3N3b3JkfSBvbkNoYW5nZT17ZSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPXttb2RlID09PSAnc2lnbnVwJyA/ICdNaW4gNiBjaGFyYWN0ZXJzJyA6ICdZb3VyIHBhc3N3b3JkJ30gLz48L0ZpZWxkPgogICAgICAgICAgICAgICAgICAgIHttb2RlID09PSAnc2lnbnVwJyAmJiBhdXRvSW5pdGlhbHMgJiYgdXNlcm5hbWUgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy1ibHVlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbSI+e2F1dG9Jbml0aWFsc308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAiPntuYW1lLnRyaW0oKX08L3A+PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPkB7dXNlcm5hbWV9PC9wPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICB7ZXJyb3IgJiYgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtcmVkLTUwMCBtdC0zIGJnLXJlZC01MCByb3VuZGVkLWxnIHB4LTMgcHktMiI+e2Vycm9yfTwvcD59CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YnRuUHJpbWFyeSArICcgbXQtNiB3LWZ1bGwnfSBvbkNsaWNrPXttb2RlID09PSAnc2lnbnVwJyA/IGhhbmRsZVNpZ25VcCA6IGhhbmRsZUxvZ2lufSBkaXNhYmxlZD17bG9hZGluZ30+CiAgICAgICAgICAgICAgICAgICAge2xvYWRpbmcgPyAnUGxlYXNlIHdhaXQuLi4nIDogKG1vZGUgPT09ICdzaWdudXAnID8gJ0NyZWF0ZSBBY2NvdW50JyA6ICdMb2cgSW4nKX0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtNCI+e21vZGUgPT09ICdsb2dpbicgPyAiRG9uJ3QgaGF2ZSBhbiBhY2NvdW50PyIgOiAnQWxyZWFkeSBoYXZlIGFuIGFjY291bnQ/J30gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldE1vZGUobW9kZSA9PT0gJ2xvZ2luJyA/ICdzaWdudXAnIDogJ2xvZ2luJyk7IHNldEVycm9yKCcnKTsgfX0gY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtNTAwIGhvdmVyOnVuZGVybGluZSI+e21vZGUgPT09ICdsb2dpbicgPyAnU2lnbiB1cCcgOiAnTG9nIGluJ308L2J1dHRvbj48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgKTsKfTsKCmNvbnN0IFByb2ZpbGVFZGl0TW9kYWwgPSAoeyB1c2VyUHJvZmlsZSwgc2V0VXNlclByb2ZpbGUsIHN1cGFVc2VyLCBvbkNsb3NlIH0pID0+IHsKICAgIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKHVzZXJQcm9maWxlID8gdXNlclByb2ZpbGUubmFtZSA6ICcnKTsKICAgIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUodXNlclByb2ZpbGUgPyB1c2VyUHJvZmlsZS51c2VybmFtZSA6ICcnKTsKICAgIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbYXZhdGFyVXJsLCBzZXRBdmF0YXJVcmxdID0gdXNlU3RhdGUodXNlclByb2ZpbGUgPyB1c2VyUHJvZmlsZS5hdmF0YXJfdXJsIDogJycpOwogICAgY29uc3QgW3VwbG9hZGluZywgc2V0VXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IGhhbmRsZUF2YXRhclVwbG9hZCA9IGFzeW5jIChlKSA9PiB7CiAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgIGlmICghZmlsZSB8fCAhc3VwYVVzZXIpIHJldHVybjsKICAgICAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgZmlsZUV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpOwogICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHN1cGFVc2VyLmlkICsgJy9hdmF0YXIuJyArIGZpbGVFeHQ7CiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlLmZyb20oJ2F2YXRhcnMnKS51cGxvYWQoZmlsZVBhdGgsIGZpbGUsIHsgdXBzZXJ0OiB0cnVlIH0pOwogICAgICAgICAgICBpZiAodXBsb2FkRXJyb3IpIHRocm93IHVwbG9hZEVycm9yOwogICAgICAgICAgICBjb25zdCB7IGRhdGE6IHsgcHVibGljVXJsIH0gfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbSgnYXZhdGFycycpLmdldFB1YmxpY1VybChmaWxlUGF0aCk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IHB1YmxpY1VybCArICc/dD0nICsgRGF0ZS5ub3coKTsKICAgICAgICAgICAgc2V0QXZhdGFyVXJsKHVybCk7CiAgICAgICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2ZpbGVzJykudXBkYXRlKHsgYXZhdGFyX3VybDogdXJsIH0pLmVxKCdpZCcsIHN1cGFVc2VyLmlkKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5lcnJvcignQXZhdGFyIHVwbG9hZCBlcnJvcjonLCBlcnIpOyB9CiAgICAgICAgc2V0VXBsb2FkaW5nKGZhbHNlKTsKICAgIH07CiAgICBjb25zdCBhdXRvSW5pdGlhbHMgPSBuYW1lLnRyaW0oKSA/IG5hbWUudHJpbSgpLnNwbGl0KCcgJykubWFwKHcgPT4gd1swXSkuam9pbignJykudG9VcHBlckNhc2UoKS5zbGljZSgwLCAyKSA6ICcnOwogICAgY29uc3QgaGFuZGxlU2lnbk91dCA9IGFzeW5jICgpID0+IHsgYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduT3V0KCk7IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgfTsKICAgIGNvbnN0IHN1Ym1pdCA9IGFzeW5jICgpID0+IHsKICAgICAgICBpZiAoIW5hbWUudHJpbSgpIHx8ICF1c2VybmFtZS50cmltKCkpIHJldHVybjsKICAgICAgICBzZXRTYXZpbmcodHJ1ZSk7CiAgICAgICAgY29uc3QgcHJvZmlsZSA9IHsgbmFtZTogbmFtZS50cmltKCksIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgJycpLCBpbml0aWFsczogYXV0b0luaXRpYWxzLCBhdmF0YXJfdXJsOiBhdmF0YXJVcmwgfHwgJycgfTsKICAgICAgICBzZXRVc2VyUHJvZmlsZShwcm9maWxlKTsKICAgICAgICBpZiAoc3VwYVVzZXIpIHsKICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS51cGRhdGUoeyBmdWxsX25hbWU6IHByb2ZpbGUubmFtZSwgdXNlcm5hbWU6IHByb2ZpbGUudXNlcm5hbWUsIGluaXRpYWxzOiBwcm9maWxlLmluaXRpYWxzLCBhdmF0YXJfdXJsOiBwcm9maWxlLmF2YXRhcl91cmwgfHwgJycgfSkuZXEoJ2lkJywgc3VwYVVzZXIuaWQpOwogICAgICAgIH0KICAgICAgICBzZXRTYXZpbmcoZmFsc2UpOwogICAgICAgIG9uQ2xvc2UoKTsKICAgIH07CiAgICByZXR1cm4gKAogICAgICAgIDxNb2RhbCB0aXRsZT0iUHJvZmlsZSBTZXR0aW5ncyIgb25DbG9zZT17b25DbG9zZX0+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRnVsbCBOYW1lIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iWW91ciBuYW1lIiAvPjwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iVXNlcm5hbWUiPgogICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXt1c2VybmFtZX0gb25DaGFuZ2U9e2UgPT4gc2V0VXNlcm5hbWUoZS50YXJnZXQudmFsdWUucmVwbGFjZSgvXHMrL2csICcnKSl9IHBsYWNlaG9sZGVyPSJlLmcuIHR1dHUiIC8+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0xIj5PdGhlcnMgY2FuIGRlbGVnYXRlIHRhc2tzIHRvIHlvdSB1c2luZyBAe3VzZXJuYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xzKy9nLCAnJykgfHwgJ3VzZXJuYW1lJ308L3A+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBnYXAtMyBwLTQgYmctZ3JheS01MCByb3VuZGVkLWxnIG1iLTQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InJlbGF0aXZlIGN1cnNvci1wb2ludGVyIGdyb3VwIiBvbkNsaWNrPXsoKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyLXVwbG9hZCcpLmNsaWNrKCl9PgogICAgICAgICAgICAgICAgICAgIHthdmF0YXJVcmwgPyAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXthdmF0YXJVcmx9IGFsdD0iUHJvZmlsZSIgY2xhc3NOYW1lPSJ3LTIwIGgtMjAgcm91bmRlZC1mdWxsIG9iamVjdC1jb3ZlciBib3JkZXItMiBib3JkZXItZ3JheS0yMDAgZ3JvdXAtaG92ZXI6Ym9yZGVyLWJsdWUtNDAwIHRyYW5zaXRpb24iIC8+CiAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMjAgaC0yMCByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LWJvbGQgdGV4dC0yeGwgZ3JvdXAtaG92ZXI6YmctYmx1ZS02MDAgdHJhbnNpdGlvbiI+e2F1dG9Jbml0aWFscyB8fCAnVSd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTcgaC03IGJnLXdoaXRlIHJvdW5kZWQtZnVsbCBzaGFkb3ctbWQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBncm91cC1ob3ZlcjpiZy1ibHVlLTUwIHRyYW5zaXRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgY2xhc3NOYW1lPSJ3LTQgaC00IHRleHQtZ3JheS01MDAiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIHN0cm9rZVdpZHRoPXsyfSBkPSJNMyA5YTIgMiAwIDAxMi0yaC45M2EyIDIgMCAwMDEuNjY0LS44OWwuODEyLTEuMjJBMiAyIDAgMDExMC4wNyA0aDMuODZhMiAyIDAgMDExLjY2NC44OWwuODEyIDEuMjJBMiAyIDAgMDAxOC4wNyA3SDE5YTIgMiAwIDAxMiAydjlhMiAyIDAgMDEtMiAySDVhMiAyIDAgMDEtMi0yVjl6IiAvPjxwYXRoIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIHN0cm9rZVdpZHRoPXsyfSBkPSJNMTUgMTNhMyAzIDAgMTEtNiAwIDMgMyAwIDAxNiAweiIgLz48L3N2Zz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICB7dXBsb2FkaW5nICYmIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNDAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj48ZGl2IGNsYXNzTmFtZT0idy02IGgtNiBib3JkZXItMiBib3JkZXItd2hpdGUgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpbiI+PC9kaXY+PC9kaXY+fQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9ImF2YXRhci11cGxvYWQiIHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2xhc3NOYW1lPSJoaWRkZW4iIG9uQ2hhbmdlPXtoYW5kbGVBdmF0YXJVcGxvYWR9IC8+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIj57bmFtZS50cmltKCkgfHwgJ1lvdXIgTmFtZSd9PC9wPgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5Ae3VzZXJuYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xzKy9nLCAnJykgfHwgJ3VzZXJuYW1lJ308L3A+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgbXQtMSBjdXJzb3ItcG9pbnRlciBob3Zlcjp1bmRlcmxpbmUiIG9uQ2xpY2s9eygpID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXItdXBsb2FkJykuY2xpY2soKX0+e3VwbG9hZGluZyA/ICdVcGxvYWRpbmcuLi4nIDogJ0NoYW5nZSBwaG90byd9PC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YnRuUHJpbWFyeSArICcgdy1mdWxsJ30gb25DbGljaz17c3VibWl0fSBkaXNhYmxlZD17c2F2aW5nfT57c2F2aW5nID8gJ1NhdmluZy4uLicgOiAnU2F2ZSBQcm9maWxlJ308L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTaWduT3V0fSBjbGFzc05hbWU9InctZnVsbCBtdC0zIHB5LTIuNSB0ZXh0LXNtIHRleHQtcmVkLTUwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uIj5TaWduIE91dDwvYnV0dG9uPgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgTm90aWZpY2F0aW9uc1BhbmVsID0gKHsgbm90aWZpY2F0aW9ucywgb25NYXJrUmVhZCwgb25DbG9zZSwgZGVsZWdhdGVkVG9NZSwgb25BY2NlcHRUYXNrLCBxdWlja1Rhc2tzLCB3ZWVrbHlQbGFuLCBzZXRBY3RpdmVNb2R1bGUsIHNldFBsYW5uZXJUYWIgfSkgPT4gewogIGNvbnN0IFtleHBhbmRlZE5vdGlmLCBzZXRFeHBhbmRlZE5vdGlmXSA9IHVzZVN0YXRlKG51bGwpOwogIGNvbnN0IGZpbmRUYXNrSW5QbGFubmVyID0gKG5vdGlmKSA9PiB7CiAgICBjb25zdCBtYXRjaGVkRGVsZWdhdGVkID0gZGVsZWdhdGVkVG9NZSAmJiBkZWxlZ2F0ZWRUb01lLmZpbmQoZCA9PiAKICAgICAgbm90aWYucmVsYXRlZF90YXNrX2lkID8gZC5pZCA9PT0gbm90aWYucmVsYXRlZF90YXNrX2lkIDogKG5vdGlmLm1lc3NhZ2UgJiYgZC50YXNrX3RleHQgJiYgbm90aWYubWVzc2FnZS5pbmNsdWRlcyhkLnRhc2tfdGV4dC5zdWJzdHJpbmcoMCwgMzApKSkKICAgICk7CiAgICBpZiAoIW1hdGNoZWREZWxlZ2F0ZWQpIHJldHVybiBudWxsOwogICAgaWYgKG1hdGNoZWREZWxlZ2F0ZWQuc3RhdHVzID09PSAncGVuZGluZycpIHJldHVybiB7IHN0YXR1czogJ3BlbmRpbmcnLCB0YXNrOiBtYXRjaGVkRGVsZWdhdGVkIH07CiAgICBjb25zdCBpbkRhaWx5ID0gcXVpY2tUYXNrcyAmJiBxdWlja1Rhc2tzLmZpbmQodCA9PiB0LmRlbGVnYXRlZEZyb20gJiYgdC50YXNrID09PSBtYXRjaGVkRGVsZWdhdGVkLnRhc2tfdGV4dCk7CiAgICBpZiAoaW5EYWlseSkgcmV0dXJuIHsgc3RhdHVzOiAnYWNjZXB0ZWQnLCBsb2NhdGlvbjogJ2RhaWx5JywgdGFzazogbWF0Y2hlZERlbGVnYXRlZCB9OwogICAgY29uc3QgaW5XZWVrbHkgPSB3ZWVrbHlQbGFuICYmIHdlZWtseVBsYW4uZmluZCh3ID0+IHcuZGVsZWdhdGVkRnJvbSAmJiB3LnRhc2sgPT09IG1hdGNoZWREZWxlZ2F0ZWQudGFza190ZXh0KTsKICAgIGlmIChpbldlZWtseSkgcmV0dXJuIHsgc3RhdHVzOiAnYWNjZXB0ZWQnLCBsb2NhdGlvbjogJ3dlZWtseScsIHRhc2s6IG1hdGNoZWREZWxlZ2F0ZWQgfTsKICAgIHJldHVybiB7IHN0YXR1czogJ2FjY2VwdGVkJywgbG9jYXRpb246IG51bGwsIHRhc2s6IG1hdGNoZWREZWxlZ2F0ZWQgfTsKICB9OwoKICBjb25zdCBoYW5kbGVOb3RpZkNsaWNrID0gKG4pID0+IHsKICAgIGNvbnN0IGZvdW5kID0gZmluZFRhc2tJblBsYW5uZXIobik7CiAgICBpZiAoZm91bmQgJiYgZm91bmQuc3RhdHVzID09PSAncGVuZGluZycgJiYgb25BY2NlcHRUYXNrKSB7CiAgICAgIG9uQWNjZXB0VGFzayhmb3VuZC50YXNrKTsKICAgICAgb25NYXJrUmVhZChuLmlkKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGZvdW5kICYmIGZvdW5kLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyAmJiBmb3VuZC5sb2NhdGlvbikgewogICAgICBpZiAoc2V0QWN0aXZlTW9kdWxlKSBzZXRBY3RpdmVNb2R1bGUoJ3BsYW5uZXInKTsKICAgICAgaWYgKHNldFBsYW5uZXJUYWIpIHNldFBsYW5uZXJUYWIoZm91bmQubG9jYXRpb24gPT09ICd3ZWVrbHknID8gJ3dlZWtseScgOiAnZGFpbHknKTsKICAgICAgb25NYXJrUmVhZChuLmlkKTsKICAgICAgb25DbG9zZSgpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAobi50aXRsZSA9PT0gJ1Rhc2sgY29tcGxldGVkIScpIHsKICAgICAgc2V0RXhwYW5kZWROb3RpZihleHBhbmRlZE5vdGlmID09PSBuLmlkID8gbnVsbCA6IG4uaWQpOwogICAgICBvbk1hcmtSZWFkKG4uaWQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBvbk1hcmtSZWFkKG4uaWQpOwogIH07CgogIHJldHVybiAoCiAgICA8ZGl2IGNsYXNzTmFtZT0iZml4ZWQgaW5zZXQtMCB6LTUwIiBvbkNsaWNrPXtvbkNsb3NlfT4KICAgICAgPGRpdiBjbGFzc05hbWU9ImZpeGVkIHRvcC0xNiByaWdodC04IGJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyB3LTk2IG1heC1oLTk2IG92ZXJmbG93LXktYXV0byB6LTUwIiBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtNCBweS0zIGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCI+CiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Ob3RpZmljYXRpb25zPC9zcGFuPgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9InRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTYwMCB0cmFuc2l0aW9uIj57SS54KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAge25vdGlmaWNhdGlvbnMubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTQgcHktOCB0ZXh0LWNlbnRlciB0ZXh0LXhzIHRleHQtZ3JheS00MDAiPk5vIG5vdGlmaWNhdGlvbnMgeWV0PC9kaXY+CiAgICAgICAgKSA6IG5vdGlmaWNhdGlvbnMubWFwKG4gPT4gewogICAgICAgICAgY29uc3QgZm91bmQgPSBmaW5kVGFza0luUGxhbm5lcihuKTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIDxkaXYga2V5PXtuLmlkfSBvbkNsaWNrPXsoKSA9PiBoYW5kbGVOb3RpZkNsaWNrKG4pfSBjbGFzc05hbWU9InB4LTQgcHktMyBib3JkZXItYiBib3JkZXItZ3JheS01MCBob3ZlcjpiZy1ncmF5LTUwIHRyYW5zaXRpb24gY3Vyc29yLXBvaW50ZXIiPgogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0zIj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy04IGgtOCByb3VuZGVkLWZ1bGwgYmctcHVycGxlLTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBmb250LWJvbGQgdGV4dC1wdXJwbGUtNjAwIj57bi5zZW5kZXJfbmFtZSA/IG4uc2VuZGVyX25hbWUuc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS5zdWJzdHJpbmcoMCwgMikgOiAnPyd9PC9zcGFuPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCB0cnVuY2F0ZSI+e24udGl0bGV9PC9wPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgdHJ1bmNhdGUiPntuLm1lc3NhZ2V9PC9wPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG10LTEiPgogICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTMwMCI+e25ldyBEYXRlKG4uY3JlYXRlZF9hdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9PC9zcGFuPgogICAgICAgICAgICAgICAgICB7Zm91bmQgJiYgZm91bmQuc3RhdHVzID09PSAncGVuZGluZycgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTYwMCI+VGFwIHRvIGFjY2VwdDwvc3Bhbj59CiAgICAgICAgICAgICAgICAgIHtmb3VuZCAmJiBmb3VuZC5zdGF0dXMgPT09ICdhY2NlcHRlZCcgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTYwMCI+SW4gcGxhbm5lcjwvc3Bhbj59CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICB7IW4uaXNfcmVhZCAmJiA8ZGl2IGNsYXNzTmFtZT0idy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDAgbXQtMSBmbGV4LXNocmluay0wIj48L2Rpdj59CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICB7ZXhwYW5kZWROb3RpZiA9PT0gbi5pZCAmJiBuLnRpdGxlID09PSAnVGFzayBjb21wbGV0ZWQhJyAmJiAoCiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LTIgbWwtMTEgcC0zIGJnLWdyZWVuLTUwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmVlbi0xMDAiIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyZWVuLTgwMCBtYi0xIj57bi5zZW5kZXJfbmFtZX0gY29tcGxldGVkIGEgdGFzazwvcD4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyZWVuLTcwMCBtYi0yIj57bi5tZXNzYWdlLmluY2x1ZGVzKCdjb21wbGV0ZWQ6ICcpID8gbi5tZXNzYWdlLnNwbGl0KCdjb21wbGV0ZWQ6ICcpLnNsaWNlKDEpLmpvaW4oJ2NvbXBsZXRlZDogJykgOiBuLm1lc3NhZ2V9PC9wPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JlZW4tNTAwIj57bmV3IERhdGUobi5jcmVhdGVkX2F0KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBpZiAoc2V0QWN0aXZlTW9kdWxlKSBzZXRBY3RpdmVNb2R1bGUoJ2JvYXJkcm9vbScpOyBvbkNsb3NlKCk7IH19IGNsYXNzTmFtZT0idGV4dC14cyBweC0yIHB5LTEgcm91bmRlZC1tZCBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1ncmVlbi03MDAgdHJhbnNpdGlvbiI+VmlldyBpbiBCb2FyZHJvb208L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICk7CiAgICAgICAgfSl9CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfQoKY29uc3QgVGVhbUZvcm0gPSAoeyBpdGVtLCBvbkNsb3NlLCBzZXRUZWFtTWVtYmVycyB9KSA9PiB7CiAgICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS5uYW1lIDogJycpOwogICAgY29uc3QgW2luaXRpYWxzLCBzZXRJbml0aWFsc10gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS5pbml0aWFscyA6ICcnKTsKICAgIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZShpdGVtID8gaXRlbS5zdGF0dXMgOiAnYXZhaWxhYmxlJyk7CiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgICAgaWYgKCFuYW1lKSByZXR1cm47CiAgICAgICAgY29uc3QgYXV0byA9IGluaXRpYWxzIHx8IG5hbWUuc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsIDIpOwogICAgICAgIGlmIChpdGVtKSB7IHNldFRlYW1NZW1iZXJzKHByZXYgPT4gcHJldi5tYXAobSA9PiBtLmlkID09PSBpdGVtLmlkID8geyAuLi5tLCBuYW1lLCBpbml0aWFsczogYXV0bywgc3RhdHVzIH0gOiBtKSk7IH0KICAgICAgICBlbHNlIHsgc2V0VGVhbU1lbWJlcnMocHJldiA9PiBbLi4ucHJldiwgeyBpZDogbmV3SWQoKSwgbmFtZSwgaW5pdGlhbHM6IGF1dG8sIHN0YXR1cyB9XSk7IH0KICAgICAgICBvbkNsb3NlKCk7CiAgICB9OwogICAgcmV0dXJuICgKICAgICAgICA8TW9kYWwgdGl0bGU9e2l0ZW0gPyAnRWRpdCBUZWFtIE1lbWJlcicgOiAnQWRkIFRlYW0gTWVtYmVyJ30gb25DbG9zZT17b25DbG9zZX0+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRnVsbCBOYW1lIj48aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e25hbWV9IG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBBaXNoYSBPa29ua3dvIiAvPjwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iSW5pdGlhbHMgKGF1dG8tZ2VuZXJhdGVkIGlmIGJsYW5rKSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtpbml0aWFsc30gb25DaGFuZ2U9e2UgPT4gc2V0SW5pdGlhbHMoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iZS5nLiBBTyIgbWF4TGVuZ3RoPXszfSAvPjwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iU3RhdHVzIj4KICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3NOYW1lPXtpbnB1dENsc30gdmFsdWU9e3N0YXR1c30gb25DaGFuZ2U9e2UgPT4gc2V0U3RhdHVzKGUudGFyZ2V0LnZhbHVlKX0+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYXZhaWxhYmxlIj5BdmFpbGFibGU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJtZWV0aW5nIj5JbiBNZWV0aW5nPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0ibGVhdmUiPk9uIExlYXZlPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9GaWVsZD4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIgbXQtNCI+CiAgICAgICAgICAgICAgICB7aXRlbSAmJiA8YnV0dG9uIGNsYXNzTmFtZT17YnRuRGFuZ2VyfSBvbkNsaWNrPXsoKSA9PiB7IHNldFRlYW1NZW1iZXJzKHByZXYgPT4gcHJldi5maWx0ZXIobSA9PiBtLmlkICE9PSBpdGVtLmlkKSk7IG9uQ2xvc2UoKTsgfX0+UmVtb3ZlPC9idXR0b24+fQogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2J0blByaW1hcnl9IG9uQ2xpY2s9e3N1Ym1pdH0+e2l0ZW0gPyAnU2F2ZScgOiAnQWRkIE1lbWJlcid9PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvTW9kYWw+CiAgICApOwp9OwoKY29uc3QgQWRkTWVudSA9ICh7IG9uQ2xvc2UsIGFjdGl2ZU1vZHVsZSwgc2V0TW9kYWwgfSkgPT4gewogICAgY29uc3QgaXRlbXMgPSBhY3RpdmVNb2R1bGUgPT09ICdjb21tYW5kJyA/IFsKICAgICAgICB7IGxhYmVsOiAnRGFpbHkgVGFzaycsIGFjdGlvbjogKCkgPT4geyBvbkNsb3NlKCk7IHNldE1vZGFsKCdhZGRUYXNrJyk7IH0gfSwKICAgICAgICB7IGxhYmVsOiAnVGltZSBCbG9jaycsIGFjdGlvbjogKCkgPT4geyBvbkNsb3NlKCk7IHNldE1vZGFsKCdhZGRUaW1lQmxvY2snKTsgfSB9LAogICAgICAgIHsgbGFiZWw6ICdJbmNvbWUgU3RyZWFtJywgYWN0aW9uOiAoKSA9PiB7IG9uQ2xvc2UoKTsgc2V0TW9kYWwoJ2FkZEluY29tZScpOyB9IH0sCiAgICAgICAgeyBsYWJlbDogJ1Byb2plY3QnLCBhY3Rpb246ICgpID0+IHsgb25DbG9zZSgpOyBzZXRNb2RhbCgnYWRkUHJvamVjdCcpOyB9IH0sCiAgICBdIDogYWN0aXZlTW9kdWxlID09PSAnaW5jb21lJyA/IFsKICAgICAgICB7IGxhYmVsOiAnSW5jb21lIFN0cmVhbScsIGFjdGlvbjogKCkgPT4geyBvbkNsb3NlKCk7IHNldE1vZGFsKCdhZGRJbmNvbWUnKTsgfSB9LAogICAgICAgIHsgbGFiZWw6ICdFeHBlbnNlJywgYWN0aW9uOiAoKSA9PiB7IG9uQ2xvc2UoKTsgc2V0TW9kYWwoJ2FkZEV4cGVuc2UnKTsgfSB9LAogICAgICAgIHsgbGFiZWw6ICdQcm9qZWN0JywgYWN0aW9uOiAoKSA9PiB7IG9uQ2xvc2UoKTsgc2V0TW9kYWwoJ2FkZFByb2plY3QnKTsgfSB9LAogICAgXSA6IGFjdGl2ZU1vZHVsZSA9PT0gJ2JyaWVmaW5nJyA/IFsKICAgICAgICB7IGxhYmVsOiAnVGVhbSBNZW1iZXInLCBhY3Rpb246ICgpID0+IHsgb25DbG9zZSgpOyBzZXRNb2RhbCgnYWRkVGVhbScpOyB9IH0sCiAgICBdIDogWwogICAgICAgIHsgbGFiZWw6ICdXZWVrbHkgVGFzaycsIGFjdGlvbjogKCkgPT4geyBvbkNsb3NlKCk7IHNldE1vZGFsKCdhZGRXZWVrbHknKTsgfSB9LAogICAgICAgIHsgbGFiZWw6ICdEYWlseSBUYXNrJywgYWN0aW9uOiAoKSA9PiB7IG9uQ2xvc2UoKTsgc2V0TW9kYWwoJ2FkZFRhc2snKTsgfSB9LAogICAgICAgIHsgbGFiZWw6ICdUaW1lIEJsb2NrJywgYWN0aW9uOiAoKSA9PiB7IG9uQ2xvc2UoKTsgc2V0TW9kYWwoJ2FkZFRpbWVCbG9jaycpOyB9IH0sCiAgICAgICAgeyBsYWJlbDogJ0lkZWEnLCBhY3Rpb246ICgpID0+IHsgb25DbG9zZSgpOyBzZXRNb2RhbCgnYWRkSWRlYScpOyB9IH0sCiAgICAgICAgeyBsYWJlbDogJ0xlYXJuaW5nIEdvYWwnLCBhY3Rpb246ICgpID0+IHsgb25DbG9zZSgpOyBzZXRNb2RhbCgnYWRkTGVhcm5pbmcnKTsgfSB9LAogICAgXTsKICAgIHJldHVybiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZpeGVkIGluc2V0LTAgei00MCIgb25DbGljaz17b25DbG9zZX0+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBib3R0b20tMjQgcmlnaHQtOCBiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgcC0yIG1pbi13LVsxODBweF0gei01MCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIHB4LTMgcHktMiI+QWRkIE5ldzwvcD4KICAgICAgICAgICAgICAgIHtpdGVtcy5tYXAoKGl0LCBpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBrZXk9e2l9IG9uQ2xpY2s9e2l0LmFjdGlvbn0gY2xhc3NOYW1lPSJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMi41IHRleHQtc20gdGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ibHVlLTUwIGhvdmVyOnRleHQtYmx1ZS02MDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAge0kucGx1cygiIzNCODJGNiIpfQogICAgICAgICAgICAgICAgICAgICAgICB7aXQubGFiZWx9CiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICApOwp9OwoKY29uc3QgRXhwZW5zZUZvcm0gPSAoeyBpdGVtLCBvbkNsb3NlLCBzZXRFeHBlbnNlcywgaW5jb21lU3RyZWFtcywgc3VwYVVzZXIsIHVzZXJQcm9maWxlLCBwYXltZW50VGFncywgc2V0UGF5bWVudFRhZ3MgfSkgPT4gewogICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0ubmFtZSA6ICcnKTsKICAgIGNvbnN0IFthbW91bnQsIHNldEFtb3VudF0gPSB1c2VTdGF0ZShpdGVtID8gTnVtYmVyKGl0ZW0uYW1vdW50KS50b0xvY2FsZVN0cmluZygnZW4tVVMnKSA6ICcnKTsKICAgIGNvbnN0IFtjYXRlZ29yeSwgc2V0Q2F0ZWdvcnldID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0uY2F0ZWdvcnkgOiAnU2FsYXJ5Jyk7CiAgICBjb25zdCBbZnJlcXVlbmN5LCBzZXRGcmVxdWVuY3ldID0gdXNlU3RhdGUoaXRlbSA/IGl0ZW0uZnJlcXVlbmN5IDogJ01vbnRobHknKTsKICAgIGNvbnN0IFtsaW5rZWRTdHJlYW1JZCwgc2V0TGlua2VkU3RyZWFtSWRdID0gdXNlU3RhdGUoaXRlbSA/IChpdGVtLmxpbmtlZFN0cmVhbUlkIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFtub3RlLCBzZXROb3RlXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5ub3RlIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFtkdWVEYXRlLCBzZXREdWVEYXRlXSA9IHVzZVN0YXRlKGl0ZW0gPyAoaXRlbS5kdWVEYXRlIHx8ICcnKSA6ICcnKTsKICAgIGNvbnN0IFt0YWdnZWRNZW1iZXJzLCBzZXRUYWdnZWRNZW1iZXJzXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IFtzaG93VGFnU2VjdGlvbiwgc2V0U2hvd1RhZ1NlY3Rpb25dID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW3RhZ1NlYXJjaCwgc2V0VGFnU2VhcmNoXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFt0YWdTdWdnZXN0aW9ucywgc2V0VGFnU3VnZ2VzdGlvbnNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3Qgc2VhcmNoVGFnVXNlciA9IGFzeW5jIChxdWVyeSkgPT4gewogICAgICAgIGlmICghcXVlcnkgfHwgcXVlcnkubGVuZ3RoIDwgMiB8fCAhc3VwYWJhc2UpIHsgc2V0VGFnU3VnZ2VzdGlvbnMoW10pOyByZXR1cm47IH0KICAgICAgICBjb25zdCBjbGVhbiA9IHF1ZXJ5LnJlcGxhY2UoJ0AnLCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2ZpbGVzJykuc2VsZWN0KCdpZCwgdXNlcm5hbWUsIGZ1bGxfbmFtZSwgaW5pdGlhbHMsIGF2YXRhcl91cmwnKS5pbGlrZSgndXNlcm5hbWUnLCBjbGVhbiArICclJykubGltaXQoNSk7CiAgICAgICAgc2V0VGFnU3VnZ2VzdGlvbnMoKGRhdGEgfHwgW10pLmZpbHRlcih1ID0+ICF0YWdnZWRNZW1iZXJzLmZpbmQodCA9PiB0LnVzZXJuYW1lID09PSB1LnVzZXJuYW1lKSAmJiB1LnVzZXJuYW1lICE9PSAodXNlclByb2ZpbGUgPyB1c2VyUHJvZmlsZS51c2VybmFtZSA6ICcnKSkpOwogICAgfTsKICAgIGNvbnN0IGFkZFRhZ2dlZE1lbWJlciA9ICh1c2VyKSA9PiB7CiAgICAgICAgc2V0VGFnZ2VkTWVtYmVycyhwcmV2ID0+IFsuLi5wcmV2LCB7IHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLCBmdWxsTmFtZTogdXNlci5mdWxsX25hbWUsIHBheW1lbnRUeXBlOiAnU2FsYXJ5JywgYW1vdW50OiAnJywgcGVyY2VudGFnZTogJycgfV0pOwogICAgICAgIHNldFRhZ1NlYXJjaCgnJyk7IHNldFRhZ1N1Z2dlc3Rpb25zKFtdKTsKICAgIH07CiAgICBjb25zdCB1cGRhdGVUYWdnZWRNZW1iZXIgPSAoaWR4LCBmaWVsZCwgdmFsdWUpID0+IHsKICAgICAgICBzZXRUYWdnZWRNZW1iZXJzKHByZXYgPT4gcHJldi5tYXAoKG0sIGkpID0+IGkgPT09IGlkeCA/IHsgLi4ubSwgW2ZpZWxkXTogdmFsdWUgfSA6IG0pKTsKICAgIH07CiAgICBjb25zdCByZW1vdmVUYWdnZWRNZW1iZXIgPSAoaWR4KSA9PiB7CiAgICAgICAgc2V0VGFnZ2VkTWVtYmVycyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpZHgpKTsKICAgIH07CiAgICBjb25zdCBsaW5rZWRTdHJlYW0gPSBsaW5rZWRTdHJlYW1JZCA/IGluY29tZVN0cmVhbXMuZmluZChzID0+IHMuaWQgPT0gbGlua2VkU3RyZWFtSWQpIDogbnVsbDsKICAgIGNvbnN0IHN1Ym1pdCA9IGFzeW5jICgpID0+IHsKICAgICAgICBpZiAoIW5hbWUgfHwgIWFtb3VudCkgcmV0dXJuOwogICAgICAgIGNvbnN0IHZhbCA9IE51bWJlcihhbW91bnQucmVwbGFjZSgvW14wLTkuXS9nLCAnJykpOwogICAgICAgIGNvbnN0IGxzaWQgPSBsaW5rZWRTdHJlYW1JZCA/IE51bWJlcihsaW5rZWRTdHJlYW1JZCkgOiBudWxsOwogICAgICAgIGNvbnN0IGRhdGEgPSB7IG5hbWUsIGFtb3VudDogdmFsLCBjYXRlZ29yeSwgZnJlcXVlbmN5LCBsaW5rZWRTdHJlYW1JZDogbHNpZCwgbm90ZSwgZHVlRGF0ZTogZHVlRGF0ZSB8fCBudWxsIH07CiAgICAgICAgbGV0IGV4cGVuc2VJZDsKICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICBzZXRFeHBlbnNlcyhwcmV2ID0+IHByZXYubWFwKGUgPT4gZS5pZCA9PT0gaXRlbS5pZCA/IHsgLi4uZSwgLi4uZGF0YSB9IDogZSkpOwogICAgICAgICAgICBleHBlbnNlSWQgPSBpdGVtLmlkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGV4cGVuc2VJZCA9IG5ld0lkKCk7CiAgICAgICAgICAgIHNldEV4cGVuc2VzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IGV4cGVuc2VJZCwgLi4uZGF0YSB9XSk7CiAgICAgICAgfQogICAgICAgIGlmICh0YWdnZWRNZW1iZXJzLmxlbmd0aCA+IDAgJiYgc3VwYWJhc2UgJiYgc3VwYVVzZXIpIHsKICAgICAgICAgICAgY29uc3Qgc2VuZGVyTmFtZSA9IHVzZXJQcm9maWxlID8gKHVzZXJQcm9maWxlLm5hbWUgfHwgdXNlclByb2ZpbGUuZnVsbF9uYW1lIHx8IHVzZXJQcm9maWxlLnVzZXJuYW1lKSA6ICdVbmtub3duJzsKICAgICAgICAgICAgY29uc3QgY29tcGFueU5hbWUgPSBsaW5rZWRTdHJlYW0gPyAobGlua2VkU3RyZWFtLmNvbXBhbnkgfHwgbGlua2VkU3RyZWFtLm5hbWUpIDogbmFtZTsKICAgICAgICAgICAgZm9yIChjb25zdCBtZW1iZXIgb2YgdGFnZ2VkTWVtYmVycykgewogICAgICAgICAgICAgICAgY29uc3QgbWVtYmVyQW1vdW50ID0gbWVtYmVyLnBheW1lbnRUeXBlID09PSAnUGVyY2VudGFnZScgJiYgbGlua2VkU3RyZWFtID8gKE51bWJlcihtZW1iZXIucGVyY2VudGFnZSkgLyAxMDApICogTnVtYmVyKGxpbmtlZFN0cmVhbS5tb250aGx5KSA6IE51bWJlcihTdHJpbmcobWVtYmVyLmFtb3VudCkucmVwbGFjZSgvW14wLTkuXS9nLCAnJykpOwogICAgICAgICAgICAgICAgaWYgKG1lbWJlckFtb3VudCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwYXltZW50X3RhZ3MnKS5pbnNlcnQoewogICAgICAgICAgICAgICAgICAgICAgICBleHBlbnNlX2lkOiBTdHJpbmcoZXhwZW5zZUlkKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyX2lkOiBzdXBhVXNlci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyX25hbWU6IHNlbmRlck5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudF91c2VybmFtZTogbWVtYmVyLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBjb21wYW55X25hbWU6IGNvbXBhbnlOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG1lbWJlckFtb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudF90eXBlOiBtZW1iZXIucGF5bWVudFR5cGUudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogbWVtYmVyLnBheW1lbnRUeXBlID09PSAnUGVyY2VudGFnZScgPyBOdW1iZXIobWVtYmVyLnBlcmNlbnRhZ2UpIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmN5OiBmcmVxdWVuY3ksCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGU6IG5vdGUgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdub3RpZmljYXRpb25zJykuaW5zZXJ0KHsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUGF5bWVudCBUYWdnZWQnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBzZW5kZXJOYW1lICsgJyB0YWdnZWQgQCcgKyBtZW1iZXIudXNlcm5hbWUgKyAnIGluIGEgJyArIG1lbWJlckFtb3VudC50b0xvY2FsZVN0cmluZygpICsgJyAnICsgbWVtYmVyLnBheW1lbnRUeXBlICsgJyBwYXltZW50IGZyb20gJyArIGNvbXBhbnlOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXJfbmFtZTogc2VuZGVyTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgaXNfcmVhZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwaWVudF91c2VybmFtZTogbWVtYmVyLnVzZXJuYW1lCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNldFBheW1lbnRUYWdzKSB7CiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHRhZ3MgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3BheW1lbnRfdGFncycpLnNlbGVjdCgnKicpLmVxKCdzZW5kZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgICAgICAgICBpZiAodGFncykgc2V0UGF5bWVudFRhZ3ModGFncyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgb25DbG9zZSgpOwogICAgfTsKICAgIHJldHVybiAoCiAgICAgICAgPE1vZGFsIHRpdGxlPXtpdGVtID8gJ0VkaXQgRXhwZW5zZScgOiAnQWRkIEV4cGVuc2UnfSBvbkNsb3NlPXtvbkNsb3NlfT4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJFeHBlbnNlIE5hbWUiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17bmFtZX0gb25DaGFuZ2U9e2UgPT4gc2V0TmFtZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJlLmcuIFN0YWZmIFNhbGFyaWVzLCBPZmZpY2UgUmVudCIgLz48L0ZpZWxkPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyI+CiAgICAgICAgICAgICAgICA8RmllbGQgbGFiZWw9IkFtb3VudCAo4oKmKSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXthbW91bnR9IG9uQ2hhbmdlPXtlID0+IHsgY29uc3QgcmF3ID0gZS50YXJnZXQudmFsdWUucmVwbGFjZSgvW14wLTkuXS9nLCAnJyk7IGlmICghcmF3KSB7IHNldEFtb3VudCgnJyk7IHJldHVybjsgfSBjb25zdCBwYXJ0cyA9IHJhdy5zcGxpdCgnLicpOyBwYXJ0c1swXSA9IE51bWJlcihwYXJ0c1swXSkudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJyk7IHNldEFtb3VudChwYXJ0cy5qb2luKCcuJykpOyB9fSBwbGFjZWhvbGRlcj0iZS5nLiAyMDAsMDAwIiB0eXBlPSJ0ZXh0IiBpbnB1dE1vZGU9Im51bWVyaWMiIC8+PC9GaWVsZD4KICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRnJlcXVlbmN5Ij4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtmcmVxdWVuY3l9IG9uQ2hhbmdlPXtlID0+IHNldEZyZXF1ZW5jeShlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNb250aGx5Ij5Nb250aGx5PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iV2Vla2x5Ij5XZWVrbHk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJRdWFydGVybHkiPlF1YXJ0ZXJseTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkFubnVhbCI+QW5udWFsPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iT25lLXRpbWUiPk9uZS10aW1lPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8L0ZpZWxkPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJDYXRlZ29yeSI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHZhbHVlPXtjYXRlZ29yeX0gb25DaGFuZ2U9e2UgPT4gc2V0Q2F0ZWdvcnkoZS50YXJnZXQudmFsdWUpfT4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTYWxhcnkiPlNhbGFyeTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlJlbnQiPlJlbnQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJPcGVyYXRpb25zIj5PcGVyYXRpb25zPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWFya2V0aW5nIj5NYXJrZXRpbmc8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTb2Z0d2FyZSI+U29mdHdhcmUgJiBUb29sczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlRyYW5zcG9ydCI+VHJhbnNwb3J0PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iVXRpbGl0aWVzIj5VdGlsaXRpZXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJUYXgiPlRheDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik90aGVyIj5PdGhlcjwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iUGFpZCBGcm9tIChvcHRpb25hbCkiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17bGlua2VkU3RyZWFtSWR9IG9uQ2hhbmdlPXtlID0+IHNldExpbmtlZFN0cmVhbUlkKGUudGFyZ2V0LnZhbHVlKX0+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5HZW5lcmFsIC8gUGVyc29uYWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICB7aW5jb21lU3RyZWFtcy5tYXAocyA9PiA8b3B0aW9uIGtleT17cy5pZH0gdmFsdWU9e3MuaWR9PntzLm5hbWV9e3MuY29tcGFueSA/ICcgKCcgKyBzLmNvbXBhbnkgKyAnKScgOiAnJ308L29wdGlvbj4pfQogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvRmllbGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC0zIj4KICAgICAgICAgICAgICAgIDxGaWVsZCBsYWJlbD0iRHVlIERhdGUgKG9wdGlvbmFsKSI+PGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHN9IHR5cGU9ImRhdGUiIHZhbHVlPXtkdWVEYXRlfSBvbkNoYW5nZT17ZSA9PiBzZXREdWVEYXRlKGUudGFyZ2V0LnZhbHVlKX0gLz48L0ZpZWxkPgogICAgICAgICAgICAgICAgPEZpZWxkIGxhYmVsPSJOb3RlIChvcHRpb25hbCkiPjxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzfSB2YWx1ZT17bm90ZX0gb25DaGFuZ2U9e2UgPT4gc2V0Tm90ZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPSJlLmcuIDIgc3RhZmYgbWVtYmVycyIgLz48L0ZpZWxkPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgey8qIFRhZyBUZWFtIE1lbWJlcnMgU2VjdGlvbiAqL30KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LTQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCByb3VuZGVkLWxnIj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0U2hvd1RhZ1NlY3Rpb24oIXNob3dUYWdTZWN0aW9uKX0gY2xhc3NOYW1lPSJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTQgcHktMyBiZy1ibHVlLTUwLzUwIGhvdmVyOmJnLWJsdWUtNTAgdHJhbnNpdGlvbiB0ZXh0LWxlZnQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNCODJGNiIgc3Ryb2tlV2lkdGg9IjIiPjxwYXRoIGQ9Ik0xNyAyMXYtMmE0IDQgMCAwIDAtNC00SDVhNCA0IDAgMCAwLTQgNHYyIi8+PGNpcmNsZSBjeD0iOSIgY3k9IjciIHI9IjQiLz48cGF0aCBkPSJNMjMgMjF2LTJhNCA0IDAgMCAwLTMtMy44NyIvPjxwYXRoIGQ9Ik0xNiAzLjEzYTQgNCAwIDAgMSAwIDcuNzUiLz48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS03MDAiPlRhZyBUZWFtIE1lbWJlcnM8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIHt0YWdnZWRNZW1iZXJzLmxlbmd0aCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS02MDAiPnt0YWdnZWRNZW1iZXJzLmxlbmd0aH08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzNCODJGNiIgc3Ryb2tlV2lkdGg9IjIiIGNsYXNzTmFtZT17InRyYW5zaXRpb24gIiArIChzaG93VGFnU2VjdGlvbiA/ICJyb3RhdGUtMTgwIiA6ICIiKX0+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiLz48L3N2Zz4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAge3Nob3dUYWdTZWN0aW9uICYmIDxkaXYgY2xhc3NOYW1lPSJweC00IHB5LTMgc3BhY2UteS0zIj4KICAgICAgICAgICAgICAgICAgICB7dGFnZ2VkTWVtYmVycy5tYXAoKG1lbWJlciwgaWR4KSA9PiA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9ImZsZXggaXRlbXMtc3RhcnQgZ2FwLTIgcC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgc3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctNyBoLTcgcm91bmRlZC1mdWxsIGJnLWJsdWUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteHMgZm9udC1ib2xkIHRleHQtYmx1ZS02MDAiPnsobWVtYmVyLmZ1bGxOYW1lIHx8IG1lbWJlci51c2VybmFtZSkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCI+e21lbWJlci5mdWxsTmFtZSB8fCBtZW1iZXIudXNlcm5hbWV9PC9wPjxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5Ae21lbWJlci51c2VybmFtZX08L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT17aW5wdXRDbHMgKyAiICF0ZXh0LXhzICFweS0xLjUifSB2YWx1ZT17bWVtYmVyLnBheW1lbnRUeXBlfSBvbkNoYW5nZT17ZSA9PiB1cGRhdGVUYWdnZWRNZW1iZXIoaWR4LCAncGF5bWVudFR5cGUnLCBlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTYWxhcnkiPlNhbGFyeTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkJvbnVzIj5Cb251czwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24iPkNvbW1pc3Npb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJPbmUtdGltZSI+T25lLXRpbWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSZWN1cnJpbmciPlJlY3VycmluZzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBlcmNlbnRhZ2UiPlBlcmNlbnRhZ2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyLnBheW1lbnRUeXBlID09PSAnUGVyY2VudGFnZScgPyA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMSBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPXtpbnB1dENscyArICIgIXRleHQteHMgIXB5LTEuNSB3LTE2In0gdHlwZT0ibnVtYmVyIiBwbGFjZWhvbGRlcj0iJSIgdmFsdWU9e21lbWJlci5wZXJjZW50YWdlfSBvbkNoYW5nZT17ZSA9PiB1cGRhdGVUYWdnZWRNZW1iZXIoaWR4LCAncGVyY2VudGFnZScsIGUudGFyZ2V0LnZhbHVlKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPiU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5rZWRTdHJlYW0gJiYgbWVtYmVyLnBlcmNlbnRhZ2UgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZW1lcmFsZC02MDAgZm9udC1tZWRpdW0gbWwtMSI+e1N0cmluZy5mcm9tQ2hhckNvZGUoODM1OCl9eyhOdW1iZXIobWVtYmVyLnBlcmNlbnRhZ2UpIC8gMTAwICogTnVtYmVyKGxpbmtlZFN0cmVhbS5tb250aGx5KSkudG9Mb2NhbGVTdHJpbmcoKX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiA6IDxpbnB1dCBjbGFzc05hbWU9e2lucHV0Q2xzICsgIiAhdGV4dC14cyAhcHktMS41In0gcGxhY2Vob2xkZXI9eyJBbW91bnQgKCIgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDgzNTgpICsgIikifSB2YWx1ZT17bWVtYmVyLmFtb3VudH0gb25DaGFuZ2U9e2UgPT4geyBjb25zdCByYXcgPSBlLnRhcmdldC52YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csICcnKTsgaWYgKCFyYXcpIHsgdXBkYXRlVGFnZ2VkTWVtYmVyKGlkeCwgJ2Ftb3VudCcsICcnKTsgcmV0dXJuOyB9IGNvbnN0IHBhcnRzID0gcmF3LnNwbGl0KCcuJyk7IHBhcnRzWzBdID0gTnVtYmVyKHBhcnRzWzBdKS50b0xvY2FsZVN0cmluZygnZW4tVVMnKTsgdXBkYXRlVGFnZ2VkTWVtYmVyKGlkeCwgJ2Ftb3VudCcsIHBhcnRzLmpvaW4oJy4nKSk7IH19IC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHJlbW92ZVRhZ2dlZE1lbWJlcihpZHgpfSBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgaG92ZXI6dGV4dC1yZWQtNDAwIG10LTEgdHJhbnNpdGlvbiI+PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZVdpZHRoPSIyIj48bGluZSB4MT0iMTgiIHkxPSI2IiB4Mj0iNiIgeTI9IjE4Ii8+PGxpbmUgeDE9IjYiIHkxPSI2IiB4Mj0iMTgiIHkyPSIxOCIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2Pil9CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InJlbGF0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT17aW5wdXRDbHMgKyAiICF0ZXh0LXhzIn0gcGxhY2Vob2xkZXI9IlNlYXJjaCBAdXNlcm5hbWUgdG8gYWRkLi4uIiB2YWx1ZT17dGFnU2VhcmNofSBvbkNoYW5nZT17ZSA9PiB7IHNldFRhZ1NlYXJjaChlLnRhcmdldC52YWx1ZSk7IHNlYXJjaFRhZ1VzZXIoZS50YXJnZXQudmFsdWUpOyB9fSAvPgogICAgICAgICAgICAgICAgICAgICAgICB7dGFnU3VnZ2VzdGlvbnMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0ibXQtMSB3LWZ1bGwgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHNoYWRvdy1sZyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3RhZ1N1Z2dlc3Rpb25zLm1hcCh1ID0+IDxidXR0b24ga2V5PXt1LnVzZXJuYW1lfSBvbkNsaWNrPXsoKSA9PiBhZGRUYWdnZWRNZW1iZXIodSl9IGNsYXNzTmFtZT0idy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgaG92ZXI6YmctYmx1ZS01MCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy02IGgtNiByb3VuZGVkLWZ1bGwgYmctYmx1ZS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ibHVlLTYwMCI+eyh1LmZ1bGxfbmFtZSB8fCB1LnVzZXJuYW1lKS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktOTAwIj57dS5mdWxsX25hbWUgfHwgdS51c2VybmFtZX08L3A+PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPkB7dS51c2VybmFtZX08L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4pfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAge3RhZ2dlZE1lbWJlcnMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB0LTIgYm9yZGVyLXQgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPlRhZ2dlZDoge3RhZ2dlZE1lbWJlcnMubGVuZ3RofSB7dGFnZ2VkTWVtYmVycy5sZW5ndGggPT09IDEgPyAncGVyc29uJyA6ICdwZW9wbGUnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS02MDAiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDgzNTgpfXt0YWdnZWRNZW1iZXJzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyAobS5wYXltZW50VHlwZSA9PT0gJ1BlcmNlbnRhZ2UnICYmIGxpbmtlZFN0cmVhbSA/IChOdW1iZXIobS5wZXJjZW50YWdlIHx8IDApIC8gMTAwKSAqIE51bWJlcihsaW5rZWRTdHJlYW0ubW9udGhseSkgOiBOdW1iZXIoU3RyaW5nKG0uYW1vdW50IHx8ICcwJykucmVwbGFjZSgvW14wLTkuXS9nLCAnJykpKSwgMCkudG9Mb2NhbGVTdHJpbmcoKX0gYWxsb2NhdGVkPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2Pn0KICAgICAgICAgICAgICAgIDwvZGl2Pn0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIG10LTYiPgogICAgICAgICAgICAgICAge2l0ZW0gJiYgPGJ1dHRvbiBjbGFzc05hbWU9e2J0bkRhbmdlcn0gb25DbGljaz17KCkgPT4geyBzZXRFeHBlbnNlcyhwcmV2ID0+IHByZXYuZmlsdGVyKGUgPT4gZS5pZCAhPT0gaXRlbS5pZCkpOyBvbkNsb3NlKCk7IH19PkRlbGV0ZTwvYnV0dG9uPn0KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtidG5QcmltYXJ5fSBvbkNsaWNrPXtzdWJtaXR9PntpdGVtID8gJ1NhdmUgQ2hhbmdlcycgOiAnQWRkIEV4cGVuc2UnfTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L01vZGFsPgogICAgKTsKfTsKCi8qID09PT09PSBNQUlOIEFQUCBDT01QT05FTlQgPT09PT09ICovCmNvbnN0IE51T3BlcmFuZGkgPSAoKSA9PiB7CiAgICBjb25zdCBbYWN0aXZlTW9kdWxlLCBzZXRBY3RpdmVNb2R1bGVdID0gdXNlU3RhdGUoJ2NvbW1hbmQnKTsKICAgIGNvbnN0IFtzaWRlYmFyT3Blbiwgc2V0U2lkZWJhck9wZW5dID0gdXNlU3RhdGUodHJ1ZSk7CiAgICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKG5ldyBEYXRlKCkpOwogICAgY29uc3QgW21vZGFsLCBzZXRNb2RhbF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtlZGl0SXRlbSwgc2V0RWRpdEl0ZW1dID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbZXhwYW5kZWRQcm9qZWN0LCBzZXRFeHBhbmRlZFByb2plY3RdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbZXhwYW5kZWRJbmNvbWUsIHNldEV4cGFuZGVkSW5jb21lXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2V4cGFuZGVkSWRlYXMsIHNldEV4cGFuZGVkSWRlYXNdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW3BsYW5uZXJUYWIsIHNldFBsYW5uZXJUYWJdID0gdXNlU3RhdGUoJ2dvYWxzJyk7CiAgICBjb25zdCBbY29sbGFwc2VkUHJvamVjdHMsIHNldENvbGxhcHNlZFByb2plY3RzXSA9IHVzZVN0YXRlKCgpID0+IGxvYWQoJ2NvbGxhcHNlZFByb2plY3RzJywge30pKTsKICAgIGNvbnN0IFt1c2VyUHJvZmlsZSwgc2V0VXNlclByb2ZpbGVdID0gdXNlU3RhdGUoKCkgPT4gbG9hZCgncHJvZmlsZScsIG51bGwpKTsKICAgIGNvbnN0IFtzdXBhVXNlciwgc2V0U3VwYVVzZXJdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbYXV0aExvYWRpbmcsIHNldEF1dGhMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpOwogICAgY29uc3QgW25vdGlmaWNhdGlvbnMsIHNldE5vdGlmaWNhdGlvbnNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW25vdGlmaWNhdGlvbnNPcGVuLCBzZXROb3RpZmljYXRpb25zT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbZGVsZWdhdGVkVG9NZSwgc2V0RGVsZWdhdGVkVG9NZV0gPSB1c2VTdGF0ZShbXSk7CiAgY29uc3QgW3BheW1lbnRUYWdzLCBzZXRQYXltZW50VGFnc10gPSB1c2VTdGF0ZShbXSk7CiAgY29uc3QgW2luY29taW5nUGF5bWVudHMsIHNldEluY29taW5nUGF5bWVudHNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW2RlbGVnYXRlZEJ5TWUsIHNldERlbGVnYXRlZEJ5TWVdID0gdXNlU3RhdGUoW10pOwogIGNvbnN0IFthY2NlcHRpbmdUYXNrLCBzZXRBY2NlcHRpbmdUYXNrXSA9IHVzZVN0YXRlKG51bGwpOwogIGNvbnN0IFthbGxQcm9maWxlcywgc2V0QWxsUHJvZmlsZXNdID0gdXNlU3RhdGUoW10pOwoKICAgIC8qIC0tIEVkaXRhYmxlIERhdGEgU3RhdGUgLS0gKi8KICAgIGNvbnN0IFtpbmNvbWVTdHJlYW1zLCBzZXRJbmNvbWVTdHJlYW1zXSA9IHVzZVN0YXRlKCgpID0+IGxvYWQoJ2luY29tZScsIGRlZmF1bHRJbmNvbWUpKTsKICAgIGNvbnN0IFtwcm9qZWN0cywgc2V0UHJvamVjdHNdID0gdXNlU3RhdGUoKCkgPT4gbG9hZCgncHJvamVjdHMnLCBkZWZhdWx0UHJvamVjdHMpKTsKICBjb25zdCBbc2hhcmVkUHJvamVjdHMsIHNldFNoYXJlZFByb2plY3RzXSA9IHVzZVN0YXRlKFtdKTsKICBjb25zdCBbc2hhcmVkVGFza0NvbXBsZXRpb25zLCBzZXRTaGFyZWRUYXNrQ29tcGxldGlvbnNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW3F1aWNrVGFza3MsIHNldFF1aWNrVGFza3NdID0gdXNlU3RhdGUoKCkgPT4gbG9hZCgndGFza3MnLCBkZWZhdWx0VGFza3MpKTsKICAgIGNvbnN0IFt0aW1lQmxvY2tzLCBzZXRUaW1lQmxvY2tzXSA9IHVzZVN0YXRlKCgpID0+IGxvYWQoJ3RpbWVibG9ja3MnLCBkZWZhdWx0VGltZUJsb2NrcykpOwogICAgY29uc3QgW2lkZWFzLCBzZXRJZGVhc10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdpZGVhcycsIGRlZmF1bHRJZGVhcykpOwogICAgY29uc3QgW2xlYXJuaW5nLCBzZXRMZWFybmluZ10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdsZWFybmluZycsIGRlZmF1bHRMZWFybmluZykpOwogICAgY29uc3QgW3RlYW1NZW1iZXJzLCBzZXRUZWFtTWVtYmVyc10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCd0ZWFtJywgZGVmYXVsdFRlYW0pKTsKICAgIGNvbnN0IFthbGVydHMsIHNldEFsZXJ0c10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdhbGVydHMnLCBkZWZhdWx0QWxlcnRzKSk7CiAgICBjb25zdCBbY29tcGxldGVkVGFza3MsIHNldENvbXBsZXRlZFRhc2tzXSA9IHVzZVN0YXRlKCgpID0+IGxvYWQoJ2NvbXBsZXRlZFRhc2tzJywge30pKTsKICAgIGNvbnN0IFtjb21wbGV0ZWRUaW1lQmxvY2tzLCBzZXRDb21wbGV0ZWRUaW1lQmxvY2tzXSA9IHVzZVN0YXRlKCgpID0+IGxvYWQoJ2NvbXBsZXRlZEJsb2NrcycsIHt9KSk7CiAgICBjb25zdCBbd2Vla2x5UGxhbiwgc2V0V2Vla2x5UGxhbl0gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCd3ZWVrbHlQbGFuJywgZGVmYXVsdFdlZWtseVBsYW4pKTsKICAgIGNvbnN0IFtjb21wbGV0ZWRXZWVrbHksIHNldENvbXBsZXRlZFdlZWtseV0gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdjb21wbGV0ZWRXZWVrbHknLCB7fSkpOwogICAgY29uc3QgW2V4cGVuc2VzLCBzZXRFeHBlbnNlc10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdleHBlbnNlcycsIGRlZmF1bHRFeHBlbnNlcykpOwogICAgY29uc3QgW2JyaWVmaW5nLCBzZXRCcmllZmluZ10gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCdicmllZmluZycsIGVtYmVkZGVkQnJpZWZpbmcpKTsKICAgIGNvbnN0IFtuYXRpb25CcmllZmluZywgc2V0TmF0aW9uQnJpZWZpbmddID0gdXNlU3RhdGUoKCkgPT4gbG9hZCgnbmF0aW9uQnJpZWZpbmcnLCBlbWJlZGRlZE5hdGlvbikpOwogICAgY29uc3QgW3Rhc2tIaXN0b3J5LCBzZXRUYXNrSGlzdG9yeV0gPSB1c2VTdGF0ZSgoKSA9PiBsb2FkKCd0YXNrSGlzdG9yeScsIFtdKSk7CiAgICBjb25zdCBbc3RhdGVMb2FkZWQsIHNldFN0YXRlTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTsKCiAgICAvLyBMb2FkIHBlcnNpc3RlZCBzdGF0ZSBmcm9tIGxvY2FsU3RvcmFnZQogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB3cCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdudW9wX3dlZWtseVBsYW4nKTsKICAgICAgICBjb25zdCB0aCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdudW9wX3Rhc2tIaXN0b3J5Jyk7CiAgICAgICAgY29uc3QgcXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbnVvcF9xdWlja1Rhc2tzJyk7CiAgICAgICAgaWYgKHdwKSBzZXRXZWVrbHlQbGFuKEpTT04ucGFyc2Uod3ApKTsKICAgICAgICBpZiAodGgpIHNldFRhc2tIaXN0b3J5KEpTT04ucGFyc2UodGgpKTsKICAgICAgICBpZiAocXQpIHNldFF1aWNrVGFza3MoSlNPTi5wYXJzZShxdCkpOwogICAgICB9IGNhdGNoKGUpIHsgY29uc29sZS5sb2coJ0xvYWQgc3RhdGUgZXJyb3I6JywgZSk7IH0KICAgICAgc2V0U3RhdGVMb2FkZWQodHJ1ZSk7CiAgICB9LCBbXSk7CgogICAgLy8gUGVyc2lzdCB3ZWVrbHlQbGFuIHRvIGxvY2FsU3RvcmFnZQogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgaWYgKCFzdGF0ZUxvYWRlZCkgcmV0dXJuOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbnVvcF93ZWVrbHlQbGFuJywgSlNPTi5zdHJpbmdpZnkod2Vla2x5UGxhbikpOwogICAgfSwgW3dlZWtseVBsYW4sIHN0YXRlTG9hZGVkXSk7CgogICAgLy8gUGVyc2lzdCB0YXNrSGlzdG9yeSB0byBsb2NhbFN0b3JhZ2UKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgIGlmICghc3RhdGVMb2FkZWQpIHJldHVybjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ251b3BfdGFza0hpc3RvcnknLCBKU09OLnN0cmluZ2lmeSh0YXNrSGlzdG9yeSkpOwogICAgfSwgW3Rhc2tIaXN0b3J5LCBzdGF0ZUxvYWRlZF0pOwoKICAgIC8vIFBlcnNpc3QgcXVpY2tUYXNrcyB0byBsb2NhbFN0b3JhZ2UKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgIGlmICghc3RhdGVMb2FkZWQpIHJldHVybjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ251b3BfcXVpY2tUYXNrcycsIEpTT04uc3RyaW5naWZ5KHF1aWNrVGFza3MpKTsKICAgIH0sIFtxdWlja1Rhc2tzLCBzdGF0ZUxvYWRlZF0pOwoKCiAgICAvKiAtLSBBdXRvLXNhdmUgYWxsIGRhdGEgLS0gKi8KICAgIHVzZUVmZmVjdCgoKSA9PiB7IHNhdmUoJ2luY29tZScsIGluY29tZVN0cmVhbXMpOyB9LCBbaW5jb21lU3RyZWFtc10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgc2F2ZSgncHJvamVjdHMnLCBwcm9qZWN0cyk7IH0sIFtwcm9qZWN0c10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgc2F2ZSgndGFza3MnLCBxdWlja1Rhc2tzKTsgfSwgW3F1aWNrVGFza3NdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IHNhdmUoJ3RpbWVibG9ja3MnLCB0aW1lQmxvY2tzKTsgfSwgW3RpbWVCbG9ja3NdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IHNhdmUoJ2lkZWFzJywgaWRlYXMpOyB9LCBbaWRlYXNdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IHNhdmUoJ2xlYXJuaW5nJywgbGVhcm5pbmcpOyB9LCBbbGVhcm5pbmddKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IHNhdmUoJ3RlYW0nLCB0ZWFtTWVtYmVycyk7IH0sIFt0ZWFtTWVtYmVyc10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgc2F2ZSgnYWxlcnRzJywgYWxlcnRzKTsgfSwgW2FsZXJ0c10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgc2F2ZSgnY29tcGxldGVkVGFza3MnLCBjb21wbGV0ZWRUYXNrcyk7IH0sIFtjb21wbGV0ZWRUYXNrc10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgc2F2ZSgnY29tcGxldGVkQmxvY2tzJywgY29tcGxldGVkVGltZUJsb2Nrcyk7IH0sIFtjb21wbGV0ZWRUaW1lQmxvY2tzXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCd3ZWVrbHlQbGFuJywgd2Vla2x5UGxhbik7IH0sIFt3ZWVrbHlQbGFuXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCdleHBlbnNlcycsIGV4cGVuc2VzKTsgfSwgW2V4cGVuc2VzXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCdjb21wbGV0ZWRXZWVrbHknLCBjb21wbGV0ZWRXZWVrbHkpOyB9LCBbY29tcGxldGVkV2Vla2x5XSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCdjb2xsYXBzZWRQcm9qZWN0cycsIGNvbGxhcHNlZFByb2plY3RzKTsgfSwgW2NvbGxhcHNlZFByb2plY3RzXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCdicmllZmluZycsIGJyaWVmaW5nKTsgfSwgW2JyaWVmaW5nXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCduYXRpb25CcmllZmluZycsIG5hdGlvbkJyaWVmaW5nKTsgfSwgW25hdGlvbkJyaWVmaW5nXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBzYXZlKCd0YXNrSGlzdG9yeScsIHRhc2tIaXN0b3J5KTsgfSwgW3Rhc2tIaXN0b3J5XSk7CiAgICB1c2VFZmZlY3QoKCkgPT4geyBpZiAodXNlclByb2ZpbGUpIHNhdmUoJ3Byb2ZpbGUnLCB1c2VyUHJvZmlsZSk7IH0sIFt1c2VyUHJvZmlsZV0pOwoKICAgIAogICAgCgogIC8qIC0tIFN1cGFiYXNlIENsb3VkIExvYWQ6IFNlZWQgbG9jYWwgc3RhdGUgZnJvbSBjbG91ZCBvbiBsb2dpbiAtLSAqLwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoIXN1cGFVc2VyKSByZXR1cm47CiAgICAvKiBEZWR1cCBoZWxwZXIgdG8gcHJldmVudCBjbG91ZCBzeW5jIGR1cGxpY2F0ZXMgKi8KICAgIGNvbnN0IGRlZHVwQnlLZXkgPSAoYXJyLCBrZXkpID0+IHsgY29uc3QgcyA9IG5ldyBTZXQoKTsgcmV0dXJuIGFyci5maWx0ZXIoaSA9PiB7IGNvbnN0IGsgPSBpW2tleV07IGlmIChzLmhhcyhrKSkgcmV0dXJuIGZhbHNlOyBzLmFkZChrKTsgcmV0dXJuIHRydWU7IH0pOyB9OwogICAgY29uc3QgbG9hZEZyb21DbG91ZCA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBsb2NhbCBkYXRhIGFscmVhZHkKICAgICAgICBjb25zdCBoYXNMb2NhbERhdGEgPSBpbmNvbWVTdHJlYW1zLmxlbmd0aCA+IDAgfHwgcHJvamVjdHMubGVuZ3RoID4gMCB8fCBxdWlja1Rhc2tzLmxlbmd0aCA+IDA7CiAgICAgICAgaWYgKGhhc0xvY2FsRGF0YSkgcmV0dXJuOyAvLyBPd25lciBhbHJlYWR5IGhhcyBkYXRhIGxvY2FsbHkKCiAgICAgICAgLy8gTm8gbG9jYWwgZGF0YSAtIHRoaXMgaXMgYSB0ZWFtIG1lbWJlciBvciBmcmVzaCBkZXZpY2UuIExvYWQgZnJvbSBjbG91ZC4KICAgICAgICBjb25zdCB7IGRhdGE6IGNsb3VkSW5jb21lIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdpbmNvbWVfc3RyZWFtcycpLnNlbGVjdCgnKicpLmVxKCdvd25lcl9pZCcsIHN1cGFVc2VyLmlkKTsKICAgICAgICBpZiAoY2xvdWRJbmNvbWUgJiYgY2xvdWRJbmNvbWUubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgbWFwcGVkID0gY2xvdWRJbmNvbWUubWFwKHMgPT4gKHsgaWQ6IHMubG9jYWxfaWQsIG5hbWU6IHMubmFtZSwgdHlwZTogcy50eXBlLCBtb250aGx5OiBzLm1vbnRobHksIHN0YXR1czogcy5zdGF0dXMsIG5vdGU6IHMubm90ZSwgLi4uKHMuZXh0cmFfZGF0YSB8fCB7fSkgfSkpOwogICAgICAgICAgc2V0SW5jb21lU3RyZWFtcyhkZWR1cEJ5S2V5KG1hcHBlZCwgJ2lkJykpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBkYXRhOiBjbG91ZEV4cGVuc2VzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdleHBlbnNlcycpLnNlbGVjdCgnKicpOwogICAgICAgIGlmIChjbG91ZEV4cGVuc2VzICYmIGNsb3VkRXhwZW5zZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgbWFwcGVkID0gY2xvdWRFeHBlbnNlcy5tYXAoZSA9PiAoeyBpZDogZS5sb2NhbF9pZCwgbmFtZTogZS5uYW1lLCBhbW91bnQ6IGUuYW1vdW50LCBjYXRlZ29yeTogZS5jYXRlZ29yeSwgZnJlcXVlbmN5OiBlLmZyZXF1ZW5jeSwgbGlua2VkU3RyZWFtSWQ6IGUubGlua2VkX3N0cmVhbV9pZCwgbm90ZTogZS5ub3RlLCBkdWVEYXRlOiBlLmR1ZV9kYXRlIH0pKTsKICAgICAgICAgIHNldEV4cGVuc2VzKG1hcHBlZCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB7IGRhdGE6IGNsb3VkVGFza3MgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ2RhaWx5X3Rhc2tzJykuc2VsZWN0KCcqJyk7CiAgICAgICAgaWYgKGNsb3VkVGFza3MgJiYgY2xvdWRUYXNrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBtYXBwZWQgPSBjbG91ZFRhc2tzLm1hcCh0ayA9PiAoeyBpZDogdGsubG9jYWxfaWQsIHRhc2s6IHRrLnRhc2tfdGV4dCwgcHJpb3JpdHk6IHRrLnByaW9yaXR5LCBkdWU6IHRrLmR1ZSwgcHJvamVjdElkOiB0ay5wcm9qZWN0X2lkLCB3ZWVrbHlTb3VyY2VJZDogdGsud2Vla2x5X3NvdXJjZV9pZCB9KSk7CiAgICAgICAgICBzZXRRdWlja1Rhc2tzKG1hcHBlZCk7CiAgICAgICAgICBjb25zdCBjb21wID0ge307CiAgICAgICAgICBjbG91ZFRhc2tzLmZvckVhY2godGsgPT4geyBpZiAodGsuY29tcGxldGVkKSBjb21wW3RrLmxvY2FsX2lkXSA9IHRydWU7IH0pOwogICAgICAgICAgc2V0Q29tcGxldGVkVGFza3MoY29tcCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB7IGRhdGE6IGNsb3VkQmxvY2tzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0aW1lX2Jsb2NrcycpLnNlbGVjdCgnKicpOwogICAgICAgIGlmIChjbG91ZEJsb2NrcyAmJiBjbG91ZEJsb2Nrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBtYXBwZWQgPSBjbG91ZEJsb2Nrcy5tYXAoYiA9PiAoeyBpZDogYi5sb2NhbF9pZCwgdGFzazogYi50YXNrX3RleHQsIHRpbWU6IGIuc3RhcnRfdGltZSwgZW5kOiBiLmVuZF90aW1lLCBjYXQ6IGIuY2F0ZWdvcnkgfSkpOwogICAgICAgICAgc2V0VGltZUJsb2NrcyhtYXBwZWQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBkYXRhOiBjbG91ZElkZWFzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdpZGVhcycpLnNlbGVjdCgnKicpOwogICAgICAgIGlmIChjbG91ZElkZWFzICYmIGNsb3VkSWRlYXMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgbWFwcGVkID0gY2xvdWRJZGVhcy5tYXAoaSA9PiAoeyBpZDogaS5sb2NhbF9pZCwgdGV4dDogaS50ZXh0X2NvbnRlbnQgfSkpOwogICAgICAgICAgc2V0SWRlYXMobWFwcGVkKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHsgZGF0YTogY2xvdWRUZWFtIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0ZWFtX21lbWJlcnMnKS5zZWxlY3QoJyonKTsKICAgICAgICBpZiAoY2xvdWRUZWFtICYmIGNsb3VkVGVhbS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBtYXBwZWQgPSBjbG91ZFRlYW0ubWFwKG0gPT4gKHsgaWQ6IG0ubG9jYWxfaWQsIG5hbWU6IG0ubmFtZSwgaW5pdGlhbHM6IG0uaW5pdGlhbHMsIHN0YXR1czogbS5zdGF0dXMgfSkpOwogICAgICAgICAgc2V0VGVhbU1lbWJlcnMobWFwcGVkKTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHsgZGF0YTogY2xvdWRCcmllZmluZyB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnYnJpZWZpbmdzJykuc2VsZWN0KCcqJykuZXEoJ3R5cGUnLCAnbW9ybmluZycpLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLmxpbWl0KDEpOwogICAgICAgIGlmIChjbG91ZEJyaWVmaW5nICYmIGNsb3VkQnJpZWZpbmcubGVuZ3RoID4gMCkgewogICAgICAgICAgc2V0QnJpZWZpbmcoY2xvdWRCcmllZmluZ1swXS5jb250ZW50KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHsgZGF0YTogY2xvdWROYXRpb24gfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ2JyaWVmaW5ncycpLnNlbGVjdCgnKicpLmVxKCd0eXBlJywgJ25hdGlvbicpLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLmxpbWl0KDEpOwogICAgICAgIGlmIChjbG91ZE5hdGlvbiAmJiBjbG91ZE5hdGlvbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICBzZXROYXRpb25CcmllZmluZyhjbG91ZE5hdGlvblswXS5jb250ZW50KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHsgZGF0YTogY2xvdWRIaXN0b3J5IH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0YXNrX2hpc3RvcnknKS5zZWxlY3QoJyonKTsKICAgICAgICBpZiAoY2xvdWRIaXN0b3J5ICYmIGNsb3VkSGlzdG9yeS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBtYXBwZWQgPSBjbG91ZEhpc3RvcnkubWFwKGggPT4gKHsgZGF0ZTogaC5kYXRlLCB0YXNrczogaC50YXNrcyB9KSk7CiAgICAgICAgICBzZXRUYXNrSGlzdG9yeShtYXBwZWQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBkYXRhOiBjbG91ZFByb2plY3RzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9qZWN0cycpLnNlbGVjdCgnKicpOwogICAgICAgIGlmIChjbG91ZFByb2plY3RzICYmIGNsb3VkUHJvamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgY29uc3QgbWFwcGVkID0gY2xvdWRQcm9qZWN0cy5tYXAocCA9PiAoeyBpZDogcC5sb2NhbF9pZCwgbmFtZTogcC5uYW1lLCBkZXNjOiBwLmRlc2NyaXB0aW9uLCBwcm9ncmVzczogcC5wcm9ncmVzcywgc3RhdHVzOiBwLnN0YXR1cywgc3RhcnQ6IHAuc3RhcnRfZGF0ZSwgbGF1bmNoOiBwLmxhdW5jaF9kYXRlLCB0ZWFtOiBwLnRlYW1fc2l6ZSwgbmV4dDogcC5uZXh0X3N0ZXAsIHRlYW1NZW1iZXJzOiBwLnRlYW1fbWVtYmVycyB8fCBbXSB9KSk7CiAgICAgICAgICBzZXRQcm9qZWN0cyhtYXBwZWQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBkYXRhOiBjbG91ZFdlZWtseSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnd2Vla2x5X3Rhc2tzJykuc2VsZWN0KCcqJyk7CiAgICAgICAgaWYgKGNsb3VkV2Vla2x5ICYmIGNsb3VkV2Vla2x5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IGNsb3VkV2Vla2x5Lm1hcCh0ayA9PiAoeyBpZDogdGsubG9jYWxfaWQsIHRhc2s6IHRrLnRhc2tfdGV4dCwgcHJvamVjdElkOiB0ay5wcm9qZWN0X2xvY2FsX2lkLCBzdWJ0YXNrczogdGsuc3VidGFza3MgfHwgW10sIGRlYWRsaW5lOiB0ay5kZWFkbGluZSwgZGVsZWdhdGVkVG86IHRrLmRlbGVnYXRlZF90bywgdGhpc1dlZWs6ICEhdGsudGhpc193ZWVrIH0pKTsKICAgICAgICAgIHNldFdlZWtseVBsYW4obWFwcGVkKTsKICAgICAgICAgIGNvbnN0IGNvbXAgPSB7fTsKICAgICAgICAgIGNsb3VkV2Vla2x5LmZvckVhY2godGsgPT4geyBpZiAodGsuY29tcGxldGVkKSBjb21wW3RrLmxvY2FsX2lkXSA9IHRydWU7IH0pOwogICAgICAgICAgc2V0Q29tcGxldGVkV2Vla2x5KGNvbXApOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgeyBkYXRhOiBjbG91ZFNldHRpbmdzIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd1c2VyX3NldHRpbmdzJykuc2VsZWN0KCcqJyk7CiAgICAgICAgaWYgKGNsb3VkU2V0dGluZ3MgJiYgY2xvdWRTZXR0aW5ncy5sZW5ndGggPiAwICYmIGNsb3VkU2V0dGluZ3NbMF0ucHJvZmlsZV9kYXRhKSB7CiAgICAgICAgICBzZXRVc2VyUHJvZmlsZShjbG91ZFNldHRpbmdzWzBdLnByb2ZpbGVfZGF0YSk7CiAgICAgICAgfQoKICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ0Nsb3VkIGxvYWQgZXJyb3I6JywgZXJyKTsgfQogICAgfTsKICAgIGxvYWRGcm9tQ2xvdWQoKTsKICB9LCBbc3VwYVVzZXJdKTsKCgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IFByb2plY3RzICYgVGFza3MgdG8gQ2xvdWQgLS0gKi8KICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgdGVhbU1hcCA9IHt9OwogICAgICAgICAgd2Vla2x5UGxhbi5mb3JFYWNoKHRrID0+IHsKICAgICAgICAgICAgaWYgKHRrLnByb2plY3RJZCAmJiB0ay5kZWxlZ2F0ZWRUbykgewogICAgICAgICAgICAgIGlmICghdGVhbU1hcFt0ay5wcm9qZWN0SWRdKSB0ZWFtTWFwW3RrLnByb2plY3RJZF0gPSBuZXcgU2V0KCk7CiAgICAgICAgICAgICAgdGVhbU1hcFt0ay5wcm9qZWN0SWRdLmFkZCh0ay5kZWxlZ2F0ZWRUby5yZXBsYWNlKC9eQC8sICcnKS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9qZWN0cycpLmRlbGV0ZSgpLmVxKCdvd25lcl9pZCcsIHN1cGFVc2VyLmlkKTsKICAgICAgICAgIGNvbnN0IHJvd3MgPSBwcm9qZWN0cy5tYXAocCA9PiAoewogICAgICAgICAgICBsb2NhbF9pZDogcC5pZCwKICAgICAgICAgICAgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLAogICAgICAgICAgICBuYW1lOiBwLm5hbWUsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwLmRlc2MgfHwgJycsCiAgICAgICAgICAgIHByb2dyZXNzOiBwLnByb2dyZXNzIHx8IDAsCiAgICAgICAgICAgIHN0YXR1czogcC5zdGF0dXMgfHwgJ1BsYW5uaW5nJywKICAgICAgICAgICAgc3RhcnRfZGF0ZTogcC5zdGFydCB8fCBudWxsLAogICAgICAgICAgICBsYXVuY2hfZGF0ZTogcC5sYXVuY2ggfHwgbnVsbCwKICAgICAgICAgICAgdGVhbV9zaXplOiB0eXBlb2YgcC50ZWFtID09PSAnbnVtYmVyJyA/IHAudGVhbSA6IDAsCiAgICAgICAgICAgIHRlYW1fbWVtYmVyczogQXJyYXkuZnJvbShuZXcgU2V0KFsuLi4ocC50ZWFtTWVtYmVycyB8fCBbXSksIC4uLih0ZWFtTWFwW3AuaWRdID8gQXJyYXkuZnJvbSh0ZWFtTWFwW3AuaWRdKSA6IFtdKV0pKSwKICAgICAgICAgICAgbmV4dF9zdGVwOiBwLm5leHQgfHwgJycKICAgICAgICAgIH0pKTsKICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCA+IDApIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2plY3RzJykuaW5zZXJ0KHJvd3MpOwogICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUubG9nKCdQcm9qZWN0IHN5bmMgZXJyb3I6JywgZXJyKTsgfQogICAgICB9LCAyMDAwKTsKICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgICB9LCBbcHJvamVjdHMsIHdlZWtseVBsYW4sIHN1cGFVc2VyXSk7CgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCd3ZWVrbHlfdGFza3MnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgICBjb25zdCByb3dzID0gd2Vla2x5UGxhbi5tYXAodGsgPT4gKHsKICAgICAgICAgICAgbG9jYWxfaWQ6IHRrLmlkLAogICAgICAgICAgICBvd25lcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICAgIHByb2plY3RfbG9jYWxfaWQ6IHRrLnByb2plY3RJZCB8fCBudWxsLAogICAgICAgICAgICB0YXNrX3RleHQ6IHRrLnRhc2ssCiAgICAgICAgICAgIHN1YnRhc2tzOiB0ay5zdWJ0YXNrcyB8fCBbXSwKICAgICAgICAgICAgZGVhZGxpbmU6IHRrLmRlYWRsaW5lIHx8IG51bGwsCiAgICAgICAgICAgIGRlbGVnYXRlZF90bzogdGsuZGVsZWdhdGVkVG8gPyB0ay5kZWxlZ2F0ZWRUby5yZXBsYWNlKC9eQC8sICcnKS50b0xvd2VyQ2FzZSgpIDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aGlzX3dlZWs6ICEhdGsudGhpc1dlZWssCiAgICAgICAgICAgIGNvbXBsZXRlZDogISFjb21wbGV0ZWRXZWVrbHlbdGsuaWRdCiAgICAgICAgICB9KSk7CiAgICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd3ZWVrbHlfdGFza3MnKS5pbnNlcnQocm93cyk7CiAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ1Rhc2sgc3luYyBlcnJvcjonLCBlcnIpOyB9CiAgICAgIH0sIDIwMDApOwogICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgIH0sIFt3ZWVrbHlQbGFuLCBjb21wbGV0ZWRXZWVrbHksIHN1cGFVc2VyXSk7CgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IEluY29tZSBTdHJlYW1zIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnaW5jb21lX3N0cmVhbXMnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IGluY29tZVN0cmVhbXMubWFwKHMgPT4gKHsKICAgICAgICAgIGxvY2FsX2lkOiBzLmlkLCBvd25lcl9pZDogc3VwYVVzZXIuaWQsIG5hbWU6IHMubmFtZSwKICAgICAgICAgIHR5cGU6IHMudHlwZSB8fCAnQWN0aXZlJywgbW9udGhseTogcy5tb250aGx5IHx8IDAsCiAgICAgICAgICBzdGF0dXM6IHMuc3RhdHVzIHx8ICdhY3RpdmUnLCBub3RlOiBzLm5vdGUgfHwgJycsCiAgICAgICAgICBleHRyYV9kYXRhOiB7IG5leHRQYXltZW50OiBzLm5leHRQYXltZW50IHx8ICcnLCBwYXltZW50Q3ljbGU6IHMucGF5bWVudEN5Y2xlIHx8ICcnLCBwYXltZW50czogcy5wYXltZW50cyB8fCBbXSwgcm9sZTogcy5yb2xlIHx8ICcnLCBjb21wYW55OiBzLmNvbXBhbnkgfHwgJycgfQogICAgICAgIH0pKTsKICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdpbmNvbWVfc3RyZWFtcycpLmluc2VydChyb3dzKTsKICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ0luY29tZSBzeW5jIGVycm9yOicsIGVycik7IH0KICAgIH0sIDIwMDApOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSwgW2luY29tZVN0cmVhbXMsIHN1cGFVc2VyXSk7CgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IEV4cGVuc2VzIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZXhwZW5zZXMnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IGV4cGVuc2VzLm1hcChlID0+ICh7CiAgICAgICAgICBsb2NhbF9pZDogZS5pZCwgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLCBuYW1lOiBlLm5hbWUsCiAgICAgICAgICBhbW91bnQ6IGUuYW1vdW50IHx8IDAsIGNhdGVnb3J5OiBlLmNhdGVnb3J5IHx8ICcnLAogICAgICAgICAgZnJlcXVlbmN5OiBlLmZyZXF1ZW5jeSB8fCAnTW9udGhseScsCiAgICAgICAgICBsaW5rZWRfc3RyZWFtX2lkOiBlLmxpbmtlZFN0cmVhbUlkIHx8IG51bGwsCiAgICAgICAgICBub3RlOiBlLm5vdGUgfHwgJycsIGR1ZV9kYXRlOiBlLmR1ZURhdGUgfHwgbnVsbAogICAgICAgIH0pKTsKICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdleHBlbnNlcycpLmluc2VydChyb3dzKTsKICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ0V4cGVuc2VzIHN5bmMgZXJyb3I6JywgZXJyKTsgfQogICAgfSwgMjAwMCk7CiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTsKICB9LCBbZXhwZW5zZXMsIHN1cGFVc2VyXSk7CgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IERhaWx5IFRhc2tzIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGFpbHlfdGFza3MnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IHF1aWNrVGFza3MubWFwKHRrID0+ICh7CiAgICAgICAgICBsb2NhbF9pZDogdGsuaWQsIG93bmVyX2lkOiBzdXBhVXNlci5pZCwKICAgICAgICAgIHRhc2tfdGV4dDogdGsudGFzaywgcHJpb3JpdHk6IHRrLnByaW9yaXR5IHx8ICdtZWRpdW0nLAogICAgICAgICAgZHVlOiB0ay5kdWUgfHwgJ1RvZGF5JywgcHJvamVjdF9pZDogdGsucHJvamVjdElkIHx8IG51bGwsCiAgICAgICAgICB3ZWVrbHlfc291cmNlX2lkOiB0ay53ZWVrbHlTb3VyY2VJZCB8fCBudWxsLAogICAgICAgICAgY29tcGxldGVkOiAhIWNvbXBsZXRlZFRhc2tzW3RrLmlkXSwKICAgICAgICAgIGNvbXBsZXRlZF9hdDogY29tcGxldGVkVGFza3NbdGsuaWRdID8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpIDogbnVsbAogICAgICAgIH0pKTsKICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdkYWlseV90YXNrcycpLmluc2VydChyb3dzKTsKICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ0RhaWx5IHRhc2tzIHN5bmMgZXJyb3I6JywgZXJyKTsgfQogICAgfSwgMjAwMCk7CiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTsKICB9LCBbcXVpY2tUYXNrcywgY29tcGxldGVkVGFza3MsIHN1cGFVc2VyXSk7CgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IFRpbWUgQmxvY2tzIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgndGltZV9ibG9ja3MnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IHRpbWVCbG9ja3MubWFwKGIgPT4gKHsKICAgICAgICAgIGxvY2FsX2lkOiBiLmlkLCBvd25lcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICB0YXNrX3RleHQ6IGIudGFzaywgc3RhcnRfdGltZTogYi50aW1lIHx8ICcnLAogICAgICAgICAgZW5kX3RpbWU6IGIuZW5kIHx8ICcnLCBjYXRlZ29yeTogYi5jYXQgfHwgJycKICAgICAgICB9KSk7CiAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCkgYXdhaXQgc3VwYWJhc2UuZnJvbSgndGltZV9ibG9ja3MnKS5pbnNlcnQocm93cyk7CiAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUubG9nKCdUaW1lIGJsb2NrcyBzeW5jIGVycm9yOicsIGVycik7IH0KICAgIH0sIDIwMDApOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSwgW3RpbWVCbG9ja3MsIHN1cGFVc2VyXSk7CgogIC8qIC0tIFN1cGFiYXNlIFN5bmM6IElkZWFzIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnaWRlYXMnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IGlkZWFzLm1hcChpID0+ICh7CiAgICAgICAgICBsb2NhbF9pZDogaS5pZCwgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLAogICAgICAgICAgdGV4dF9jb250ZW50OiBpLnRleHQgfHwgJycKICAgICAgICB9KSk7CiAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCkgYXdhaXQgc3VwYWJhc2UuZnJvbSgnaWRlYXMnKS5pbnNlcnQocm93cyk7CiAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUubG9nKCdJZGVhcyBzeW5jIGVycm9yOicsIGVycik7IH0KICAgIH0sIDIwMDApOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSwgW2lkZWFzLCBzdXBhVXNlcl0pOwoKICAvKiAtLSBTdXBhYmFzZSBTeW5jOiBUZWFtIE1lbWJlcnMgLS0gKi8KICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0ZWFtX21lbWJlcnMnKS5kZWxldGUoKS5lcSgnb3duZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgY29uc3Qgcm93cyA9IHRlYW1NZW1iZXJzLm1hcChtID0+ICh7CiAgICAgICAgICBsb2NhbF9pZDogbS5pZCwgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLAogICAgICAgICAgbmFtZTogbS5uYW1lLCBpbml0aWFsczogbS5pbml0aWFscyB8fCAnJywKICAgICAgICAgIHN0YXR1czogbS5zdGF0dXMgfHwgJ2F2YWlsYWJsZScKICAgICAgICB9KSk7CiAgICAgICAgaWYgKHJvd3MubGVuZ3RoID4gMCkgYXdhaXQgc3VwYWJhc2UuZnJvbSgndGVhbV9tZW1iZXJzJykuaW5zZXJ0KHJvd3MpOwogICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmxvZygnVGVhbSBzeW5jIGVycm9yOicsIGVycik7IH0KICAgIH0sIDIwMDApOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSwgW3RlYW1NZW1iZXJzLCBzdXBhVXNlcl0pOwoKICAvKiAtLSBTdXBhYmFzZSBTeW5jOiBCcmllZmluZ3MgLS0gKi8KICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKCFzdXBhVXNlciB8fCAhYnJpZWZpbmcgfHwgIWJyaWVmaW5nLmRhdGUpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnYnJpZWZpbmdzJykuZGVsZXRlKCkuZXEoJ293bmVyX2lkJywgc3VwYVVzZXIuaWQpLmVxKCd0eXBlJywgJ21vcm5pbmcnKTsKICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdicmllZmluZ3MnKS5pbnNlcnQoewogICAgICAgICAgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLCB0eXBlOiAnbW9ybmluZycsCiAgICAgICAgICBkYXRlOiBicmllZmluZy5kYXRlLCBnZW5lcmF0ZWRfYXQ6IGJyaWVmaW5nLmdlbmVyYXRlZEF0IHx8IG51bGwsCiAgICAgICAgICBjb250ZW50OiBicmllZmluZwogICAgICAgIH0pOwogICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmxvZygnQnJpZWZpbmcgc3luYyBlcnJvcjonLCBlcnIpOyB9CiAgICB9LCAyMDAwKTsKICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpOwogIH0sIFticmllZmluZywgc3VwYVVzZXJdKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIgfHwgIW5hdGlvbkJyaWVmaW5nIHx8ICFuYXRpb25CcmllZmluZy5kYXRlKSByZXR1cm47CiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2JyaWVmaW5ncycpLmRlbGV0ZSgpLmVxKCdvd25lcl9pZCcsIHN1cGFVc2VyLmlkKS5lcSgndHlwZScsICduYXRpb24nKTsKICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdicmllZmluZ3MnKS5pbnNlcnQoewogICAgICAgICAgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLCB0eXBlOiAnbmF0aW9uJywKICAgICAgICAgIGRhdGU6IG5hdGlvbkJyaWVmaW5nLmRhdGUsIGdlbmVyYXRlZF9hdDogbmF0aW9uQnJpZWZpbmcuZ2VuZXJhdGVkQXQgfHwgbnVsbCwKICAgICAgICAgIGNvbnRlbnQ6IG5hdGlvbkJyaWVmaW5nCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUubG9nKCdOYXRpb24gYnJpZWZpbmcgc3luYyBlcnJvcjonLCBlcnIpOyB9CiAgICB9LCAyMDAwKTsKICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpOwogIH0sIFtuYXRpb25CcmllZmluZywgc3VwYVVzZXJdKTsKCiAgLyogLS0gU3VwYWJhc2UgU3luYzogVGFzayBIaXN0b3J5IC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgndGFza19oaXN0b3J5JykuZGVsZXRlKCkuZXEoJ293bmVyX2lkJywgc3VwYVVzZXIuaWQpOwogICAgICAgIGNvbnN0IHJvd3MgPSB0YXNrSGlzdG9yeS5tYXAoaCA9PiAoewogICAgICAgICAgb3duZXJfaWQ6IHN1cGFVc2VyLmlkLCBkYXRlOiBoLmRhdGUsIHRhc2tzOiBoLnRhc2tzIHx8IFtdCiAgICAgICAgfSkpOwogICAgICAgIGlmIChyb3dzLmxlbmd0aCA+IDApIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Rhc2tfaGlzdG9yeScpLmluc2VydChyb3dzKTsKICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5sb2coJ1Rhc2sgaGlzdG9yeSBzeW5jIGVycm9yOicsIGVycik7IH0KICAgIH0sIDIwMDApOwogICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7CiAgfSwgW3Rhc2tIaXN0b3J5LCBzdXBhVXNlcl0pOwoKICAvKiAtLSBTdXBhYmFzZSBTeW5jOiBVc2VyIFNldHRpbmdzIC0tICovCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgndXNlcl9zZXR0aW5ncycpLnVwc2VydCh7CiAgICAgICAgICBvd25lcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICBwcm9maWxlX2RhdGE6IHVzZXJQcm9maWxlIHx8IHt9LAogICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgICAgfSwgeyBvbkNvbmZsaWN0OiAnb3duZXJfaWQnIH0pOwogICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmxvZygnU2V0dGluZ3Mgc3luYyBlcnJvcjonLCBlcnIpOyB9CiAgICB9LCAyMDAwKTsKICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpOwogIH0sIFt1c2VyUHJvZmlsZSwgc3VwYVVzZXJdKTsKCgoKLyogLS0gU3VwYWJhc2UgQXV0aCAtLSAqLwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBpbml0QXV0aCA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpOwogICAgICAgICAgICAgICAgaWYgKHNlc3Npb24/LnVzZXIpIHsKICAgICAgICAgICAgICAgICAgICBzZXRTdXBhVXNlcihzZXNzaW9uLnVzZXIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcHJvZiB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJyonKS5lcSgnaWQnLCBzZXNzaW9uLnVzZXIuaWQpLnNpbmdsZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChwcm9mKSBzZXRVc2VyUHJvZmlsZSh7IG5hbWU6IHByb2YuZnVsbF9uYW1lLCB1c2VybmFtZTogcHJvZi51c2VybmFtZSwgaW5pdGlhbHM6IHByb2YuaW5pdGlhbHMsIGF2YXRhcl91cmw6IHByb2YuYXZhdGFyX3VybCB8fCAnJyB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygnQXV0aCBpbml0OicsIGUpOyB9CiAgICAgICAgICAgIHNldEF1dGhMb2FkaW5nKGZhbHNlKTsKICAgICAgICB9OwogICAgICAgIGluaXRBdXRoKCk7CiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHN1YnNjcmlwdGlvbiB9IH0gPSBzdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKGFzeW5jIChldmVudCwgc2Vzc2lvbikgPT4gewogICAgICAgICAgICBpZiAoc2Vzc2lvbj8udXNlcikgeyBzZXRTdXBhVXNlcihzZXNzaW9uLnVzZXIpOyB9IGVsc2UgeyBzZXRTdXBhVXNlcihudWxsKTsgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7CiAgICB9LCBbXSk7CgogICAgLyogLS0gUmVhbC10aW1lIE5vdGlmaWNhdGlvbnMgLS0gKi8KICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgICAgIGNvbnN0IGZldGNoTm90aWZzID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ25vdGlmaWNhdGlvbnMnKS5zZWxlY3QoJyonKS5lcSgndXNlcl9pZCcsIHN1cGFVc2VyLmlkKS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KS5saW1pdCgyMCk7CiAgICAgICAgICAgIGlmIChkYXRhKSBzZXROb3RpZmljYXRpb25zKGRhdGEpOwogICAgICAgIH07CiAgICAgICAgZmV0Y2hOb3RpZnMoKTsKICAgICAgICBjb25zdCBjaGFubmVsID0gc3VwYWJhc2UuY2hhbm5lbCgnbm90aWZzLScgKyBzdXBhVXNlci5pZCkub24oJ3Bvc3RncmVzX2NoYW5nZXMnLCB7IGV2ZW50OiAnSU5TRVJUJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdub3RpZmljYXRpb25zJywgZmlsdGVyOiAndXNlcl9pZD1lcS4nICsgc3VwYVVzZXIuaWQgfSwgcGF5bG9hZCA9PiB7CiAgICAgICAgICAgIHNldE5vdGlmaWNhdGlvbnMocHJldiA9PiBbcGF5bG9hZC5uZXcsIC4uLnByZXZdKTsKICAgICAgICB9KS5zdWJzY3JpYmUoKTsKICAgICAgICByZXR1cm4gKCkgPT4geyBzdXBhYmFzZS5yZW1vdmVDaGFubmVsKGNoYW5uZWwpOyB9OwogICAgfSwgW3N1cGFVc2VyXSk7CgogICAgLyogLS0gRGVsZWdhdGVkIHRvIG1lIC0tICovCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGlmICghc3VwYVVzZXIgfHwgIXVzZXJQcm9maWxlKSByZXR1cm47CiAgICAgICAgY29uc3QgZmV0Y2hEZWxlZ2F0ZWQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykuc2VsZWN0KCcqJykuZXEoJ3JlY2lwaWVudF91c2VybmFtZScsIHVzZXJQcm9maWxlLnVzZXJuYW1lKS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTsKICAgICAgICAgICAgaWYgKGRhdGEpIHNldERlbGVnYXRlZFRvTWUoZGF0YSk7CiAgICAgICAgfTsKICAgICAgICBmZXRjaERlbGVnYXRlZCgpOwogICAgICAgIGNvbnN0IGZldGNoRGVsZWdhdGVkQnlNZSA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdkZWxlZ2F0ZWRfdGFza3MnKS5zZWxlY3QoJyonKS5lcSgnZGVsZWdhdG9yX2lkJywgc3VwYVVzZXIuaWQpLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pOwogICAgICAgICAgICBpZiAoZGF0YSkgc2V0RGVsZWdhdGVkQnlNZShkYXRhKTsKICAgICAgICB9OwogICAgICAgIGZldGNoRGVsZWdhdGVkQnlNZSgpOwogICAgLy8gRmV0Y2ggYWxsIHByb2ZpbGVzIGZvciBUZWFtIHNlY3Rpb24gKGV4Y2x1ZGluZyBjdXJyZW50IGFkbWluIHVzZXIpCiAgICBjb25zdCBmZXRjaEFsbFByb2ZpbGVzID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXN1cGFVc2VyKSByZXR1cm47CiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZnVsbF9uYW1lLCBpbml0aWFscywgYXZhdGFyX3VybCcpLm5lcSgnaWQnLCBzdXBhVXNlci5pZCkub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTsKICAgICAgaWYgKGRhdGEpIHNldEFsbFByb2ZpbGVzKGRhdGEpOwogICAgfTsKICAgIGZldGNoQWxsUHJvZmlsZXMoKTsKICAgICAgICBjb25zdCBjaGFubmVsID0gc3VwYWJhc2UuY2hhbm5lbCgnZGVsZWdhdGVkLScgKyB1c2VyUHJvZmlsZS51c2VybmFtZSkub24oJ3Bvc3RncmVzX2NoYW5nZXMnLCB7IGV2ZW50OiAnKicsIHNjaGVtYTogJ3B1YmxpYycsIHRhYmxlOiAnZGVsZWdhdGVkX3Rhc2tzJywgZmlsdGVyOiAncmVjaXBpZW50X3VzZXJuYW1lPWVxLicgKyB1c2VyUHJvZmlsZS51c2VybmFtZSB9LCAoKSA9PiB7IGZldGNoRGVsZWdhdGVkKCk7IH0pLnN1YnNjcmliZSgpOwogICAgICAgIC8vIEFsc28gc3Vic2NyaWJlIHRvIGNoYW5nZXMgb24gdGFza3MgZGVsZWdhdGVkIEJZIG1lIChzbyBib2FyZHJvb20gYXV0by11cGRhdGVzKQogICAgICAgIGNvbnN0IGRlbGVnYXRvckNoYW5uZWwgPSBzdXBhYmFzZS5jaGFubmVsKCdkZWxlZ2F0b3ItJyArIHN1cGFVc2VyLmlkKS5vbigncG9zdGdyZXNfY2hhbmdlcycsIHsgZXZlbnQ6ICcqJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdkZWxlZ2F0ZWRfdGFza3MnLCBmaWx0ZXI6ICdkZWxlZ2F0b3JfaWQ9ZXEuJyArIHN1cGFVc2VyLmlkIH0sICgpID0+IHsgZmV0Y2hEZWxlZ2F0ZWRCeU1lKCk7IH0pLnN1YnNjcmliZSgpOwoKICAgICAgY29uc3QgZmV0Y2hQYXltZW50VGFncyA9IGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3BheW1lbnRfdGFncycpLnNlbGVjdCgnKicpLmVxKCdzZW5kZXJfaWQnLCBzdXBhVXNlci5pZCk7CiAgICAgICAgaWYgKGRhdGEpIHNldFBheW1lbnRUYWdzKGRhdGEpOwogICAgICB9OwogICAgICBjb25zdCBmZXRjaEluY29taW5nUGF5bWVudHMgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwYXltZW50X3RhZ3MnKS5zZWxlY3QoJyonKS5lcSgncmVjaXBpZW50X3VzZXJuYW1lJywgdXNlclByb2ZpbGUudXNlcm5hbWUpOwogICAgICAgIGlmIChkYXRhKSBzZXRJbmNvbWluZ1BheW1lbnRzKGRhdGEpOwogICAgICB9OwogICAgICBmZXRjaFBheW1lbnRUYWdzKCk7CiAgICAgIGZldGNoSW5jb21pbmdQYXltZW50cygpOwogICAgICAgIAogICAgICBjb25zdCBwYXltZW50U2VuZGVyQ2hhbm5lbCA9IHN1cGFiYXNlLmNoYW5uZWwoJ3BheW1lbnQtc2VuZGVyLScgKyBzdXBhVXNlci5pZCkub24oJ3Bvc3RncmVzX2NoYW5nZXMnLCB7IGV2ZW50OiAnKicsIHNjaGVtYTogJ3B1YmxpYycsIHRhYmxlOiAncGF5bWVudF90YWdzJywgZmlsdGVyOiAnc2VuZGVyX2lkPWVxLicgKyBzdXBhVXNlci5pZCB9LCAoKSA9PiB7IGZldGNoUGF5bWVudFRhZ3MoKTsgfSkuc3Vic2NyaWJlKCk7CiAgICAgIGNvbnN0IHBheW1lbnRSZWNpcGllbnRDaGFubmVsID0gc3VwYWJhc2UuY2hhbm5lbCgncGF5bWVudC1yZWNpcGllbnQtJyArIHVzZXJQcm9maWxlLnVzZXJuYW1lKS5vbigncG9zdGdyZXNfY2hhbmdlcycsIHsgZXZlbnQ6ICcqJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdwYXltZW50X3RhZ3MnLCBmaWx0ZXI6ICdyZWNpcGllbnRfdXNlcm5hbWU9ZXEuJyArIHVzZXJQcm9maWxlLnVzZXJuYW1lIH0sICgpID0+IHsgZmV0Y2hJbmNvbWluZ1BheW1lbnRzKCk7IH0pLnN1YnNjcmliZSgpOwoKICAgICAgcmV0dXJuICgpID0+IHsgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChjaGFubmVsKTsgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChkZWxlZ2F0b3JDaGFubmVsKTsgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChwYXltZW50U2VuZGVyQ2hhbm5lbCk7IHN1cGFiYXNlLnJlbW92ZUNoYW5uZWwocGF5bWVudFJlY2lwaWVudENoYW5uZWwpOyB9OwogICAgfSwgW3N1cGFVc2VyLCB1c2VyUHJvZmlsZV0pOwoKICAgIGNvbnN0IG1hcmtOb3RpZlJlYWQgPSBhc3luYyAoaWQpID0+IHsKICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdub3RpZmljYXRpb25zJykudXBkYXRlKHsgaXNfcmVhZDogdHJ1ZSB9KS5lcSgnaWQnLCBpZCk7CiAgICAgICAgc2V0Tm90aWZpY2F0aW9ucyhwcmV2ID0+IHByZXYubWFwKG4gPT4gbi5pZCA9PT0gaWQgPyB7IC4uLm4sIGlzX3JlYWQ6IHRydWUgfSA6IG4pKTsKICAgIH07CgogICAgY29uc3QgdW5yZWFkQ291bnQgPSBub3RpZmljYXRpb25zLmZpbHRlcihuID0+ICFuLmlzX3JlYWQpLmxlbmd0aDsKCiAgICBjb25zdCBoYW5kbGVBdXRoID0gKHVzZXIsIHByb2ZpbGUpID0+IHsKICAgICAgICBzZXRTdXBhVXNlcih1c2VyKTsKICAgICAgICBzZXRVc2VyUHJvZmlsZShwcm9maWxlKTsKICAgICAgICBzYXZlKCdwcm9maWxlJywgcHJvZmlsZSk7CiAgICB9OwoKICAgIGNvbnN0IGhhbmRsZURlbGVnYXRlID0gYXN5bmMgKHRhc2tJbmZvKSA9PiB7CiAgICAgICAgaWYgKCFzdXBhVXNlciB8fCAhdXNlclByb2ZpbGUpIHJldHVybjsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlRGVsZWdhdGUgY2FsbGVkIHdpdGg6JywgSlNPTi5zdHJpbmdpZnkodGFza0luZm8pKTsKICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykuaW5zZXJ0KHsKICAgICAgICAgICAgICAgIGRlbGVnYXRvcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICAgICAgICByZWNpcGllbnRfdXNlcm5hbWU6IHRhc2tJbmZvLnJlY2lwaWVudF91c2VybmFtZSwKICAgICAgICAgICAgICAgIHRhc2tfdGV4dDogdGFza0luZm8udGFza190ZXh0LAogICAgICAgICAgICAgICAgdGFza190eXBlOiB0YXNrSW5mby50YXNrX3R5cGUsCiAgICAgICAgICAgICAgICBwcmlvcml0eTogdGFza0luZm8ucHJpb3JpdHkgfHwgJ21lZGl1bScsCiAgICAgICAgICAgICAgICBkZWFkbGluZTogdGFza0luZm8uZGVhZGxpbmUgfHwgbnVsbCwKICAgICAgICAgICAgICAgIGRlbGVnYXRvcl9uYW1lOiB1c2VyUHJvZmlsZS5uYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciByZWNpcGllbnQKICAgICAgICAgICAgbGV0IHJlY2lwaWVudElkID0gdGFza0luZm8uZGVsZWdhdGVkX3RvOwogICAgICAgICAgICBjb25zb2xlLmxvZygncmVjaXBpZW50SWQgZnJvbSBkZWxlZ2F0ZWRfdG86JywgcmVjaXBpZW50SWQsICd1c2VybmFtZTonLCB0YXNrSW5mby5yZWNpcGllbnRfdXNlcm5hbWUpOwogICAgICAgICAgICBpZiAoIXJlY2lwaWVudElkICYmIHRhc2tJbmZvLnJlY2lwaWVudF91c2VybmFtZSkgewogICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogclVzZXIgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2ZpbGVzJykuc2VsZWN0KCdpZCcpLmVxKCd1c2VybmFtZScsIHRhc2tJbmZvLnJlY2lwaWVudF91c2VybmFtZSkuc2luZ2xlKCk7CiAgICAgICAgICAgICAgaWYgKHJVc2VyKSByZWNpcGllbnRJZCA9IHJVc2VyLmlkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZWNpcGllbnRJZCkgewogICAgICAgICAgICAgIGNvbnN0IG5vdGlmUmVzdWx0ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7CiAgICAgICAgICAgICAgICB1c2VyX2lkOiByZWNpcGllbnRJZCwKICAgICAgICAgICAgICAgIHRpdGxlOiAnTmV3IHRhc2sgZGVsZWdhdGVkIHRvIHlvdScsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiB1c2VyUHJvZmlsZS5uYW1lICsgJyBhc3NpZ25lZCB5b3U6ICcgKyB0YXNrSW5mby50YXNrX3RleHQsCiAgICAgICAgICAgICAgICBzZW5kZXJfbmFtZTogdXNlclByb2ZpbGUubmFtZSwKICAgICAgICAgICAgICAgIGlzX3JlYWQ6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBpbnNlcnQgcmVzdWx0OicsIEpTT04uc3RyaW5naWZ5KG5vdGlmUmVzdWx0KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCdEZWxlZ2F0aW9uIHN5bmMgZXJyb3I6JywgZSk7IH0KICAgIH07CgogICAgY29uc3QgbWFya0RlbGVnYXRlZERvbmUgPSBhc3luYyAodGFza0lkKSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykudXBkYXRlKHsgc3RhdHVzOiAnY29tcGxldGVkJyB9KS5lcSgnaWQnLCB0YXNrSWQpOwogICAgICAgICAgICBzZXREZWxlZ2F0ZWRCeU1lKHByZXYgPT4gcHJldi5tYXAoZCA9PiBkLmlkID09PSB0YXNrSWQgPyB7IC4uLmQsIHN0YXR1czogJ2NvbXBsZXRlZCcgfSA6IGQpKTsKICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCdNYXJrIGRvbmUgZXJyb3I6JywgZSk7IH0KICAgIH07CgogICAgLy8gUmVjaXBpZW50IG1hcmtzIHRoZWlyIGFjY2VwdGVkIHRhc2sgYXMgY29tcGxldGVkIChhdXRvLWZsb3dzIHRvIGRlbGVnYXRvcidzIGJvYXJkcm9vbSkKICAgIGNvbnN0IHRvZ2dsZVJlY2VpdmVkVGFzayA9IGFzeW5jICh0YXNrKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykudXBkYXRlKHsgc3RhdHVzOiAnY29tcGxldGVkJyB9KS5lcSgnaWQnLCB0YXNrLmlkKTsKICAgICAgICBzZXREZWxlZ2F0ZWRUb01lKHByZXYgPT4gcHJldi5tYXAoZCA9PiBkLmlkID09PSB0YXNrLmlkID8geyAuLi5kLCBzdGF0dXM6ICdjb21wbGV0ZWQnIH0gOiBkKSk7CiAgICAgICAgLy8gTm90aWZ5IHRoZSBkZWxlZ2F0b3IKICAgICAgICBpZiAobmV3U3RhdHVzID09PSAnY29tcGxldGVkJyAmJiB0YXNrLmRlbGVnYXRvcl9pZCkgewogICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7CiAgICAgICAgICAgIHVzZXJfaWQ6IHRhc2suZGVsZWdhdG9yX2lkLAogICAgICAgICAgICB0aXRsZTogJ1Rhc2sgY29tcGxldGVkIScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICh1c2VyUHJvZmlsZS5uYW1lIHx8IHVzZXJQcm9maWxlLmZ1bGxfbmFtZSB8fCB1c2VyUHJvZmlsZS51c2VybmFtZSkgKyAnIGNvbXBsZXRlZDogJyArIHRhc2sudGFza190ZXh0LAogICAgICAgICAgICBzZW5kZXJfbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5mdWxsX25hbWUgfHwgdXNlclByb2ZpbGUudXNlcm5hbWUsCiAgICAgICAgICAgIHJlbGF0ZWRfdGFza19pZDogdGFzay5pZCwKICAgICAgICAgICAgaXNfcmVhZDogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygnVG9nZ2xlIHJlY2VpdmVkIHRhc2sgZXJyb3I6JywgZSk7IH0KICAgIH07CgogIGNvbnN0IGFjY2VwdFBheW1lbnRUYWcgPSBhc3luYyAodGFnKSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCBuZXdJZCA9ICdpbmNfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgNyk7CiAgICAgIGNvbnN0IG5ld1N0cmVhbSA9IHsKICAgICAgICBpZDogbmV3SWQsCiAgICAgICAgbmFtZTogdGFnLmNvbXBhbnlfbmFtZSB8fCB0YWcuc2VuZGVyX25hbWUsCiAgICAgICAgdHlwZTogdGFnLnBheW1lbnRfdHlwZSwKICAgICAgICBtb250aGx5OiBOdW1iZXIodGFnLmFtb3VudCksCiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJywKICAgICAgICBub3RlOiAnVGFnZ2VkIGJ5ICcgKyB0YWcuc2VuZGVyX25hbWUsCiAgICAgICAgY29tcGFueTogdGFnLmNvbXBhbnlfbmFtZSB8fCAnJywKICAgICAgICByb2xlOiB0YWcucGF5bWVudF90eXBlLAogICAgICAgIHBheW1lbnRDeWNsZTogdGFnLmZyZXF1ZW5jeSwKICAgICAgICBuZXh0UGF5bWVudDogJycsCiAgICAgICAgbGFzdFBheW1lbnQ6ICcnLAogICAgICAgIHBheW1lbnRzOiBbXSwKICAgICAgICB0cmVuZDogMAogICAgICB9OwogICAgICBzZXRJbmNvbWVTdHJlYW1zKHByZXYgPT4gWy4uLnByZXYsIG5ld1N0cmVhbV0pOwogICAgICBpZiAoc3VwYWJhc2UpIHsKICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdpbmNvbWVfc3RyZWFtcycpLmluc2VydCh7CiAgICAgICAgICBsb2NhbF9pZDogbmV3SWQsCiAgICAgICAgICBvd25lcl9pZDogKGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpKS5kYXRhLnVzZXIuaWQsCiAgICAgICAgICBuYW1lOiBuZXdTdHJlYW0ubmFtZSwKICAgICAgICAgIHR5cGU6IG5ld1N0cmVhbS50eXBlLAogICAgICAgICAgbW9udGhseTogbmV3U3RyZWFtLm1vbnRobHksCiAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLAogICAgICAgICAgbm90ZTogbmV3U3RyZWFtLm5vdGUsCiAgICAgICAgICBleHRyYV9kYXRhOiB7IGNvbXBhbnk6IG5ld1N0cmVhbS5jb21wYW55LCByb2xlOiBuZXdTdHJlYW0ucm9sZSwgcGF5bWVudEN5Y2xlOiBuZXdTdHJlYW0ucGF5bWVudEN5Y2xlLCB0YWdnZWRfYnk6IHRhZy5zZW5kZXJfbmFtZSwgcGF5bWVudF90YWdfaWQ6IHRhZy5pZCB9CiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncGF5bWVudF90YWdzJykudXBkYXRlKHsgc3RhdHVzOiAnYWNjZXB0ZWQnIH0pLmVxKCdpZCcsIHRhZy5pZCk7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7CiAgICAgICAgICB1c2VyX2lkOiB0YWcuc2VuZGVyX2lkLAogICAgICAgICAgdGl0bGU6ICdQYXltZW50IGFjY2VwdGVkIScsCiAgICAgICAgICBtZXNzYWdlOiAodXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5mdWxsX25hbWUgfHwgdXNlclByb2ZpbGUudXNlcm5hbWUpICsgJyBhY2NlcHRlZCB5b3VyICcgKyBOdW1iZXIodGFnLmFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHRhZy5wYXltZW50X3R5cGUgKyAnIHRhZycsCiAgICAgICAgICBzZW5kZXJfbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5mdWxsX25hbWUgfHwgdXNlclByb2ZpbGUudXNlcm5hbWUsCiAgICAgICAgICBpc19yZWFkOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHNldEluY29taW5nUGF5bWVudHMocHJldiA9PiBwcmV2Lm1hcChwID0+IHAuaWQgPT09IHRhZy5pZCA/IHsgLi4ucCwgc3RhdHVzOiAnYWNjZXB0ZWQnIH0gOiBwKSk7CiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCdBY2NlcHQgcGF5bWVudCB0YWcgZXJyb3I6JywgZSk7IH0KICB9OwoKICBjb25zdCBkZWNsaW5lUGF5bWVudFRhZyA9IGFzeW5jICh0YWcpID0+IHsKICAgIHRyeSB7CiAgICAgIGlmIChzdXBhYmFzZSkgewogICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3BheW1lbnRfdGFncycpLnVwZGF0ZSh7IHN0YXR1czogJ2RlY2xpbmVkJyB9KS5lcSgnaWQnLCB0YWcuaWQpOwogICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ25vdGlmaWNhdGlvbnMnKS5pbnNlcnQoewogICAgICAgICAgdXNlcl9pZDogdGFnLnNlbmRlcl9pZCwKICAgICAgICAgIHRpdGxlOiAnUGF5bWVudCBkZWNsaW5lZCcsCiAgICAgICAgICBtZXNzYWdlOiAodXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5mdWxsX25hbWUgfHwgdXNlclByb2ZpbGUudXNlcm5hbWUpICsgJyBkZWNsaW5lZCB5b3VyICcgKyBOdW1iZXIodGFnLmFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHRhZy5wYXltZW50X3R5cGUgKyAnIHRhZycsCiAgICAgICAgICBzZW5kZXJfbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS5mdWxsX25hbWUgfHwgdXNlclByb2ZpbGUudXNlcm5hbWUsCiAgICAgICAgICBpc19yZWFkOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHNldEluY29taW5nUGF5bWVudHMocHJldiA9PiBwcmV2Lm1hcChwID0+IHAuaWQgPT09IHRhZy5pZCA/IHsgLi4ucCwgc3RhdHVzOiAnZGVjbGluZWQnIH0gOiBwKSk7CiAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKCdEZWNsaW5lIHBheW1lbnQgdGFnIGVycm9yOicsIGUpOyB9CiAgfTsKCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IGxpdmVCcmllZmluZyA9IGdlbmVyYXRlTGl2ZUJyaWVmaW5nKCk7CiAgICAgICAgc2V0QnJpZWZpbmcobGl2ZUJyaWVmaW5nKTsKICAgIH0sIFtdKTsKCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGlmIChlbWJlZGRlZE5hdGlvbiAmJiBlbWJlZGRlZE5hdGlvbi5nZW5lcmF0ZWRBdCkgewogICAgICAgICAgICBjb25zdCBzdG9yZWROID0gbmF0aW9uQnJpZWZpbmc7CiAgICAgICAgICAgIGlmICghc3RvcmVkTiB8fCAhc3RvcmVkTi5nZW5lcmF0ZWRBdCB8fCBlbWJlZGRlZE5hdGlvbi5nZW5lcmF0ZWRBdCA+IHN0b3JlZE4uZ2VuZXJhdGVkQXQpIHsKICAgICAgICAgICAgICAgIHNldE5hdGlvbkJyaWVmaW5nKGVtYmVkZGVkTmF0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmZXRjaExpdmVOYXRpb25EYXRhKCk7CiAgICB9LCBbXSk7CgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAobW9kYWwpIHJldHVybjsKICAgICAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHNldEN1cnJlbnRUaW1lKG5ldyBEYXRlKCkpLCA2MDAwMCk7CiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgfSwgW21vZGFsXSk7CgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBhcmNoaXZlQ29tcGxldGVkVGFza3MgPSAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IHF1aWNrVGFza3MuZmlsdGVyKHQgPT4gY29tcGxldGVkVGFza3NbdC5pZF0pOwogICAgICAgICAgICBpZiAoY29tcGxldGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBhcmNoaXZlRW50cnkgPSB7CiAgICAgICAgICAgICAgICBkYXRlOiB0b2RheSwKICAgICAgICAgICAgICAgIHRhc2tzOiBjb21wbGV0ZWQubWFwKHQgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi50LAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICB9OwogICAgICAgICAgICBzZXRUYXNrSGlzdG9yeShwcmV2ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJldi5maW5kKGggPT4gaC5kYXRlID09PSB0b2RheSk7CiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldi5tYXAoaCA9PiBoLmRhdGUgPT09IHRvZGF5CiAgICAgICAgICAgICAgICAgICAgICAgID8geyAuLi5oLCB0YXNrczogWy4uLmgudGFza3MsIC4uLmFyY2hpdmVFbnRyeS50YXNrc10gfQogICAgICAgICAgICAgICAgICAgICAgICA6IGgKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIFthcmNoaXZlRW50cnksIC4uLnByZXZdOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gUmVtb3ZlIGFyY2hpdmVkIHRhc2tzIGZyb20gYWN0aXZlIGxpc3QKICAgICAgICAgICAgY29uc3QgY29tcGxldGVkSWRzID0gY29tcGxldGVkLm1hcCh0ID0+IHQuaWQpOwogICAgICAgICAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gcHJldi5maWx0ZXIodCA9PiAhY29tcGxldGVkSWRzLmluY2x1ZGVzKHQuaWQpKSk7CiAgICAgICAgICAgIHNldENvbXBsZXRlZFRhc2tzKHByZXYgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9OwogICAgICAgICAgICAgICAgY29tcGxldGVkSWRzLmZvckVhY2goaWQgPT4gZGVsZXRlIG5leHRbaWRdKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IG1pZG5pZ2h0ID0gbmV3IERhdGUobm93KTsKICAgICAgICBtaWRuaWdodC5zZXRIb3VycygyNCwgMCwgMCwgMCk7CiAgICAgICAgY29uc3QgbXNVbnRpbE1pZG5pZ2h0ID0gbWlkbmlnaHQgLSBub3c7CgogICAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGFyY2hpdmVDb21wbGV0ZWRUYXNrcygpOwogICAgICAgICAgICAvLyBUaGVuIHNldCBpbnRlcnZhbCBmb3Igc3Vic2VxdWVudCBkYXlzCiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoYXJjaGl2ZUNvbXBsZXRlZFRhc2tzLCAyNCAqIDYwICogNjAgKiAxMDAwKTsKICAgICAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgICAgIH0sIG1zVW50aWxNaWRuaWdodCk7CgogICAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpOwogICAgfSwgW3F1aWNrVGFza3MsIGNvbXBsZXRlZFRhc2tzXSk7CgogICAgY29uc3QgZ3JlZXRpbmcgPSAoKSA9PiB7IGNvbnN0IGggPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCk7IHJldHVybiBoIDwgMTIgPyAnR29vZCBtb3JuaW5nJyA6IGggPCAxNyA/ICdHb29kIGFmdGVybm9vbicgOiAnR29vZCBldmVuaW5nJzsgfTsKICAgIGNvbnN0IGZtdERhdGUgPSAoZCkgPT4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnbG9uZycsIG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnLCB5ZWFyOiAnbnVtZXJpYycgfSkuZm9ybWF0KGQpOwogICAgY29uc3QgZm10TmFpcmEgPSAodikgPT4gU3RyaW5nLmZyb21DaGFyQ29kZSg4MzU4KSArIChOdW1iZXIodikgPj0gMTAwMDAwMCA/IChOdW1iZXIodikgLyAxMDAwMDAwKS50b0ZpeGVkKDEpICsgJ00nIDogTnVtYmVyKHYpID49IDEwMDAgPyAoTnVtYmVyKHYpIC8gMTAwMCkudG9GaXhlZCgwKSArICdLJyA6IE51bWJlcih2KS50b0xvY2FsZVN0cmluZygpKTsKICAgIGNvbnN0IHRvdGFsTW9udGhseSA9IGluY29tZVN0cmVhbXMucmVkdWNlKChzLCBpKSA9PiBzICsgTnVtYmVyKGkubW9udGhseSB8fCAwKSwgMCk7CiAgICBjb25zdCB0b3RhbEV4cGVuc2VzID0gZXhwZW5zZXMucmVkdWNlKChzLCBlKSA9PiB7CiAgICAgICAgY29uc3QgYW10ID0gTnVtYmVyKGUuYW1vdW50IHx8IDApOwogICAgICAgIGlmIChlLmZyZXF1ZW5jeSA9PT0gJ1dlZWtseScpIHJldHVybiBzICsgYW10ICogNC4zMzsKICAgICAgICBpZiAoZS5mcmVxdWVuY3kgPT09ICdRdWFydGVybHknKSByZXR1cm4gcyArIGFtdCAvIDM7CiAgICAgICAgaWYgKGUuZnJlcXVlbmN5ID09PSAnQW5udWFsJykgcmV0dXJuIHMgKyBhbXQgLyAxMjsKICAgICAgICBpZiAoZS5mcmVxdWVuY3kgPT09ICdPbmUtdGltZScpIHJldHVybiBzOwogICAgICAgIHJldHVybiBzICsgYW10OwogICAgfSwgMCk7CiAgICBjb25zdCBuZXRNb250aGx5ID0gdG90YWxNb250aGx5IC0gdG90YWxFeHBlbnNlczsKICAgIGNvbnN0IG5leHRQYXltZW50RHVlID0gdXNlTWVtbygoKSA9PiB7CiAgICAgICAgY29uc3QgdXBjb21pbmcgPSBpbmNvbWVTdHJlYW1zLmZpbHRlcihzID0+IHMubmV4dFBheW1lbnQpLnNvcnQoKGEsIGIpID0+IGEubmV4dFBheW1lbnQubG9jYWxlQ29tcGFyZShiLm5leHRQYXltZW50KSk7CiAgICAgICAgaWYgKHVwY29taW5nLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHVwY29taW5nWzBdOwogICAgfSwgW2luY29tZVN0cmVhbXNdKTsKCiAgICBjb25zdCBub3RpZnlEZWxlZ2F0b3JPbkNvbXBsZXRpb24gPSBhc3luYyAodGFzaykgPT4gewogICAgaWYgKCF0YXNrLmRlbGVnYXRlZEZyb20gfHwgIXN1cGFiYXNlIHx8ICF1c2VyUHJvZmlsZSkgcmV0dXJuOwogICAgdHJ5IHsKICAgICAgLy8gQXV0by11cGRhdGUgZGVsZWdhdGVkX3Rhc2tzIHN0YXR1cyB0byBjb21wbGV0ZWQgaW4gU3VwYWJhc2UKICAgICAgY29uc3QgeyBkYXRhOiBtYXRjaGVkVGFza3MgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ2RlbGVnYXRlZF90YXNrcycpLnNlbGVjdCgnaWQnKS5lcSgndGFza190ZXh0JywgdGFzay50YXNrIHx8IHRhc2sudGFza190ZXh0KS5lcSgncmVjaXBpZW50X3VzZXJuYW1lJywgdXNlclByb2ZpbGUudXNlcm5hbWUpLm5lcSgnc3RhdHVzJywgJ2NvbXBsZXRlZCcpLmxpbWl0KDEpOwogICAgICBpZiAobWF0Y2hlZFRhc2tzICYmIG1hdGNoZWRUYXNrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykudXBkYXRlKHsgc3RhdHVzOiAnY29tcGxldGVkJyB9KS5lcSgnaWQnLCBtYXRjaGVkVGFza3NbMF0uaWQpOwogICAgICB9CiAgICAgIGNvbnN0IHsgZGF0YTogZGVsZWdhdG9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnaWQnKS5lcSgnZnVsbF9uYW1lJywgdGFzay5kZWxlZ2F0ZWRGcm9tKS5zaW5nbGUoKTsKICAgICAgaWYgKCFkZWxlZ2F0b3IpIHsKICAgICAgICBjb25zdCB7IGRhdGE6IGQyIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgnaWQnKS5lcSgndXNlcm5hbWUnLCB0YXNrLmRlbGVnYXRlZEZyb20pLnNpbmdsZSgpOwogICAgICAgIGlmIChkMikgewogICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7IHVzZXJfaWQ6IGQyLmlkLCB0aXRsZTogJ1Rhc2sgY29tcGxldGVkIScsIG1lc3NhZ2U6ICh1c2VyUHJvZmlsZS5uYW1lIHx8IHVzZXJQcm9maWxlLnVzZXJuYW1lKSArICcgY29tcGxldGVkOiAnICsgKHRhc2sudGFzayB8fCB0YXNrLnRhc2tfdGV4dCB8fCAnJyksIHNlbmRlcl9uYW1lOiB1c2VyUHJvZmlsZS5uYW1lIHx8IHVzZXJQcm9maWxlLnVzZXJuYW1lLCBpc19yZWFkOiBmYWxzZSB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7IHVzZXJfaWQ6IGRlbGVnYXRvci5pZCwgdGl0bGU6ICdUYXNrIGNvbXBsZXRlZCEnLCBtZXNzYWdlOiAodXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS51c2VybmFtZSkgKyAnIGNvbXBsZXRlZDogJyArICh0YXNrLnRhc2sgfHwgdGFzay50YXNrX3RleHQgfHwgJycpLCBzZW5kZXJfbmFtZTogdXNlclByb2ZpbGUubmFtZSB8fCB1c2VyUHJvZmlsZS51c2VybmFtZSwgaXNfcmVhZDogZmFsc2UgfSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coJ0NvbXBsZXRpb24gbm90aWZ5IGVycm9yOicsIGUpOyB9CiAgfTsKCiAgY29uc3QgdG9nZ2xlUHJvamVjdENvbGxhcHNlID0gKHBpZCkgPT4gewogICAgc2V0Q29sbGFwc2VkUHJvamVjdHMocHJldiA9PiAoeyAuLi5wcmV2LCBbcGlkXTogIXByZXZbcGlkXSB9KSk7CiAgfTsKCiAgY29uc3QgdG9nZ2xlVGFzayA9IChpZCkgPT4gewogICAgY29uc3Qgd2FzQ29tcGxldGVkID0gY29tcGxldGVkVGFza3NbaWRdOwogICAgc2V0Q29tcGxldGVkVGFza3MocCA9PiAoeyAuLi5wLCBbaWRdOiAhcFtpZF0gfSkpOwogICAgaWYgKCF3YXNDb21wbGV0ZWQpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgY29uc3QgY29tcGxldGVkVGFzayA9IHF1aWNrVGFza3MuZmluZCh0ID0+IHQuaWQgPT09IGlkKTsKICAgICAgICBpZiAoY29tcGxldGVkVGFzayAmJiBjb21wbGV0ZWRUYXNrLmRlbGVnYXRlZEZyb20pIG5vdGlmeURlbGVnYXRvck9uQ29tcGxldGlvbihjb21wbGV0ZWRUYXNrKTsKICAgICAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gewogICAgICAgICAgY29uc3QgdGFzayA9IHByZXYuZmluZCh0ID0+IHQuaWQgPT09IGlkKTsKICAgICAgICAgIGlmICghdGFzaykgcmV0dXJuIHByZXY7CiAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgICAgY29uc3QgYXJjaGl2ZUVudHJ5ID0geyAuLi50YXNrLCBjb21wbGV0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07CiAgICAgICAgICBzZXRUYXNrSGlzdG9yeShwaCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcGguZmluZChoID0+IGguZGF0ZSA9PT0gdG9kYXkpOwogICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHJldHVybiBwaC5tYXAoaCA9PiBoLmRhdGUgPT09IHRvZGF5ID8geyAuLi5oLCB0YXNrczogWy4uLmgudGFza3MsIGFyY2hpdmVFbnRyeV0gfSA6IGgpOwogICAgICAgICAgICByZXR1cm4gW3sgZGF0ZTogdG9kYXksIHRhc2tzOiBbYXJjaGl2ZUVudHJ5XSB9LCAuLi5waF07CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBwcmV2LmZpbHRlcih0ID0+IHQuaWQgIT09IGlkKTsKICAgICAgICB9KTsKICAgICAgICBzZXRDb21wbGV0ZWRUYXNrcyhwID0+IHsgY29uc3QgbmV4dCA9IHsgLi4ucCB9OyBkZWxldGUgbmV4dFtpZF07IHJldHVybiBuZXh0OyB9KTsKICAgICAgfSwgMTUwMCk7CiAgICB9CiAgfTsKCiAgY29uc3QgYWNjZXB0VG9EYWlseSA9IGFzeW5jICh0YXNrKSA9PiB7CiAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gWy4uLnByZXYsIHsKICAgICAgaWQ6IG5ld0lkKCksCiAgICAgIHRhc2s6IHRhc2sudGFza190ZXh0LAogICAgICBwcmlvcml0eTogdGFzay5wcmlvcml0eSB8fCAnbWVkaXVtJywKICAgICAgZHVlOiAnVG9kYXknLAogICAgICBwcm9qZWN0SWQ6IG51bGwsCiAgICAgIGRlbGVnYXRlZFRvOiAnJywKICAgICAgZGVsZWdhdGVkRnJvbTogdGFzay5kZWxlZ2F0b3JfbmFtZQogICAgfV0pOwogICAgdHJ5IHsKICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnZGVsZWdhdGVkX3Rhc2tzJykudXBkYXRlKHsgc3RhdHVzOiAnYWNjZXB0ZWQnIH0pLmVxKCdpZCcsIHRhc2suaWQpOwogICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZygnQWNjZXB0IHN5bmMgZXJyb3I6JywgZSk7IH0KICAgIHNldERlbGVnYXRlZFRvTWUocHJldiA9PiBwcmV2Lm1hcChkID0+IGQuaWQgPT09IHRhc2suaWQgPyB7Li4uZCwgc3RhdHVzOiAnYWNjZXB0ZWQnfSA6IGQpKTsKICAgIHNldEFjY2VwdGluZ1Rhc2sobnVsbCk7CiAgfTsKCiAgY29uc3QgYWNjZXB0VG9XZWVrbHkgPSBhc3luYyAodGFzaykgPT4gewogICAgc2V0V2Vla2x5UGxhbihwcmV2ID0+IFsuLi5wcmV2LCB7CiAgICAgIGlkOiBuZXdJZCgpLAogICAgICB0YXNrOiB0YXNrLnRhc2tfdGV4dCwKICAgICAgcHJvamVjdElkOiBudWxsLAogICAgICBzdWJ0YXNrczogW10sCiAgICAgIGRlYWRsaW5lOiB0YXNrLmRlYWRsaW5lIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLAogICAgICBkZWxlZ2F0ZWRUbzogJycsCiAgICAgIGRlbGVnYXRlZEZyb206IHRhc2suZGVsZWdhdG9yX25hbWUKICAgIH1dKTsKICAgIHRyeSB7CiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2RlbGVnYXRlZF90YXNrcycpLnVwZGF0ZSh7IHN0YXR1czogJ2FjY2VwdGVkJyB9KS5lcSgnaWQnLCB0YXNrLmlkKTsKICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5sb2coJ0FjY2VwdCBzeW5jIGVycm9yOicsIGUpOyB9CiAgICBzZXREZWxlZ2F0ZWRUb01lKHByZXYgPT4gcHJldi5tYXAoZCA9PiBkLmlkID09PSB0YXNrLmlkID8gey4uLmQsIHN0YXR1czogJ2FjY2VwdGVkJ30gOiBkKSk7CiAgICBzZXRBY2NlcHRpbmdUYXNrKG51bGwpOwogIH07CiAgY29uc3QgdG9nZ2xlV2Vla2x5ID0gKGlkKSA9PiB7CiAgICBjb25zdCB3YXNDb21wbGV0ZWQgPSBjb21wbGV0ZWRXZWVrbHlbaWRdOwogICAgc2V0Q29tcGxldGVkV2Vla2x5KHAgPT4gKHsgLi4ucCwgW2lkXTogIXBbaWRdIH0pKTsKICAgIGlmICghd2FzQ29tcGxldGVkKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGNvbnN0IGNvbXBsZXRlZFdlZWtseVRhc2sgPSB3ZWVrbHlQbGFuLmZpbmQodCA9PiB0LmlkID09PSBpZCk7CiAgICAgICAgaWYgKGNvbXBsZXRlZFdlZWtseVRhc2sgJiYgY29tcGxldGVkV2Vla2x5VGFzay5kZWxlZ2F0ZWRGcm9tKSBub3RpZnlEZWxlZ2F0b3JPbkNvbXBsZXRpb24oY29tcGxldGVkV2Vla2x5VGFzayk7CiAgICAgICAgc2V0V2Vla2x5UGxhbihwcmV2ID0+IHsKICAgICAgICAgIGNvbnN0IHRhc2sgPSBwcmV2LmZpbmQodCA9PiB0LmlkID09PSBpZCk7CiAgICAgICAgICBpZiAoIXRhc2spIHJldHVybiBwcmV2OwogICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgIGNvbnN0IGFyY2hpdmVFbnRyeSA9IHsgLi4udGFzaywgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgc291cmNlOiAnd2Vla2x5JyB9OwogICAgICAgICAgc2V0VGFza0hpc3RvcnkocGggPT4gewogICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHBoLmZpbmQoaCA9PiBoLmRhdGUgPT09IHRvZGF5KTsKICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gcGgubWFwKGggPT4gaC5kYXRlID09PSB0b2RheSA/IHsgLi4uaCwgdGFza3M6IFsuLi5oLnRhc2tzLCBhcmNoaXZlRW50cnldIH0gOiBoKTsKICAgICAgICAgICAgcmV0dXJuIFt7IGRhdGU6IHRvZGF5LCB0YXNrczogW2FyY2hpdmVFbnRyeV0gfSwgLi4ucGhdOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gcHJldi5maWx0ZXIodCA9PiB0LmlkICE9PSBpZCk7CiAgICAgICAgfSk7CiAgICAgICAgc2V0Q29tcGxldGVkV2Vla2x5KHAgPT4geyBjb25zdCBuZXh0ID0geyAuLi5wIH07IGRlbGV0ZSBuZXh0W2lkXTsgcmV0dXJuIG5leHQ7IH0pOwogICAgICB9LCAxNTAwKTsKICAgIH0KICB9OwogIGNvbnN0IHRvZ2dsZVN1YnRhc2sgPSAodGFza0lkLCBzdWJ0YXNrSWQpID0+IHsKICAgIHNldFdlZWtseVBsYW4ocHJldiA9PiBwcmV2Lm1hcCh3ID0+IHsKICAgICAgaWYgKHcuaWQgIT09IHRhc2tJZCkgcmV0dXJuIHc7CiAgICAgIHJldHVybiB7IC4uLncsIHN1YnRhc2tzOiAody5zdWJ0YXNrcyB8fCBbXSkubWFwKHMgPT4gcy5pZCA9PT0gc3VidGFza0lkID8geyAuLi5zLCBkb25lOiAhcy5kb25lIH0gOiBzKSB9OwogICAgfSkpOwogIH07CiAgY29uc3QgYXJjaGl2ZUNvbXBsZXRlZCA9ICgpID0+IHsKICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IHF1aWNrVGFza3MuZmlsdGVyKHQgPT4gY29tcGxldGVkVGFza3NbdC5pZF0pOwogICAgICAgIGlmIChjb21wbGV0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgY29uc3QgYXJjaGl2ZUVudHJ5ID0gewogICAgICAgICAgICBkYXRlOiB0b2RheSwKICAgICAgICAgICAgdGFza3M6IGNvbXBsZXRlZC5tYXAodCA9PiAoeyAuLi50LCBjb21wbGV0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pKQogICAgICAgIH07CiAgICAgICAgc2V0VGFza0hpc3RvcnkocHJldiA9PiB7CiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJldi5maW5kKGggPT4gaC5kYXRlID09PSB0b2RheSk7CiAgICAgICAgICAgIGlmIChleGlzdGluZykgewogICAgICAgICAgICAgICAgcmV0dXJuIHByZXYubWFwKGggPT4gaC5kYXRlID09PSB0b2RheSA/IHsgLi4uaCwgdGFza3M6IFsuLi5oLnRhc2tzLCAuLi5hcmNoaXZlRW50cnkudGFza3NdIH0gOiBoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW2FyY2hpdmVFbnRyeSwgLi4ucHJldl07CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgY29tcGxldGVkSWRzID0gY29tcGxldGVkLm1hcCh0ID0+IHQuaWQpOwogICAgICAgIHNldFF1aWNrVGFza3MocHJldiA9PiBwcmV2LmZpbHRlcih0ID0+ICFjb21wbGV0ZWRJZHMuaW5jbHVkZXModC5pZCkpKTsKICAgICAgICBzZXRDb21wbGV0ZWRUYXNrcyhwcmV2ID0+IHsKICAgICAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9OwogICAgICAgICAgICBjb21wbGV0ZWRJZHMuZm9yRWFjaChpZCA9PiBkZWxldGUgbmV4dFtpZF0pOwogICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICB9KTsKICAgIH07CiAgICBjb25zdCBnZXRTdWJQcm9ncmVzcyA9ICh3KSA9PiB7CiAgICAgICAgaWYgKCF3LnN1YnRhc2tzIHx8IHcuc3VidGFza3MubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBkb25lID0gdy5zdWJ0YXNrcy5maWx0ZXIocyA9PiBzLmRvbmUpLmxlbmd0aDsKICAgICAgICByZXR1cm4geyBkb25lLCB0b3RhbDogdy5zdWJ0YXNrcy5sZW5ndGgsIHBjdDogTWF0aC5yb3VuZCgoZG9uZSAvIHcuc3VidGFza3MubGVuZ3RoKSAqIDEwMCkgfTsKICAgIH07CgogICAgY29uc3QgZ2V0UHJvamVjdFByb2dyZXNzID0gdXNlQ2FsbGJhY2soKHByb2plY3RJZCkgPT4gewogICAgICAgIGNvbnN0IGxpbmtlZFdlZWtseSA9IHdlZWtseVBsYW4uZmlsdGVyKHcgPT4gdy5wcm9qZWN0SWQgPT09IHByb2plY3RJZCk7CiAgICAgICAgY29uc3QgbGlua2VkVGFza3MgPSBxdWlja1Rhc2tzLmZpbHRlcih0ID0+IHQucHJvamVjdElkID09PSBwcm9qZWN0SWQpOwogICAgICAgIGlmIChsaW5rZWRXZWVrbHkubGVuZ3RoID09PSAwICYmIGxpbmtlZFRhc2tzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CiAgICAgICAgbGV0IHRvdGFsVW5pdHMgPSAwLCBkb25lVW5pdHMgPSAwOwogICAgICAgIGxpbmtlZFdlZWtseS5mb3JFYWNoKHcgPT4gewogICAgICAgICAgICBpZiAody5zdWJ0YXNrcyAmJiB3LnN1YnRhc2tzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHRvdGFsVW5pdHMgKz0gdy5zdWJ0YXNrcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBkb25lVW5pdHMgKz0gdy5zdWJ0YXNrcy5maWx0ZXIocyA9PiBzLmRvbmUpLmxlbmd0aDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRvdGFsVW5pdHMgKz0gMTsKICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZWRXZWVrbHlbdy5pZF0pIGRvbmVVbml0cyArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGlua2VkVGFza3MuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgdG90YWxVbml0cyArPSAxOwogICAgICAgICAgICBpZiAoY29tcGxldGVkVGFza3NbdC5pZF0pIGRvbmVVbml0cyArPSAxOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0b3RhbFVuaXRzID09PSAwID8gMCA6IE1hdGgucm91bmQoKGRvbmVVbml0cyAvIHRvdGFsVW5pdHMpICogMTAwKTsKICAgIH0sIFt3ZWVrbHlQbGFuLCBxdWlja1Rhc2tzLCBjb21wbGV0ZWRXZWVrbHksIGNvbXBsZXRlZFRhc2tzXSk7CgogICAgCiAgLy8gU3luYyBwcm9qZWN0IG1lbWJlcnMgdG8gU3VwYWJhc2Ugd2hlbiBwcm9qZWN0cyBjaGFuZ2UKICBhc3luYyBmdW5jdGlvbiBzeW5jUHJvamVjdE1lbWJlcnMocHJvamVjdElkLCBwcm9qZWN0TmFtZSwgbWVtYmVycykgewogICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgdHJ5IHsKICAgICAgLy8gRGVsZXRlIGV4aXN0aW5nIG1lbWJlcnMgZm9yIHRoaXMgcHJvamVjdAogICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9qZWN0X21lbWJlcnMnKS5kZWxldGUoKS5lcSgncHJvamVjdF9vd25lcl9pZCcsIHN1cGFVc2VyLmlkKS5lcSgncHJvamVjdF9sb2NhbF9pZCcsIHByb2plY3RJZCk7CiAgICAgIC8vIEluc2VydCBuZXcgbWVtYmVycwogICAgICBpZiAobWVtYmVycyAmJiBtZW1iZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCByb3dzID0gbWVtYmVycy5maWx0ZXIobSA9PiBtLmlkKS5tYXAobSA9PiAoewogICAgICAgICAgcHJvamVjdF9vd25lcl9pZDogc3VwYVVzZXIuaWQsCiAgICAgICAgICBwcm9qZWN0X2xvY2FsX2lkOiBwcm9qZWN0SWQsCiAgICAgICAgICBwcm9qZWN0X25hbWU6IHByb2plY3ROYW1lLAogICAgICAgICAgbWVtYmVyX3Byb2ZpbGVfaWQ6IG0uaWQsCiAgICAgICAgICByb2xlOiAnbWVtYmVyJwogICAgICAgIH0pKTsKICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9qZWN0X21lbWJlcnMnKS5pbnNlcnQocm93cyk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCdzeW5jUHJvamVjdE1lbWJlcnMgZXJyb3I6JywgZXJyKTsgfQogIH07CgogIC8vIFN5bmMgcHJvamVjdCBzbmFwc2hvdCBkYXRhIGZvciBzaGFyZWQgdmlld2luZwogIGFzeW5jIGZ1bmN0aW9uIHN5bmNQcm9qZWN0U25hcHNob3QocHJvaikgewogICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgdHJ5IHsKICAgICAgY29uc3QgbGlua2VkV2Vla2x5ID0gd2Vla2x5UGxhbi5maWx0ZXIodCA9PiB0LnByb2plY3RJZCA9PT0gcHJvai5pZCk7CiAgICAgIGNvbnN0IGxpbmtlZERhaWx5ID0gKHF1aWNrVGFza3MgfHwgW10pLmZpbHRlcih0ID0+IHQucHJvamVjdElkID09PSBwcm9qLmlkKTsKICAgICAgY29uc3Qgc25hcHNob3QgPSB7IG5hbWU6IHByb2oubmFtZSwgZGVzYzogcHJvai5kZXNjLCBzdGF0dXM6IHByb2ouc3RhdHVzLCBwcm9ncmVzczogcHJvai5wcm9ncmVzcywgbGF1bmNoOiBwcm9qLmxhdW5jaCwgbmV4dDogcHJvai5uZXh0LCB0ZWFtTWVtYmVyczogcHJvai50ZWFtTWVtYmVycyB8fCBbXSB9OwogICAgICBjb25zdCB0YXNrc1NuYXAgPSBbLi4ubGlua2VkV2Vla2x5Lm1hcCh0ID0+ICh7IC4uLnQsIHR5cGU6ICd3ZWVrbHknIH0pKSwgLi4ubGlua2VkRGFpbHkubWFwKHQgPT4gKHsgLi4udCwgdHlwZTogJ2RhaWx5JyB9KSldOwogICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdzaGFyZWRfcHJvamVjdF9kYXRhJykudXBzZXJ0KHsgcHJvamVjdF9vd25lcl9pZDogc3VwYVVzZXIuaWQsIHByb2plY3RfbG9jYWxfaWQ6IHByb2ouaWQsIHByb2plY3Rfc25hcHNob3Q6IHNuYXBzaG90LCB0YXNrc19zbmFwc2hvdDogdGFza3NTbmFwLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSwgeyBvbkNvbmZsaWN0OiAncHJvamVjdF9vd25lcl9pZCxwcm9qZWN0X2xvY2FsX2lkJyB9KTsKICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKCdzeW5jUHJvamVjdFNuYXBzaG90IGVycm9yOicsIGVycik7IH0KICB9OwoKICAvLyBGZXRjaCBwcm9qZWN0cyBzaGFyZWQgd2l0aCBjdXJyZW50IHVzZXIKICBhc3luYyBmdW5jdGlvbiBmZXRjaFNoYXJlZFByb2plY3RzKCkgewogICAgaWYgKCFzdXBhVXNlcikgcmV0dXJuOwogICAgdHJ5IHsKICAgICAgY29uc3QgeyBkYXRhOiBtZW1iZXJzaGlwcyB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvamVjdF9tZW1iZXJzJykuc2VsZWN0KCcqJykuZXEoJ21lbWJlcl9wcm9maWxlX2lkJywgc3VwYVVzZXIuaWQpOwogICAgICBpZiAoIW1lbWJlcnNoaXBzIHx8IG1lbWJlcnNoaXBzLmxlbmd0aCA9PT0gMCkgeyBzZXRTaGFyZWRQcm9qZWN0cyhbXSk7IHJldHVybjsgfQogICAgICBjb25zdCBzaGFyZWQgPSBbXTsKICAgICAgZm9yIChjb25zdCBtIG9mIG1lbWJlcnNoaXBzKSB7CiAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9qRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnc2hhcmVkX3Byb2plY3RfZGF0YScpLnNlbGVjdCgnKicpLmVxKCdwcm9qZWN0X293bmVyX2lkJywgbS5wcm9qZWN0X293bmVyX2lkKS5lcSgncHJvamVjdF9sb2NhbF9pZCcsIG0ucHJvamVjdF9sb2NhbF9pZCkuc2luZ2xlKCk7CiAgICAgICAgaWYgKHByb2pEYXRhKSB7CiAgICAgICAgICBjb25zdCB7IGRhdGE6IG93bmVyUHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2Z1bGxfbmFtZSwgdXNlcm5hbWUsIGF2YXRhcl91cmwsIGluaXRpYWxzJykuZXEoJ2lkJywgbS5wcm9qZWN0X293bmVyX2lkKS5zaW5nbGUoKTsKICAgICAgICAgIGNvbnN0IHsgZGF0YTogYWxsTWVtYmVycyB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvamVjdF9tZW1iZXJzJykuc2VsZWN0KCdtZW1iZXJfcHJvZmlsZV9pZCwgcm9sZScpLmVxKCdwcm9qZWN0X293bmVyX2lkJywgbS5wcm9qZWN0X293bmVyX2lkKS5lcSgncHJvamVjdF9sb2NhbF9pZCcsIG0ucHJvamVjdF9sb2NhbF9pZCk7CiAgICAgICAgICBjb25zdCBtZW1iZXJQcm9maWxlcyA9IFtdOwogICAgICAgICAgaWYgKGFsbE1lbWJlcnMpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBhbSBvZiBhbGxNZW1iZXJzKSB7CiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBtcCB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJ2lkLCBmdWxsX25hbWUsIHVzZXJuYW1lLCBhdmF0YXJfdXJsLCBpbml0aWFscycpLmVxKCdpZCcsIGFtLm1lbWJlcl9wcm9maWxlX2lkKS5zaW5nbGUoKTsKICAgICAgICAgICAgICBpZiAobXApIG1lbWJlclByb2ZpbGVzLnB1c2gobXApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB7IGRhdGE6IGNvbXBsZXRpb25zIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdzaGFyZWRfdGFza19jb21wbGV0aW9ucycpLnNlbGVjdCgnKicpLmVxKCdwcm9qZWN0X293bmVyX2lkJywgbS5wcm9qZWN0X293bmVyX2lkKS5lcSgncHJvamVjdF9sb2NhbF9pZCcsIG0ucHJvamVjdF9sb2NhbF9pZCk7CiAgICAgICAgICBzaGFyZWQucHVzaCh7IC4uLnByb2pEYXRhLCBvd25lcjogb3duZXJQcm9maWxlLCBtZW1iZXJzOiBtZW1iZXJQcm9maWxlcywgbXlSb2xlOiBtLnJvbGUsIGNvbXBsZXRpb25zOiBjb21wbGV0aW9ucyB8fCBbXSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc2V0U2hhcmVkUHJvamVjdHMoc2hhcmVkKTsKICAgICAgc2V0U2hhcmVkVGFza0NvbXBsZXRpb25zKHNoYXJlZC5mbGF0TWFwKHMgPT4gcy5jb21wbGV0aW9ucyB8fCBbXSkpOwogICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoJ2ZldGNoU2hhcmVkUHJvamVjdHMgZXJyb3I6JywgZXJyKTsgfQogIH07CgoKICAvLyBGZXRjaCBzaGFyZWQgcHJvamVjdHMgd2hlbiB1c2VyIGxvZ3MgaW4KICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKHN1cGFVc2VyKSB7IGZldGNoU2hhcmVkUHJvamVjdHMoKTsgfQogIH0sIFtzdXBhVXNlcl0pOwoKY29uc3QgZ2VuZXJhdGVMaXZlQnJpZWZpbmcgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGRhdGVTdHIgPSB0b2RheS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgY29uc3Qgc3RyZWFtQ291bnQgPSBpbmNvbWVTdHJlYW1zLmZpbHRlcihzID0+IE51bWJlcihzLm1vbnRobHkgfHwgMCkgPiAwKS5sZW5ndGg7CiAgICAgICAgY29uc3QgcGVuZGluZ1RvZGF5ID0gcXVpY2tUYXNrcy5maWx0ZXIodCA9PiAhY29tcGxldGVkVGFza3NbdC5pZF0pOwogICAgICAgIGNvbnN0IGFjdGl2ZVByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgIT09ICdDb21wbGV0ZWQnKTsKCiAgICAgICAgY29uc3QgaGVhZGxpbmUgPSBgJHtzdHJlYW1Db3VudH0gaW5jb21lIHN0cmVhbSR7c3RyZWFtQ291bnQgIT09IDEgPyAncycgOiAnJ30gYWN0aXZlLiAke2ZtdE5haXJhKG5ldE1vbnRobHkpfSBuZXQgbW9udGhseS4gJHtwZW5kaW5nVG9kYXkubGVuZ3RofSB0YXNrJHtwZW5kaW5nVG9kYXkubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IHBlbmRpbmcgdG9kYXkuYDsKCiAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBbXTsKCiAgICAgICAgc2VjdGlvbnMucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiAiRmluYW5jaWFsIFNuYXBzaG90IiwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICAgIGBNb250aGx5IGdyb3NzIGluY29tZTogJHtmbXROYWlyYSh0b3RhbE1vbnRobHkpfSBhY3Jvc3MgJHtzdHJlYW1Db3VudH0gYWN0aXZlIHN0cmVhbSR7c3RyZWFtQ291bnQgIT09IDEgPyAncycgOiAnJ30uYCwKICAgICAgICAgICAgICAgIGBNb250aGx5IGV4cGVuc2VzOiAke2ZtdE5haXJhKHRvdGFsRXhwZW5zZXMpfSDigJQgbmV0IGluY29tZTogJHtmbXROYWlyYShuZXRNb250aGx5KX0uYCwKICAgICAgICAgICAgICAgIGBBbm51YWwgcHJvamVjdGVkOiAke2ZtdE5haXJhKHRvdGFsTW9udGhseSAqIDEyKX0gZ3Jvc3MsICR7Zm10TmFpcmEobmV0TW9udGhseSAqIDEyKX0gbmV0LmAsCiAgICAgICAgICAgICAgICBuZXh0UGF5bWVudER1ZSA/IGBOZXh0IHBheW1lbnQ6ICR7bmV3IERhdGUobmV4dFBheW1lbnREdWUubmV4dFBheW1lbnQgKyAnVDAwOjAwOjAwJykudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHttb250aDogJ3Nob3J0JywgZGF5OiAnbnVtZXJpYyd9KX0g4oCUICR7bmV4dFBheW1lbnREdWUucm9sZX0sICR7bmV4dFBheW1lbnREdWUubmFtZX0uYCA6ICdObyB1cGNvbWluZyBwYXltZW50cyBzY2hlZHVsZWQuJwogICAgICAgICAgICBdCiAgICAgICAgfSk7CgogICAgICAgIGlmIChwZW5kaW5nVG9kYXkubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHsgdGl0bGU6ICJUb2RheSdzIFByaW9yaXRpZXMiLCBpdGVtczogcGVuZGluZ1RvZGF5LnNsaWNlKDAsIDYpLm1hcCh0ID0+IHQudGFzaykgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VjdGlvbnMucHVzaCh7IHRpdGxlOiAiVG9kYXkncyBQcmlvcml0aWVzIiwgaXRlbXM6IFsi4pyFIEFsbCB0YXNrcyBjb21wbGV0ZSDigJQgY2xlYXIgc2NoZWR1bGUgYWhlYWQuIl0gfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBEZWFkbGluZSBhd2FyZW5lc3MKICAgICAgICBjb25zdCBkZWFkbGluZVRhc2tzID0gd2Vla2x5UGxhbi5maWx0ZXIodyA9PiB3LmRlYWRsaW5lICYmICFjb21wbGV0ZWRXZWVrbHlbdy5pZF0pLnNvcnQoKGEsIGIpID0+IGEuZGVhZGxpbmUubG9jYWxlQ29tcGFyZShiLmRlYWRsaW5lKSk7CiAgICAgICAgaWYgKGRlYWRsaW5lVGFza3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBkZWFkbGluZUl0ZW1zID0gZGVhZGxpbmVUYXNrcy5zbGljZSgwLCAzKS5tYXAodyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUody5kZWFkbGluZSArICdUMDA6MDA6MDAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsgdG9kYXkuc2V0SG91cnMoMCwwLDAsMCk7CiAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gTWF0aC5jZWlsKChkIC0gdG9kYXkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTsKICAgICAgICAgICAgICAgIGNvbnN0IHVyZ2VuY3kgPSBkaWZmIDw9IDAgPyAnT1ZFUkRVRScgOiBkaWZmID09PSAxID8gJ0R1ZSB0b21vcnJvdycgOiBkaWZmIDw9IDMgPyBgRHVlIGluICR7ZGlmZn0gZGF5c2AgOiBgRHVlICR7ZC50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsIGRheTonbnVtZXJpYyd9KX1gOwogICAgICAgICAgICAgICAgcmV0dXJuIGAke3VyZ2VuY3l9OiAke3cudGFza30ke3cuZGVsZWdhdGVkVG8gPyAnIChkZWxlZ2F0ZWQgdG8gJyArIHcuZGVsZWdhdGVkVG8gKyAnKScgOiAnJ31gOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2VjdGlvbnMucHVzaCh7IHRpdGxlOiAiVXBjb21pbmcgRGVhZGxpbmVzIiwgaXRlbXM6IGRlYWRsaW5lSXRlbXMgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYWN0aXZlUHJvamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUHJvamVjdCBTdGF0dXMiLAogICAgICAgICAgICAgICAgaXRlbXM6IGFjdGl2ZVByb2plY3RzLnNsaWNlKDAsIDUpLm1hcChwID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IGdldFByb2plY3RQcm9ncmVzcyhwLmlkKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7cC5uYW1lfTogJHtwcm9ncmVzcyAhPT0gbnVsbCA/IHByb2dyZXNzICsgJyUgY29tcGxldGUnIDogJ05vIGxpbmtlZCB0YXNrcyd9IOKAlCAke3Auc3RhdHVzfWA7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHNlY3Rpb25zLnB1c2goewogICAgICAgICAgICB0aXRsZTogIlN0cmF0ZWdpYyBOb3RlcyIsCiAgICAgICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICAgICAgICBuZXRNb250aGx5ID4gMCA/IGBQb3NpdGl2ZSBjYXNoIGZsb3cgb2YgJHtmbXROYWlyYShuZXRNb250aGx5KX0vbW9udGgg4oCUIG1haW50YWluIHRyYWplY3RvcnkuYCA6IGBDYXNoIGZsb3cgZ2FwIG9mICR7Zm10TmFpcmEoTWF0aC5hYnMobmV0TW9udGhseSkpfS9tb250aCDigJQgcmV2aWV3IGV4cGVuc2VzLmAsCiAgICAgICAgICAgICAgICBzdHJlYW1Db3VudCA8IDMgPyBgJHtzdHJlYW1Db3VudH0gaW5jb21lIHN0cmVhbSR7c3RyZWFtQ291bnQgIT09IDEgPyAncycgOiAnJ30gYWN0aXZlIOKAlCBjb25zaWRlciBkaXZlcnNpZnlpbmcgdG8gcmVkdWNlIHJldmVudWUgcmlzay5gIDogYCR7c3RyZWFtQ291bnR9IGluY29tZSBzdHJlYW1zIOKAlCB3ZWxsLWRpdmVyc2lmaWVkIHJldmVudWUgYmFzZS5gLAogICAgICAgICAgICAgICAgYEFubnVhbCB0YXJnZXQ6ICR7Zm10TmFpcmEodG90YWxNb250aGx5ICogMTIpfSBncm9zcy4gVHJhY2sgbW9udGhseSB0byBzdGF5IG9uIGNvdXJzZS5gCiAgICAgICAgICAgIF0KICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHsgZGF0ZTogZGF0ZVN0ciwgZ2VuZXJhdGVkQXQ6IHRvZGF5LnRvSVNPU3RyaW5nKCksIGhlYWRsaW5lLCBzZWN0aW9ucywgYXV0b0dlbmVyYXRlZDogdHJ1ZSB9OwogICAgfSwgW2luY29tZVN0cmVhbXMsIHF1aWNrVGFza3MsIGNvbXBsZXRlZFRhc2tzLCBwcm9qZWN0cywgdG90YWxNb250aGx5LCB0b3RhbEV4cGVuc2VzLCBuZXRNb250aGx5LCBuZXh0UGF5bWVudER1ZSwgZ2V0UHJvamVjdFByb2dyZXNzXSk7CiAgICBpZiAoc2hhcmVkUHJvamVjdHMgJiYgc2hhcmVkUHJvamVjdHMubGVuZ3RoID4gMCkgeyBzZWN0aW9ucy5wdXNoKHsgdGl0bGU6ICJTaGFyZWQgUHJvamVjdHMiLCBpdGVtczogc2hhcmVkUHJvamVjdHMubWFwKGZ1bmN0aW9uKHNwKSB7IHZhciBzbmFwID0gc3AucHJvamVjdF9zbmFwc2hvdCB8fCB7fTsgdmFyIHRjID0gc3AudGFza3Nfc25hcHNob3QgPyBzcC50YXNrc19zbmFwc2hvdC5sZW5ndGggOiAwOyByZXR1cm4gKHNuYXAubmFtZSB8fCAiUHJvamVjdCIpICsgIiAoIiArIChzbmFwLnN0YXR1cyB8fCAiQWN0aXZlIikgKyAiKSAtICIgKyB0YyArICIgdGFza3MuIE93bmVyOiAiICsgKHNwLm93bmVyID8gc3Aub3duZXIuZnVsbF9uYW1lIDogIlVua25vd24iKTsgfSkgfSk7IH0KCiAgICBjb25zdCBmZXRjaExpdmVOYXRpb25EYXRhID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL29wZW4uZXItYXBpLmNvbS92Ni9sYXRlc3QvVVNEJyk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQgPT09ICdzdWNjZXNzJyAmJiBkYXRhLnJhdGVzICYmIGRhdGEucmF0ZXMuTkdOKSB7CiAgICAgICAgICAgICAgICBjb25zdCByYXRlID0gZGF0YS5yYXRlcy5OR047CiAgICAgICAgICAgICAgICBjb25zdCB0aW1lU3RyID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywge2hvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCd9KTsKICAgICAgICAgICAgICAgIHNldE5hdGlvbkJyaWVmaW5nKHByZXYgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghcHJldikgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJldiwKICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yczogcHJldi5pbmRpY2F0b3JzLm1hcChpbmQgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZC5sYWJlbCA9PT0gJ1VTRC9OR04nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IC4uLmluZCwgdmFsdWU6ICfigqYnICsgcmF0ZS50b0ZpeGVkKDIpLCBub3RlOiAnTGl2ZSDigKIgJyArIHRpbWVTdHIsIHRyZW5kOiAndXAnIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGluZAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0TGl2ZVVwZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgeyB9CiAgICB9LCBbXSk7CgogICAgY29uc3QgcHVzaFRvRGFpbHkgPSAod2Vla2x5SXRlbSkgPT4gewogICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IHF1aWNrVGFza3MuZmluZCh0ID0+IHQud2Vla2x5U291cmNlSWQgPT09IHdlZWtseUl0ZW0uaWQpOwogICAgICAgIGlmIChleGlzdGluZ1Rhc2spIHJldHVybjsKICAgICAgICBzZXRRdWlja1Rhc2tzKHByZXYgPT4gWy4uLnByZXYsIHsKICAgICAgICAgICAgaWQ6IG5ld0lkKCksCiAgICAgICAgICAgIHRhc2s6IHdlZWtseUl0ZW0udGFzaywKICAgICAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLAogICAgICAgICAgICBkdWU6ICdUb2RheScsCiAgICAgICAgICAgIHByb2plY3RJZDogd2Vla2x5SXRlbS5wcm9qZWN0SWQgfHwgbnVsbCwKICAgICAgICAgICAgd2Vla2x5U291cmNlSWQ6IHdlZWtseUl0ZW0uaWQKICAgICAgICB9XSk7CiAgICB9OwoKICAgIGNvbnN0IGNhdENvbG9ycyA9IHsgYW1iZXI6ICdiZy1hbWJlci01MCBib3JkZXItYW1iZXItMjAwIHRleHQtYW1iZXItODAwJywgYmx1ZTogJ2JnLWJsdWUtNTAgYm9yZGVyLWJsdWUtMjAwIHRleHQtYmx1ZS04MDAnLCBwdXJwbGU6ICdiZy1wdXJwbGUtNTAgYm9yZGVyLXB1cnBsZS0yMDAgdGV4dC1wdXJwbGUtODAwJywgZ3JlZW46ICdiZy1lbWVyYWxkLTUwIGJvcmRlci1lbWVyYWxkLTIwMCB0ZXh0LWVtZXJhbGQtODAwJyB9OwogICAgY29uc3QgY2F0RG90ID0geyBhbWJlcjogJ2JnLWFtYmVyLTQwMCcsIGJsdWU6ICdiZy1ibHVlLTQwMCcsIHB1cnBsZTogJ2JnLXB1cnBsZS00MDAnLCBncmVlbjogJ2JnLWVtZXJhbGQtNDAwJyB9OwogICAgY29uc3Qgc3RhdHVzQ29sb3JzID0geyAnT24gVHJhY2snOiAnYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNzAwJywgJ0dyb3dpbmcnOiAnYmctYmx1ZS01MCB0ZXh0LWJsdWUtNzAwJywgJ0F0IFJpc2snOiAnYmctcmVkLTUwIHRleHQtcmVkLTcwMCcsICdJbiBQcm9ncmVzcyc6ICdiZy1ibHVlLTUwIHRleHQtYmx1ZS03MDAnLCAnUGxhbm5pbmcnOiAnYmctYW1iZXItNTAgdGV4dC1hbWJlci03MDAnLCAnTGF1bmNoIFJlYWR5JzogJ2JnLWVtZXJhbGQtNTAgdGV4dC1lbWVyYWxkLTcwMCcsICdDb21wbGV0ZWQnOiAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTYwMCcgfTsKICAgIGNvbnN0IHByaW9Db2xvciA9IHsgaGlnaDogJ2JnLXJlZC0xMDAgdGV4dC1yZWQtNjAwJywgbWVkaXVtOiAnYmctYW1iZXItMTAwIHRleHQtYW1iZXItNjAwJywgbG93OiAnYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTYwMCcgfTsKICAgIGNvbnN0IHByaW9MYWJlbCA9IHsgaGlnaDogJ0hpZ2gnLCBtZWRpdW06ICdNZWQnLCBsb3c6ICdMb3cnIH07CgogICAgY29uc3QgcHJvamVjdE5hbWUgPSAoaWQpID0+IHsKICAgICAgICBpZiAoIWlkKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBwID0gcHJvamVjdHMuZmluZChwciA9PiBwci5pZCA9PT0gaWQpOwogICAgICAgIHJldHVybiBwID8gcC5uYW1lIDogbnVsbDsKICAgIH07CgogICAgY29uc3QgYWN0aXZlUHJvamVjdHMgPSB1c2VNZW1vKCgpID0+IHByb2plY3RzLmZpbHRlcihwID0+IHAuc3RhdHVzICE9PSAnQ29tcGxldGVkJyksIFtwcm9qZWN0c10pOwoKICAgIGNvbnN0IEVtcHR5ID0gKHsgaWNvbiwgdGl0bGUsIHN1YiwgYWN0aW9uLCBhY3Rpb25MYWJlbCB9KSA9PiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHB5LTEyIHB4LTQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBteC1hdXRvIG1iLTQiPntpY29ufTwvZGl2PgogICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBtYi0xIj57dGl0bGV9PC9wPgogICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtYi01Ij57c3VifTwvcD4KICAgICAgICAgICAge2FjdGlvbiAmJiA8YnV0dG9uIG9uQ2xpY2s9e2FjdGlvbn0gY2xhc3NOYW1lPSJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtNCBweS0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgdGV4dC1zbSBmb250LW1lZGl1bSByb3VuZGVkLWxnIHRyYW5zaXRpb24iPntJLnBsdXMoIndoaXRlIil9IHthY3Rpb25MYWJlbH08L2J1dHRvbj59CiAgICAgICAgPC9kaXY+CiAgICApOwoKICAgIGNvbnN0IFNpZGViYXIgPSAoKSA9PiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9eydmaXhlZCBsZWZ0LTAgdG9wLTAgaC1zY3JlZW4gZmxleCBmbGV4LWNvbCB6LTEwIGJnLXdoaXRlIGJvcmRlci1yIGJvcmRlci1ncmF5LTEwMCBzaWRlYmFyLXNoYWRvdyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJyArIChzaWRlYmFyT3BlbiA/ICd3LTYwJyA6ICd3LTE2Jyl9PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBib3JkZXItYiBib3JkZXItZ3JheS01MCI+CiAgICAgICAgICAgICAgICB7c2lkZWJhck9wZW4gPyAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yLjUiPjxFbWJsZW0gc2l6ZT17MzR9IC8+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIHRyYWNraW5nLXRpZ2h0Ij5OdU9wZXJhbmRpPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICA8RW1ibGVtIHNpemU9ezI4fSAvPgogICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0U2lkZWJhck9wZW4oIXNpZGViYXJPcGVuKX0gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgdHJhbnNpdGlvbiBwLTEgcm91bmRlZC1tZCBob3ZlcjpiZy1ncmF5LTUwIj57c2lkZWJhck9wZW4gPyBJLngoIiM5Q0EzQUYiKSA6IEkubWVudSgiIzlDQTNBRiIpfTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPG5hdiBjbGFzc05hbWU9ImZsZXgtMSBwLTIgc3BhY2UteS0wLjUgbXQtMiI+CiAgICAgICAgICAgICAgICB7WwogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb21tYW5kJywgaWNvbjogKCkgPT4gSS5jb21tYW5kKGFjdGl2ZU1vZHVsZSA9PT0gJ2NvbW1hbmQnID8gJyMzQjgyRjYnIDogJyM2QjcyODAnKSwgbGFiZWw6ICdDb21tYW5kIENlbnRyZScgfSwKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnaW5jb21lJywgaWNvbjogKCkgPT4gSS5kb2xsYXIoYWN0aXZlTW9kdWxlID09PSAnaW5jb21lJyA/ICcjM0I4MkY2JyA6ICcjNkI3MjgwJyksIGxhYmVsOiAnSW5jb21lICYgUHJvamVjdHMnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2JyaWVmaW5nJywgaWNvbjogKCkgPT4gSS5iYXIoYWN0aXZlTW9kdWxlID09PSAnYnJpZWZpbmcnID8gJyMzQjgyRjYnIDogJyM2QjcyODAnKSwgbGFiZWw6ICdNb3JuaW5nIEJyaWVmaW5nJyB9LAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdwbGFubmVyJywgaWNvbjogKCkgPT4gSS5jYWxlbmRhcihhY3RpdmVNb2R1bGUgPT09ICdwbGFubmVyJyA/ICcjM0I4MkY2JyA6ICcjNkI3MjgwJyksIGxhYmVsOiAnUGxhbm5lcicgfSwKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnaGlzdG9yeScsIGljb246ICgpID0+IEkuaGlzdG9yeShhY3RpdmVNb2R1bGUgPT09ICdoaXN0b3J5JyA/ICcjM0I4MkY2JyA6ICcjNkI3MjgwJyksIGxhYmVsOiAnSGlzdG9yeScgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdib2FyZHJvb20nLCBpY29uOiAoKSA9PiBJLmJhcihhY3RpdmVNb2R1bGUgPT09ICdib2FyZHJvb20nID8gJyMzQjgyRjYnIDogJyM2QjcyODAnKSwgbGFiZWw6ICdCb2FyZHJvb20nIH0KICAgICAgICAgICAgICAgIF0ubWFwKGl0ZW0gPT4gKAogICAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtpdGVtLmlkfSBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVNb2R1bGUoaXRlbS5pZCl9CiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17J3ctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBweC0zIHB5LTIuNSByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsIHRleHQtc20gJyArIChhY3RpdmVNb2R1bGUgPT09IGl0ZW0uaWQgPyAnYmctYmx1ZS01MCB0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtJyA6ICd0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS04MDAgaG92ZXI6YmctZ3JheS01MCcpfT4KICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uaWNvbigpfXtzaWRlYmFyT3BlbiAmJiA8c3Bhbj57aXRlbS5sYWJlbH08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgIDwvbmF2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC0yIGJvcmRlci10IGJvcmRlci1ncmF5LTUwIj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ3NldHRpbmdzJyl9IGNsYXNzTmFtZT0idy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHB4LTMgcHktMi41IHJvdW5kZWQtbGcgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwIGhvdmVyOmJnLWdyYXktNTAgdHJhbnNpdGlvbiB0ZXh0LXNtIj57SS5zZXR0aW5ncygiIzlDQTNBRiIpfXtzaWRlYmFyT3BlbiAmJiA8c3Bhbj5TZXR0aW5nczwvc3Bhbj59PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgKTsKCiAgICBjb25zdCBUb3BCYXIgPSAoKSA9PiB7CiAgICAgICAgY29uc3QgdG9kYXlUYXNrc1RvdGFsID0gcXVpY2tUYXNrcy5sZW5ndGg7CiAgICAgICAgY29uc3QgdG9kYXlUYXNrc0RvbmUgPSBxdWlja1Rhc2tzLmZpbHRlcih0ID0+IGNvbXBsZXRlZFRhc2tzW3QuaWRdKS5sZW5ndGg7CiAgICAgICAgY29uc3QgdG9kYXlSZW1haW5pbmcgPSB0b2RheVRhc2tzVG90YWwgLSB0b2RheVRhc2tzRG9uZTsKICAgICAgICBjb25zdCBkZWxlZ2F0ZWRBY3RpdmVDb3VudCA9IGRlbGVnYXRlZEJ5TWUuZmlsdGVyKGQgPT4gZC5zdGF0dXMgPT09ICdwZW5kaW5nJyB8fCBkLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJykubGVuZ3RoOwogICAgICAgIHJldHVybiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItbWQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIHB4LTggcHktNSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gc3RpY2t5IHRvcC0wIHotMTAiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT0idGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPntncmVldGluZygpfSwgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtNTAwIj57dXNlclByb2ZpbGUgPyB1c2VyUHJvZmlsZS5uYW1lLnNwbGl0KCcgJylbMF0gOiAnVXNlcid9PC9zcGFuPjwvaDE+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0wLjUiPntmbXREYXRlKGN1cnJlbnRUaW1lKX08L3A+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0yIGl0YWxpYyB0cnVuY2F0ZSBtYXgtdy14bCIgc3R5bGU9e3tjb2xvcjonI0I4OTUyQyd9fT4ie2dldFF1b3RlKCl9IjwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNSBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRBY3RpdmVNb2R1bGUoJ3BsYW5uZXInKTsgc2V0UGxhbm5lclRhYignZGFpbHknKTsgfX0gY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBweC0zIHB5LTEuNSByb3VuZGVkLWxnIGJnLWdyYXktNTAgaG92ZXI6YmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGhvdmVyOmJvcmRlci1ibHVlLTIwMCB0cmFuc2l0aW9uIGN1cnNvci1wb2ludGVyIGdyb3VwIiB0aXRsZT0iR28gdG8gVG9kYXkncyBUYXNrcyI+CiAgICAgICAgICAgICAgICAgICAge0kuY2xpcGJvYXJkKCIjNkI3MjgwIil9CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgZ3JvdXAtaG92ZXI6dGV4dC1ibHVlLTYwMCB0cmFuc2l0aW9uIj57dG9kYXlUYXNrc0RvbmV9L3t0b2RheVRhc2tzVG90YWx9IHRhc2tzPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIHt0b2RheVJlbWFpbmluZyA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTYwMCI+e3RvZGF5UmVtYWluaW5nfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAge3RvZGF5UmVtYWluaW5nID09PSAwICYmIHRvZGF5VGFza3NUb3RhbCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTYwMCI+RG9uZTwvc3Bhbj59CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICB7ZGVsZWdhdGVkQWN0aXZlQ291bnQgPiAwICYmIDxzcGFuIGNsYXNzTmFtZT0ibWwtMiBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTYwMCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQiPntkZWxlZ2F0ZWRBY3RpdmVDb3VudH0gZGVsZWdhdGVkPC9zcGFuPn0KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIGZvbnQtbW9ubyI+e2N1cnJlbnRUaW1lLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSl9PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXROb3RpZmljYXRpb25zT3Blbighbm90aWZpY2F0aW9uc09wZW4pfSBjbGFzc05hbWU9InJlbGF0aXZlIHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTYwMCB0cmFuc2l0aW9uIj57SS5iZWxsKCIjOUNBM0FGIil9e3VucmVhZENvdW50ID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9ImFic29sdXRlIC10b3AtMSAtcmlnaHQtMSB3LTQgaC00IGJnLXJlZC01MDAgcm91bmRlZC1mdWxsIHRleHQtd2hpdGUgdGV4dC14cyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBhbmltYXRlLXB1bHNlIj57dW5yZWFkQ291bnR9PC9zcGFuPn08L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ3NldHRpbmdzJyl9IGNsYXNzTmFtZT0idy05IGgtOSByb3VuZGVkLWZ1bGwgY3Vyc29yLXBvaW50ZXIgaG92ZXI6cmluZy0yIGhvdmVyOnJpbmctYmx1ZS00MDAgdHJhbnNpdGlvbiBvdmVyZmxvdy1oaWRkZW4iPnt1c2VyUHJvZmlsZSAmJiB1c2VyUHJvZmlsZS5hdmF0YXJfdXJsID8gPGltZyBzcmM9e3VzZXJQcm9maWxlLmF2YXRhcl91cmx9IGFsdD0iIiBjbGFzc05hbWU9InctOSBoLTkgcm91bmRlZC1mdWxsIG9iamVjdC1jb3ZlciIgLz4gOiA8ZGl2IGNsYXNzTmFtZT0idy05IGgtOSByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQtc20iPnt1c2VyUHJvZmlsZSA/IHVzZXJQcm9maWxlLmluaXRpYWxzIDogJ1UnfTwvZGl2Pn08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgKTsKICAgIH07CgogICAgY29uc3QgTWV0cmljQ2FyZCA9ICh7bGFiZWwsIHZhbHVlLCBzdWIsIHRyZW5kLCBpY29ufSkgPT4gKAogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC01IGNhcmQtc2hhZG93IGNhcmQtc2hhZG93LWhvdmVyIHRyYW5zaXRpb24tYWxsIj4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zIj48c3BhbiBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSI+e2xhYmVsfTwvc3Bhbj57aWNvbn08L2Rpdj4KICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPnt2YWx1ZX08L3A+CiAgICAgICAgICAgIHtzdWIgJiYgPHAgY2xhc3NOYW1lPXsndGV4dC14cyBtdC0xLjUgJyArICh0cmVuZCA+IDAgPyAndGV4dC1lbWVyYWxkLTUwMCcgOiB0cmVuZCA8IDAgPyAndGV4dC1yZWQtNDAwJyA6ICd0ZXh0LWdyYXktNDAwJyl9PntzdWJ9PC9wPn0KICAgICAgICA8L2Rpdj4KICAgICk7CgogICAgY29uc3QgQ29tbWFuZENlbnRyZSA9ICgpID0+IHsKICAgICAgICBjb25zdCBwZW5kaW5nVGFza3MgPSBxdWlja1Rhc2tzLmZpbHRlcih0ID0+ICFjb21wbGV0ZWRUYXNrc1t0LmlkXSk7CiAgICAgICAgY29uc3QgdG9kYXlEb25lID0gcXVpY2tUYXNrcy5sZW5ndGggLSBwZW5kaW5nVGFza3MubGVuZ3RoOwogICAgICAgIGNvbnN0IHdlZWtseURvbmVDQyA9ICgoKSA9PiB7IGxldCBkID0gMCwgdCA9IDA7IHdlZWtseVBsYW4uZm9yRWFjaCh3ID0+IHsgaWYgKHcuc3VidGFza3MgJiYgdy5zdWJ0YXNrcy5sZW5ndGggPiAwKSB7IHQgKz0gdy5zdWJ0YXNrcy5sZW5ndGg7IGQgKz0gdy5zdWJ0YXNrcy5maWx0ZXIocyA9PiBzLmRvbmUpLmxlbmd0aDsgfSBlbHNlIHsgdCArPSAxOyBpZiAoY29tcGxldGVkV2Vla2x5W3cuaWRdKSBkICs9IDE7IH0gfSk7IHJldHVybiB7IGRvbmU6IGQsIHRvdGFsOiB0IH07IH0pKCk7CiAgICAgICAgY29uc3QgdXBjb21pbmdCbG9ja3MgPSB0aW1lQmxvY2tzLmZpbHRlcihiID0+ICFjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdKTsKICAgICAgICBjb25zdCBjb21wbGV0ZWRCbG9ja3MgPSB0aW1lQmxvY2tzLmZpbHRlcihiID0+IGNvbXBsZXRlZFRpbWVCbG9ja3NbYi5pZF0pOwogICAgICAgIGNvbnN0IGJyaWVmaW5nRGF0ZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHsgd2Vla2RheTogJ2xvbmcnLCBtb250aDogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgeWVhcjogJ251bWVyaWMnIH0pLmZvcm1hdChuZXcgRGF0ZSgpKTsKCiAgICAgICAgcmV0dXJuICgKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02IG1heC13LTZ4bCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy00IGdhcC00Ij4KICAgICAgICAgICAgICAgIDxNZXRyaWNDYXJkIGxhYmVsPSJOZXQgSW5jb21lIiB2YWx1ZT17Zm10TmFpcmEobmV0TW9udGhseSl9IHN1Yj17bmV0TW9udGhseSA+PSAwID8gJ0hlYWx0aHknIDogJ0RlZmljaXQnfSB0cmVuZD17bmV0TW9udGhseSA+PSAwID8gMSA6IC0xfSBpY29uPXtJLndhbGxldChuZXRNb250aGx5ID49IDAgPyAiIzEwQjk4MSIgOiAiI0VGNDQ0NCIpfSAvPgogICAgICAgICAgICAgICAgPE1ldHJpY0NhcmQgbGFiZWw9IkFubnVhbCBQcm9qZWN0ZWQiIHZhbHVlPXtmbXROYWlyYSh0b3RhbE1vbnRobHkgKiAxMil9IHN1Yj17Zm10TmFpcmEobmV0TW9udGhseSAqIDEyKSArICcgbmV0L3lyJ30gdHJlbmQ9e25ldE1vbnRobHkgPj0gMCA/IDEgOiAtMX0gaWNvbj17SS5iYXIoIiM4QjVDRjYiKX0gLz4KICAgICAgICAgICAgICAgIDxNZXRyaWNDYXJkIGxhYmVsPSJOZXh0IFBheW1lbnQiIHZhbHVlPXtuZXh0UGF5bWVudER1ZSA/IG5ldyBEYXRlKG5leHRQYXltZW50RHVlLm5leHRQYXltZW50KS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsIGRheTonbnVtZXJpYyd9KSA6ICctLSd9IHN1Yj17bmV4dFBheW1lbnREdWUgPyBuZXh0UGF5bWVudER1ZS5uYW1lIDogJ05vIGRhdGVzIHNldCd9IHRyZW5kPXswfSBpY29uPXtJLmNhbGVuZGFyKCIjM0I4MkY2Iil9IC8+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIHAtNSBjYXJkLXNoYWRvdyBjYXJkLXNoYWRvdy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciIgb25DbGljaz17KCkgPT4geyBzZXRBY3RpdmVNb2R1bGUoJ3BsYW5uZXInKTsgc2V0UGxhbm5lclRhYignZGFpbHknKTsgfX0+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zIj48c3BhbiBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSI+VG9kYXkncyBUYXNrczwvc3Bhbj57SS5jbGlwYm9hcmQoIiNGNTlFMEIiKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+e3RvZGF5RG9uZX0ve3F1aWNrVGFza3MubGVuZ3RofTwvcD4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9eyd0ZXh0LXhzIG10LTEuNSAnICsgKHBlbmRpbmdUYXNrcy5sZW5ndGggPT09IDAgJiYgcXVpY2tUYXNrcy5sZW5ndGggPiAwID8gJ3RleHQtZW1lcmFsZC01MDAnIDogcGVuZGluZ1Rhc2tzLmxlbmd0aCA+IDAgPyAndGV4dC1hbWJlci01MDAnIDogJ3RleHQtZ3JheS00MDAnKX0+e3BlbmRpbmdUYXNrcy5sZW5ndGggPT09IDAgJiYgcXVpY2tUYXNrcy5sZW5ndGggPiAwID8gJ0FsbCBkb25lIScgOiBwZW5kaW5nVGFza3MubGVuZ3RoICsgJyBwZW5kaW5nJ308L3A+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtNSBnYXAtNiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iY29sLXNwYW4tMyBzcGFjZS15LTYiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZ3JheS01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLmNsb2NrKCIjM0I4MkY2Iil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPlRvZGF5J3MgU2NoZWR1bGU8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1cGNvbWluZ0Jsb2Nrcy5sZW5ndGggPiAwICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtNjAwIj57dXBjb21pbmdCbG9ja3MubGVuZ3RofSByZW1haW5pbmc8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsKCdhZGRUaW1lQmxvY2snKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+e0kucGx1cygiIzNCODJGNiIpfSBBZGQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIHt0aW1lQmxvY2tzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTggdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIj5ObyB0aW1lIGJsb2NrcyBzY2hlZHVsZWQ8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbCgnYWRkVGltZUJsb2NrJyl9IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWJsdWUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0gbXQtMiI+QWRkIHlvdXIgZmlyc3QgYmxvY2s8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGltZUJsb2Nrcy5maWx0ZXIoYiA9PiAhY29tcGxldGVkVGltZUJsb2Nrc1tiLmlkXSkubWFwKGIgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17Yi5pZH0gY2xhc3NOYW1lPXsncHgtNSBweS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC00IGdyb3VwIHRyYW5zaXRpb24gJyArIChjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdID8gJ29wYWNpdHktNDAgYmctZ3JheS01MC81MCcgOiAnaG92ZXI6YmctZ3JheS01MC8zMCcpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iY3Vyc29yLXBvaW50ZXIgZmxleC1zaHJpbmstMCIgb25DbGljaz17KCkgPT4gdG9nZ2xlQmxvY2soYi5pZCl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdID8gSS5jaGVjaygiIzEwQjk4MSIpIDogSS5jaXJjbGUoIiNEMUQ1REIiKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsndy0yIGgtMiByb3VuZGVkLWZ1bGwgZmxleC1zaHJpbmstMCAnICsgKGNhdERvdFtiLmNhdF0gfHwgY2F0RG90LmJsdWUpfT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNDAwIHctMjggZmxleC1zaHJpbmstMCI+e2IudGltZX17Yi5lbmQgPyAnIC0gJyArIGIuZW5kIDogJyd9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsndGV4dC1zbSBmbGV4LTEgJyArIChjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdID8gJ2xpbmUtdGhyb3VnaCB0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktOTAwJyl9PntiLnRhc2t9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldEVkaXRJdGVtKGIpOyBzZXRNb2RhbCgnZWRpdFRpbWVCbG9jaycpOyB9fSBjbGFzc05hbWU9InAtMSByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24gb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIj57SS5lZGl0KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgIHt0aW1lQmxvY2tzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktMi41IGJvcmRlci10IGJvcmRlci1ncmF5LTUwIGJnLWdyYXktNTAvMzAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e2NvbXBsZXRlZEJsb2Nrcy5sZW5ndGh9L3t0aW1lQmxvY2tzLmxlbmd0aH0gY29tcGxldGVkPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0QWN0aXZlTW9kdWxlKCdwbGFubmVyJyk7IHNldFBsYW5uZXJUYWIoJ3NjaGVkdWxlJyk7IH19IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWJsdWUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0iPlZpZXcgZnVsbCBzY2hlZHVsZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZ3JheS01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLnphcCgiI0Y1OUUwQiIpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5QZW5kaW5nIFRhc2tzPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVuZGluZ1Rhc2tzLmxlbmd0aCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTYwMCI+e3BlbmRpbmdUYXNrcy5sZW5ndGh9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbCgnYWRkVGFzaycpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj57SS5wbHVzKCIjM0I4MkY2Iil9IEFkZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAge3BlbmRpbmdUYXNrcy5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC02IHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCI+e3F1aWNrVGFza3MubGVuZ3RoID4gMCA/ICdBbGwgdGFza3MgY29tcGxldGVkIHRvZGF5IScgOiAnTm8gdGFza3MgZm9yIHRvZGF5J308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BlbmRpbmdUYXNrcy5zbGljZSgwLCA2KS5tYXAodCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2ogPSB0LnByb2plY3RJZCA/IHByb2plY3RzLmZpbmQocCA9PiBwLmlkID09PSB0LnByb2plY3RJZCkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dC5pZH0gY2xhc3NOYW1lPSJweC01IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgZ3JvdXAgaG92ZXI6YmctZ3JheS01MC8zMCB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iY3Vyc29yLXBvaW50ZXIgZmxleC1zaHJpbmstMCIgb25DbGljaz17KCkgPT4gdG9nZ2xlVGFzayh0LmlkKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0kuY2lyY2xlKCIjRDFENURCIil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlIj57dC50YXNrfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJvaiAmJiA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCB0cnVuY2F0ZSI+e3Byb2oubmFtZX08L3A+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0LmRlbGVnYXRlZEZyb20gJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZCBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTYwMCBmb250LW1lZGl1bSI+ZnJvbSB7dC5kZWxlZ2F0ZWRGcm9tfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0LnByaW9yaXR5ID09PSAnaGlnaCcgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZCBiZy1yZWQtNTAgdGV4dC1yZWQtNTAwIGZvbnQtbWVkaXVtIGZsZXgtc2hyaW5rLTAiPkhpZ2g8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3QuZHVlICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGZsZXgtc2hyaW5rLTAiPnt0LmR1ZX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICB7cGVuZGluZ1Rhc2tzLmxlbmd0aCA+IDYgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktMi41IGJvcmRlci10IGJvcmRlci1ncmF5LTUwIGJnLWdyYXktNTAvMzAgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRBY3RpdmVNb2R1bGUoJ3BsYW5uZXInKTsgc2V0UGxhbm5lclRhYignZGFpbHknKTsgfX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSI+VmlldyBhbGwge3BlbmRpbmdUYXNrcy5sZW5ndGh9IHRhc2tzPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICB7cXVpY2tUYXNrcy5maWx0ZXIodCA9PiB0LmRlbGVnYXRlZFRvICYmICFjb21wbGV0ZWRUYXNrc1t0LmlkXSkubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLnVzZXIoIiM4QjVDRjYiKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkRlbGVnYXRlZDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTYwMCI+e3F1aWNrVGFza3MuZmlsdGVyKHQgPT4gdC5kZWxlZ2F0ZWRUbyAmJiAhY29tcGxldGVkVGFza3NbdC5pZF0pLmxlbmd0aH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1aWNrVGFza3MuZmlsdGVyKHQgPT4gdC5kZWxlZ2F0ZWRUbyAmJiAhY29tcGxldGVkVGFza3NbdC5pZF0pLnNsaWNlKDAsIDQpLm1hcCh0ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3QuaWR9IGNsYXNzTmFtZT0icHgtNSBweS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTcgaC03IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtcHVycGxlLTYwMCBmb250LXNlbWlib2xkIHRleHQteHMgZmxleC1zaHJpbmstMCI+e3QuZGVsZWdhdGVkVG8uc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsMil9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlIj57dC50YXNrfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1wdXJwbGUtNTAwIj57dC5kZWxlZ2F0ZWRUb308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0LmR1ZSAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBmbGV4LXNocmluay0wIj57dC5kdWV9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAge3QuZGVsZWdhdGVkRnJvbSAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctcHVycGxlLTEwMCB0ZXh0LXB1cnBsZS02MDAiPmZyb20ge3QuZGVsZWdhdGVkRnJvbX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDxEZWxlZ2F0ZUxhdW5jaHBhZCBzdXBhYmFzZT17c3VwYWJhc2V9IHN1cGFVc2VyPXtzdXBhVXNlcn0gdXNlclByb2ZpbGU9e3VzZXJQcm9maWxlfSBvbkRlbGVnYXRlPXtoYW5kbGVEZWxlZ2F0ZX0gST17SX0gLz4KICAgICAgICAgIHtkZWxlZ2F0ZWRUb01lLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAncGVuZGluZycpLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXB1cnBsZS0yMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLXB1cnBsZS01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctcHVycGxlLTUwLzMwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLmluYm94ID8gSS5pbmJveCgiIzhCNUNGNiIpIDogSS51c2VyKCIjOEI1Q0Y2Iil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LXB1cnBsZS05MDAiPkFzc2lnbmVkIHRvIE1lPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtNjAwIj57ZGVsZWdhdGVkVG9NZS5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ3BlbmRpbmcnKS5sZW5ndGh9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLXB1cnBsZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RlbGVnYXRlZFRvTWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdwZW5kaW5nJykuc2xpY2UoMCwgNSkubWFwKHQgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dC5pZH0gY2xhc3NOYW1lPSJweC01IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctNyBoLTcgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1wdXJwbGUtNjAwIGZvbnQtc2VtaWJvbGQgdGV4dC14cyBmbGV4LXNocmluay0wIj57dC5kZWxlZ2F0b3JfbmFtZSA/IHQuZGVsZWdhdG9yX25hbWUuc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsMikgOiAnPyd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlIj57dC50YXNrX3RleHR9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXB1cnBsZS01MDAiPmZyb20ge3QuZGVsZWdhdG9yX25hbWV9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjY2VwdGluZ1Rhc2sodCl9IGNsYXNzTmFtZT0idGV4dC14cyBweC0yIHB5LTEgcm91bmRlZCBiZy1ncmVlbi01MCB0ZXh0LWdyZWVuLTYwMCBob3ZlcjpiZy1ncmVlbi0xMDAgdHJhbnNpdGlvbiI+QWNjZXB0PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAKICAgIDxkaXYgY2xhc3NOYW1lPSJjb2wtc3Bhbi0yIHNwYWNlLXktNiI+CiAgICAgICAgICAgICAgICB7ZGVsZWdhdGVkVG9NZS5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyB8fCB0LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aCA+IDAgJiYgKAogICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTIwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZW1lcmFsZC01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gYmctZW1lcmFsZC01MC8zMCI+CiAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSI+CiAgICB7SS5jaGVja0NpcmNsZSA/IEkuY2hlY2tDaXJjbGUoIiMxMEI5ODEiKSA6IEkuY2hlY2soIiMxMEI5ODEiKX0KICAgIDxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWVtZXJhbGQtOTAwIj5BY3RpdmUgVGFza3M8L2gzPgogICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWVtZXJhbGQtMTAwIHRleHQtZW1lcmFsZC02MDAiPntkZWxlZ2F0ZWRUb01lLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnYWNjZXB0ZWQnKS5sZW5ndGh9IGFjdGl2ZTwvc3Bhbj4KICAgIHtkZWxlZ2F0ZWRUb01lLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RoID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctZ3JheS0xMDAgdGV4dC1ncmF5LTUwMCI+e2RlbGVnYXRlZFRvTWUuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGh9IGRvbmU8L3NwYW4+fQogICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZW1lcmFsZC01MCI+CiAgICB7ZGVsZWdhdGVkVG9NZS5maWx0ZXIodCA9PiB0LnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyB8fCB0LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLnNsaWNlKDAsIDEwKS5tYXAodCA9PiAoCiAgICA8ZGl2IGtleT17dC5pZH0gY2xhc3NOYW1lPXsicHgtNSBweS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIiArICh0LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAiIG9wYWNpdHktNjAiIDogIiIpfT4KICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdG9nZ2xlUmVjZWl2ZWRUYXNrKHQpfSBjbGFzc05hbWU9eyJ3LTYgaC02IHJvdW5kZWQtZnVsbCBib3JkZXItMiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LXNocmluay0wIHRyYW5zaXRpb24gIiArICh0LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAiYm9yZGVyLWVtZXJhbGQtNTAwIGJnLWVtZXJhbGQtNTAwIHRleHQtd2hpdGUiIDogImJvcmRlci1ncmF5LTMwMCBob3Zlcjpib3JkZXItZW1lcmFsZC00MDAiKX0+CiAgICB7dC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIDxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2VXaWR0aD0iMyIgc3Ryb2tlTGluZWNhcD0icm91bmQiIHN0cm9rZUxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iMjAgNiA5IDE3IDQgMTIiPjwvcG9seWxpbmU+PC9zdmc+fQogICAgPC9idXR0b24+CiAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgPHAgY2xhc3NOYW1lPXsidGV4dC1zbSB0cnVuY2F0ZSAiICsgKHQuc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICJ0ZXh0LWdyYXktNDAwIGxpbmUtdGhyb3VnaCIgOiAidGV4dC1ncmF5LTkwMCIpfT57dC50YXNrX3RleHR9PC9wPgogICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZW1lcmFsZC01MDAiPmZyb20ge3QuZGVsZWdhdG9yX25hbWV9e3QuZGVhZGxpbmUgPyAnIFx1MjAyMiBEdWUgJyArIHQuZGVhZGxpbmUgOiAnJ308L3A+CiAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgKSl9CiAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgKX0KCiAgICB7LyogSW5jb21pbmcgUGF5bWVudHMgQ2FyZCAqL30KICAgIHtpbmNvbWluZ1BheW1lbnRzLmZpbHRlcihwID0+IHAuc3RhdHVzID09PSAncGVuZGluZycpLmxlbmd0aCA+IDAgJiYgKAogICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1hbWJlci0yMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWFtYmVyLTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBiZy1hbWJlci01MC8zMCI+CiAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSI+CiAgICA8c3ZnIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNGNTlFMEIiIHN0cm9rZVdpZHRoPSIyIj48cGF0aCBkPSJNMTIgMnYyME0xNyA1SDkuNWEzLjUgMy41IDAgMCAwIDAgN2g1YTMuNSAzLjUgMCAwIDEgMCA3SDYiLz48L3N2Zz4KICAgIDxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWFtYmVyLTkwMCI+SW5jb21pbmcgUGF5bWVudHM8L2gzPgogICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTYwMCI+e2luY29taW5nUGF5bWVudHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RofTwvc3Bhbj4KICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLWFtYmVyLTUwIj4KICAgIHtpbmNvbWluZ1BheW1lbnRzLmZpbHRlcihwID0+IHAuc3RhdHVzID09PSAncGVuZGluZycpLnNsaWNlKDAsIDUpLm1hcCh0YWcgPT4gKAogICAgPGRpdiBrZXk9e3RhZy5pZH0gY2xhc3NOYW1lPSJweC01IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgPGRpdiBjbGFzc05hbWU9InctOCBoLTggcm91bmRlZC1mdWxsIGJnLWFtYmVyLTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWFtYmVyLTcwMCI+eyh0YWcuc2VuZGVyX25hbWUgfHwgJz8nKS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKX08L2Rpdj4KICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCB0cnVuY2F0ZSI+e1N0cmluZy5mcm9tQ2hhckNvZGUoODM1OCl9e051bWJlcih0YWcuYW1vdW50KS50b0xvY2FsZVN0cmluZygpfSB7dGFnLnBheW1lbnRfdHlwZX08L3A+CiAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+ZnJvbSB7dGFnLnNlbmRlcl9uYW1lfTwvcD4KICAgIDwvZGl2PgogICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhY2NlcHRQYXltZW50VGFnKHRhZyl9IGNsYXNzTmFtZT0icHgtMi41IHB5LTEgdGV4dC14cyBmb250LW1lZGl1bSBiZy1lbWVyYWxkLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctZW1lcmFsZC02MDAgdHJhbnNpdGlvbiI+QWNjZXB0PC9idXR0b24+CiAgICA8L2Rpdj4KICAgICkpfQogICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgICl9CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIGdyb3VwIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLWFsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyZWxhdGl2ZSBiZy1ncmFkaWVudC10by1iciBmcm9tLXNsYXRlLTkwMCB2aWEtc2xhdGUtODAwIHRvLXNsYXRlLTkwMCBwLTYgdGV4dC13aGl0ZSBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGluc2V0LTAgb3BhY2l0eS01IiBzdHlsZT17e2JhY2tncm91bmRJbWFnZTogJ3JlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoMGRlZywgdHJhbnNwYXJlbnQsIHRyYW5zcGFyZW50IDExcHgsIHJnYmEoMjU1LDI1NSwyNTUsMC4zKSAxMXB4LCByZ2JhKDI1NSwyNTUsMjU1LDAuMykgMTJweCknfX0+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xIGgtNiByb3VuZGVkLWZ1bGwgYmctYW1iZXItNDAwIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBmb250LXNlbWlib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgdGV4dC1hbWJlci00MDAiPkludGVsbGlnZW5jZTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLm5ld3NwYXBlcigiI0I4OTUyQyIpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIHtzaGFyZWRQcm9qZWN0cy5sZW5ndGggPiAwICYmIDxkaXYgY2xhc3NOYW1lPSJiZy1ncmFkaWVudC10by1iciBmcm9tLWluZGlnby05MDAgdG8tcHVycGxlLTkwMCByb3VuZGVkLXhsIHAtNCBtYi00IHRleHQtd2hpdGUiPjxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1ib2xkIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzc05hbWU9InctNCBoLTQiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIHN0cm9rZVdpZHRoPXsyfSBkPSJNMTcgMjBoNXYtMmEzIDMgMCAwMC01LjM1Ni0xLjg1N00xNyAyMEg3bTEwIDB2LTJjMC0uNjU2LS4xMjYtMS4yODMtLjM1Ni0xLjg1N003IDIwSDJ2LTJhMyAzIDAgMDE1LjM1Ni0xLjg1N003IDIwdi0yYzAtLjY1Ni4xMjYtMS4yODMuMzU2LTEuODU3bTAgMGE1LjAwMiA1LjAwMiAwIDAxOS4yODggME0xNSA3YTMgMyAwIDExLTYgMCAzIDMgMCAwMTYgMHoiIC8+PC9zdmc+U2hhcmVkIFByb2plY3RzICh7c2hhcmVkUHJvamVjdHMubGVuZ3RofSk8L2gzPjxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPntzaGFyZWRQcm9qZWN0cy5tYXAoZnVuY3Rpb24oc3AsIHNpKSB7IHZhciBzbmFwID0gc3AucHJvamVjdF9zbmFwc2hvdCB8fCB7fTsgcmV0dXJuIDxkaXYga2V5PXtzaX0gY2xhc3NOYW1lPSJiZy13aGl0ZS8xMCByb3VuZGVkLWxnIHAtMiI+PGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQiPntzbmFwLm5hbWUgfHwgIlByb2plY3QifTwvc3Bhbj48c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIG9wYWNpdHktNzAiPntzbmFwLnN0YXR1cyB8fCAiQWN0aXZlIn08L3NwYW4+PC9kaXY+PGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG10LTEiPjxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgaC0xIGJnLXdoaXRlLzIwIHJvdW5kZWQtZnVsbCI+PGRpdiBjbGFzc05hbWU9ImgtZnVsbCBiZy1ncmVlbi00MDAgcm91bmRlZC1mdWxsIiBzdHlsZT17e3dpZHRoOiAoc25hcC5wcm9ncmVzcyB8fCAwKSArICIlIn19PjwvZGl2PjwvZGl2PjxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gb3BhY2l0eS02MCI+e3NuYXAucHJvZ3Jlc3MgfHwgMH0lPC9zcGFuPjwvZGl2PjwvZGl2PjsgfSl9PC9kaXY+PC9kaXY+fQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LWxnIGZvbnQtYm9sZCBsZWFkaW5nLXNudWcgbWItMSIgc3R5bGU9e3tmb250RmFtaWx5OiAnR2VvcmdpYSwgVGltZXMgTmV3IFJvbWFuLCBzZXJpZid9fT5Nb3JuaW5nIEJyaWVmaW5nPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1zbGF0ZS00MDAgbWItMyIgc3R5bGU9e3tmb250RmFtaWx5OiAnR2VvcmdpYSwgc2VyaWYnfX0+e2JyaWVmaW5nRGF0ZX08L3A+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHticmllZmluZyA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHticmllZmluZy5oZWFkbGluZSAmJiA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWFtYmVyLTMwMCBtYi0zIGxlYWRpbmctc251ZyIgc3R5bGU9e3tmb250RmFtaWx5OiAnR2VvcmdpYSwgc2VyaWYnfX0+e2JyaWVmaW5nLmhlYWRsaW5lfTwvcD59CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJvcmRlci10IGJvcmRlci1zbGF0ZS03MDAgcHQtMyBzcGFjZS15LTMgbWF4LWgtNjQgb3ZlcmZsb3cteS1hdXRvIiBzdHlsZT17e3Njcm9sbGJhcldpZHRoOiAndGhpbicsIHNjcm9sbGJhckNvbG9yOiAnIzQ3NTU2OSB0cmFuc3BhcmVudCd9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnJpZWZpbmcuc2VjdGlvbnMgJiYgYnJpZWZpbmcuc2VjdGlvbnMubWFwKChzZWMsIHNpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzaX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgZm9udC1zZW1pYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgdGV4dC1hbWJlci00MDAvODAgbWItMS41Ij57c2VjLnRpdGxlfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWMuaXRlbXMgJiYgc2VjLml0ZW1zLm1hcCgoaXRlbSwgaWkpID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lpfSBjbGFzc05hbWU9ImZsZXggZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMSBoLTEgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTQwMCBtdC0xLjUgZmxleC1zaHJpbmstMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1zbGF0ZS0zMDAgbGVhZGluZy1yZWxheGVkIj57aXRlbX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJvcmRlci10IGJvcmRlci1zbGF0ZS03MDAgbXQtMyBwdC0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIj57YnJpZWZpbmcuYXV0b0dlbmVyYXRlZCA/IDxzcGFuIGNsYXNzTmFtZT0iaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48c3BhbiBjbGFzc05hbWU9InctMS41IGgtMS41IHJvdW5kZWQtZnVsbCBiZy1lbWVyYWxkLTQwMCBhbmltYXRlLXB1bHNlIj48L3NwYW4+IExpdmU8L3NwYW4+IDogJ0dlbmVyYXRlZCAnICsgKGJyaWVmaW5nLmdlbmVyYXRlZEF0ID8gbmV3IERhdGUoYnJpZWZpbmcuZ2VuZXJhdGVkQXQpLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSkgOiAnJyl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlTW9kdWxlKCdicmllZmluZycpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1hbWJlci00MDAgaG92ZXI6dGV4dC1hbWJlci0zMDAgZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPkZ1bGwgYnJpZWZpbmcge0kuYXJyb3dSaWdodCgiI0Q0QTg0MyIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTcwMCBwdC0zIG1iLTMgc3BhY2UteS0xLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PGRpdiBjbGFzc05hbWU9InctMSBoLTEgcm91bmRlZC1mdWxsIGJnLXNsYXRlLTYwMCI+PC9kaXY+PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIj5NYXJrZXQgaW50ZWxsaWdlbmNlICYgY29tcGV0aXRpdmUgYW5hbHlzaXM8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48ZGl2IGNsYXNzTmFtZT0idy0xIGgtMSByb3VuZGVkLWZ1bGwgYmctc2xhdGUtNjAwIj48L2Rpdj48cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1zbGF0ZS01MDAiPlJldmVudWUgJiBwZXJmb3JtYW5jZSBzdW1tYXJ5PC9wPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PGRpdiBjbGFzc05hbWU9InctMSBoLTEgcm91bmRlZC1mdWxsIGJnLXNsYXRlLTYwMCI+PC9kaXY+PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIj5TdHJhdGVnaWMgcHJpb3JpdGllcyAmIGFjdGlvbiBpdGVtczwvcD48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGl0YWxpYyI+Tm8gYnJpZWZpbmcgeWV0IHRvZGF5LiBTYXkgIm1vcm5pbmcgYnJpZWZpbmciIGluIENvd29yayB0byBnZW5lcmF0ZS48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBiZy1lbWVyYWxkLTUwLzUwIGJvcmRlci1iIGJvcmRlci1lbWVyYWxkLTEwMC81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzA1OTY2OSIgc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxsaW5lIHgxPSIyIiB5MT0iMTIiIHgyPSIyMiIgeTI9IjEyIi8+PHBhdGggZD0iTTEyIDJhMTUuMyAxNS4zIDAgMCAxIDQgMTAgMTUuMyAxNS4zIDAgMCAxLTQgMTAgMTUuMyAxNS4zIDAgMCAxLTQtMTAgMTUuMyAxNS4zIDAgMCAxIDQtMTB6Ii8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPlN0YXRlIG9mIHRoZSBOYXRpb248L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZU1vZHVsZSgnYnJpZWZpbmcnKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZW1lcmFsZC02MDAgaG92ZXI6dGV4dC1lbWVyYWxkLTcwMCBmb250LW1lZGl1bSI+RnVsbCByZXBvcnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIHtuYXRpb25CcmllZmluZyA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgZGl2aWRlLXggZGl2aWRlLWdyYXktNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmF0aW9uQnJpZWZpbmcuaW5kaWNhdG9ycyAmJiBuYXRpb25CcmllZmluZy5pbmRpY2F0b3JzLm1hcCgoaW5kLCBpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSJweC00IHB5LTMgYm9yZGVyLWIgYm9yZGVyLWdyYXktNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG1iLTAuNSI+e2luZC5sYWJlbH08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+e2luZC52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXsndGV4dC14cyAnICsgKGluZC50cmVuZCA9PT0gJ3VwJyA/ICd0ZXh0LWVtZXJhbGQtNTAwJyA6IGluZC50cmVuZCA9PT0gJ2Rvd24nID8gJ3RleHQtcmVkLTQwMCcgOiAndGV4dC1ncmF5LTQwMCcpfT57aW5kLm5vdGV9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTMgc3BhY2UteS0yIGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYXRpb25CcmllZmluZy5oZWFkbGluZXMgJiYgbmF0aW9uQnJpZWZpbmcuaGVhZGxpbmVzLnNsaWNlKDAsIDQpLm1hcCgoaCwgaSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0iZmxleCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMSBoLTEgcm91bmRlZC1mdWxsIGJnLWVtZXJhbGQtNDAwIG10LTEuNSBmbGV4LXNocmluay0wIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTYwMCBsZWFkaW5nLXJlbGF4ZWQiPntofTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmF0aW9uQnJpZWZpbmcuc2VjdGlvbnMgJiYgbmF0aW9uQnJpZWZpbmcuc2VjdGlvbnMubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTMgc3BhY2UteS0zIG1heC1oLTcyIG92ZXJmbG93LXktYXV0byIgc3R5bGU9e3tzY3JvbGxiYXJXaWR0aDogJ3RoaW4nLCBzY3JvbGxiYXJDb2xvcjogJyNBN0YzRDAgdHJhbnNwYXJlbnQnfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmF0aW9uQnJpZWZpbmcuc2VjdGlvbnMubWFwKChzZWMsIHNpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3NpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIHRleHQtZW1lcmFsZC02MDAgbWItMS41Ij57c2VjLmVtb2ppfSB7c2VjLnRpdGxlfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VjLml0ZW1zICYmIHNlYy5pdGVtcy5tYXAoKGl0ZW0sIGlpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lpfSBjbGFzc05hbWU9ImZsZXggZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xIGgtMSByb3VuZGVkLWZ1bGwgYmctZW1lcmFsZC0zMDAgbXQtMS41IGZsZXgtc2hyaW5rLTAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCBsZWFkaW5nLXJlbGF4ZWQiPntpdGVtfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTIuNSBib3JkZXItdCBib3JkZXItZ3JheS0xMDAgYmctZ3JheS01MC8zMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e25hdGlvbkJyaWVmaW5nLmxhc3RMaXZlVXBkYXRlID8gPHNwYW4gY2xhc3NOYW1lPSJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxzcGFuIGNsYXNzTmFtZT0idy0xLjUgaC0xLjUgcm91bmRlZC1mdWxsIGJnLWVtZXJhbGQtNDAwIGFuaW1hdGUtcHVsc2UiPjwvc3Bhbj4gRlggbGl2ZTwvc3Bhbj4gOiAoJ0RhdGEgZnJvbSAnICsgKG5hdGlvbkJyaWVmaW5nLmRhdGUgPyBuZXcgRGF0ZShuYXRpb25CcmllZmluZy5kYXRlICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7bW9udGg6ICdzaG9ydCcsIGRheTogJ251bWVyaWMnfSkgOiAnJykpfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hdGlvbkJyaWVmaW5nLmRvY3hGaWxlICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWVtZXJhbGQtNTAwIGZvbnQtbWVkaXVtIj57SS5uZXdzcGFwZXIoIiMwNTk2NjkiKX0gUmVwb3J0IHJlYWR5PC9wPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InAtNiB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS00MDAiPk5vIG5hdGlvbiBicmllZmluZyB5ZXQ8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMSI+U2F5ICJtb3JuaW5nIGJyaWVmaW5nIiBpbiBDb3dvcmsgdG8gZ2VuZXJhdGU8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTUgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLnRyZW5kaW5nKCIjM0I4MkY2Iil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+V2Vla2x5IFByb2dyZXNzPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWVuZCBnYXAtMyBtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC0zeGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57d2Vla2x5RG9uZUNDLmRvbmV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS00MDAgcGItMSI+LyB7d2Vla2x5RG9uZUNDLnRvdGFsfSB0YXNrczwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIHt3ZWVrbHlEb25lQ0MudG90YWwgPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLTIuNSBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC1mdWxsIGJnLWJsdWUtNTAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCIgc3R5bGU9e3t3aWR0aDogKHdlZWtseURvbmVDQy50b3RhbCA+IDAgPyAod2Vla2x5RG9uZUNDLmRvbmUgLyB3ZWVrbHlEb25lQ0MudG90YWwpICogMTAwIDogMCkgKyAnJSd9fT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0yIj57TWF0aC5yb3VuZCgod2Vla2x5RG9uZUNDLmRvbmUgLyB3ZWVrbHlEb25lQ0MudG90YWwpICogMTAwKX0lIGNvbXBsZXRlIHRoaXMgd2VlazwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0QWN0aXZlTW9kdWxlKCdwbGFubmVyJyk7IHNldFBsYW5uZXJUYWIoJ3dlZWtseScpOyB9fSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIG10LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPlZpZXcgd2Vla2x5IHBsYW4ge0kuYXJyb3dSaWdodCgiIzNCODJGNiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93IG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMi41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7SS5idWxiKCIjOEI1Q0Y2Iil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkFjdGl2ZSBQcm9qZWN0czwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtNjAwIj57YWN0aXZlUHJvamVjdHMubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVNb2R1bGUoJ2luY29tZScpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIj5WaWV3IGFsbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVByb2plY3RzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTYgdGV4dC1jZW50ZXIiPjxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIj5ObyBhY3RpdmUgcHJvamVjdHM8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLWdyYXktNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtbLi4uYWN0aXZlUHJvamVjdHNdLnNvcnQoKGEsIGIpID0+IChnZXRQcm9qZWN0UHJvZ3Jlc3MoYi5pZCkgfHwgMCkgLSAoZ2V0UHJvamVjdFByb2dyZXNzKGEuaWQpIHx8IDApKS5zbGljZSgwLCA1KS5tYXAocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2cgPSBnZXRQcm9qZWN0UHJvZ3Jlc3MocC5pZCkgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3AuaWR9IGNsYXNzTmFtZT0icHgtNSBweS0zIGhvdmVyOmJnLWdyYXktNTAvMzAgdHJhbnNpdGlvbiBjdXJzb3ItcG9pbnRlciIgb25DbGljaz17KCkgPT4geyBzZXRFZGl0SXRlbShwKTsgc2V0TW9kYWwoJ2VkaXRQcm9qZWN0Jyk7IH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0xLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlIj57cC5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBmbGV4LXNocmluay0wIG1sLTIiPntwcm9nfSU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC0xLjUgYmctZ3JheS0xMDAgcm91bmRlZC1mdWxsIj48ZGl2IGNsYXNzTmFtZT0iaC1mdWxsIGJnLWJsdWUtNTAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCIgc3R5bGU9e3t3aWR0aDogcHJvZyArICclJ319PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgICk7CiAgICB9OwoKICAgIGNvbnN0IEluY29tZU1vZHVsZSA9ICgpID0+IHsKICAgICAgICBjb25zdCBleHBlbnNlc0J5Q2F0ZWdvcnkgPSB1c2VNZW1vKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgY2F0cyA9IHt9OwogICAgICAgICAgICBleHBlbnNlcy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbW9udGhseSA9IGUuZnJlcXVlbmN5ID09PSAnV2Vla2x5JyA/IGUuYW1vdW50ICogNC4zMyA6IGUuZnJlcXVlbmN5ID09PSAnUXVhcnRlcmx5JyA/IGUuYW1vdW50IC8gMyA6IGUuZnJlcXVlbmN5ID09PSAnQW5udWFsJyA/IGUuYW1vdW50IC8gMTIgOiBlLmZyZXF1ZW5jeSA9PT0gJ09uZS10aW1lJyA/IDAgOiBlLmFtb3VudDsKICAgICAgICAgICAgICAgIGNhdHNbZS5jYXRlZ29yeV0gPSAoY2F0c1tlLmNhdGVnb3J5XSB8fCAwKSArIG1vbnRobHk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY2F0cykuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pOwogICAgICAgIH0sIFtleHBlbnNlc10pOwoKICAgICAgICBjb25zdCBleHBlbnNlc0J5U3RyZWFtID0gdXNlTWVtbygoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHt9OwogICAgICAgICAgICBleHBlbnNlcy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgaWYgKGUubGlua2VkU3RyZWFtSWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcFtlLmxpbmtlZFN0cmVhbUlkXSkgbWFwW2UubGlua2VkU3RyZWFtSWRdID0gW107CiAgICAgICAgICAgICAgICAgICAgbWFwW2UubGlua2VkU3RyZWFtSWRdLnB1c2goZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbWFwOwogICAgICAgIH0sIFtleHBlbnNlc10pOwoKICAgICAgICBjb25zdCBjYXRJY29ucyA9IHsgJ1NhbGFyeSc6ICfDsMKfwpLCsCcsICdSZW50JzogJ8Owwp/Cj8KgJywgJ09wZXJhdGlvbnMnOiAn4pqZw6/CuMKPJywgJ01hcmtldGluZyc6ICfDsMKfwpPCoycsICdTb2Z0d2FyZSc6ICfDsMKfwpLCuycsICdUcmFuc3BvcnQnOiAnw7DCn8KawpcnLCAnVXRpbGl0aWVzJzogJ+KaoScsICdUYXgnOiAnw7DCn8KTwosnLCAnT3RoZXInOiAnw7DCn8KTwownIH07CgogICAgICAgIHJldHVybiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktOCBtYXgtdy02eGwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtNSBnYXAtNCI+CiAgICAgICAgICAgICAgICA8TWV0cmljQ2FyZCBsYWJlbD0iTW9udGhseSBJbmNvbWUiIHZhbHVlPXtmbXROYWlyYSh0b3RhbE1vbnRobHkpfSBzdWI9e2luY29tZVN0cmVhbXMubGVuZ3RoICsgJyBzdHJlYW1zJ30gdHJlbmQ9ezF9IGljb249e0kudHJlbmRpbmcoIiMxMEI5ODEiKX0gLz4KICAgICAgICAgICAgICAgIDxNZXRyaWNDYXJkIGxhYmVsPSJNb250aGx5IEV4cGVuc2VzIiB2YWx1ZT17Zm10TmFpcmEodG90YWxFeHBlbnNlcyl9IHN1Yj17ZXhwZW5zZXMubGVuZ3RoICsgJyBpdGVtcyd9IHRyZW5kPXstMX0gaWNvbj17SS5yZWNlaXB0KCIjRUY0NDQ0Iil9IC8+CiAgICAgICAgICAgICAgICA8TWV0cmljQ2FyZCBsYWJlbD0iTmV0IEluY29tZSIgdmFsdWU9e2ZtdE5haXJhKG5ldE1vbnRobHkpfSBzdWI9e25ldE1vbnRobHkgPj0gMCA/ICdIZWFsdGh5JyA6ICdEZWZpY2l0J30gdHJlbmQ9e25ldE1vbnRobHkgPj0gMCA/IDEgOiAtMX0gaWNvbj17SS53YWxsZXQobmV0TW9udGhseSA+PSAwID8gIiMxMEI5ODEiIDogIiNFRjQ0NDQiKX0gLz4KICAgICAgICAgICAgICAgIDxNZXRyaWNDYXJkIGxhYmVsPSJBbm51YWwgUHJvamVjdGVkIiB2YWx1ZT17Zm10TmFpcmEodG90YWxNb250aGx5ICogMTIpfSBzdWI9e2ZtdE5haXJhKG5ldE1vbnRobHkgKiAxMikgKyAnIG5ldC95cid9IHRyZW5kPXtuZXRNb250aGx5ID49IDAgPyAxIDogLTF9IGljb249e0kuYmFyKCIjOEI1Q0Y2Iil9IC8+CiAgICAgICAgICAgICAgICA8TWV0cmljQ2FyZCBsYWJlbD0iTmV4dCBQYXltZW50IiB2YWx1ZT17bmV4dFBheW1lbnREdWUgPyBuZXcgRGF0ZShuZXh0UGF5bWVudER1ZS5uZXh0UGF5bWVudCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHttb250aDonc2hvcnQnLCBkYXk6J251bWVyaWMnfSkgOiAnLS0nfSBzdWI9e25leHRQYXltZW50RHVlID8gbmV4dFBheW1lbnREdWUubmFtZSA6ICdObyBkYXRlcyBzZXQnfSB0cmVuZD17MH0gaWNvbj17SS5jYWxlbmRhcigiIzNCODJGNiIpfSAvPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIHsvKiBJbmNvbWluZyBQYXltZW50cyAqL30KICAgICAgICAgICAge2luY29taW5nUGF5bWVudHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iYmctZ3JhZGllbnQtdG8tciBmcm9tLWFtYmVyLTUwIHRvLW9yYW5nZS01MCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYW1iZXItMjAwIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHgtNSBweS00IGJvcmRlci1iIGJvcmRlci1hbWJlci0xMDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIuNSI+CiAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjRjU5RTBCIiBzdHJva2VXaWR0aD0iMiI+PHBhdGggZD0iTTEyIDJ2MjBNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2Ii8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtYW1iZXItOTAwIj5JbmNvbWluZyBQYXltZW50czwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTEwMCB0ZXh0LWFtYmVyLTcwMCI+e2luY29taW5nUGF5bWVudHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RofSBwZW5kaW5nPC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLWFtYmVyLTEwMCI+CiAgICAgICAgICAgICAgICAgICAge2luY29taW5nUGF5bWVudHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdwZW5kaW5nJykubWFwKHRhZyA9PiA8ZGl2IGtleT17dGFnLmlkfSBjbGFzc05hbWU9InB4LTUgcHktNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJnLWFtYmVyLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWFtYmVyLTcwMCI+eyh0YWcuc2VuZGVyX25hbWUgfHwgJz8nKS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIj57dGFnLnNlbmRlcl9uYW1lfSB0YWdnZWQgeW91PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPntTdHJpbmcuZnJvbUNoYXJDb2RlKDgzNTgpfXtOdW1iZXIodGFnLmFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKX0ge1N0cmluZy5mcm9tQ2hhckNvZGUoMTgzKX0ge3RhZy5wYXltZW50X3R5cGV9IHtTdHJpbmcuZnJvbUNoYXJDb2RlKDE4Myl9IHt0YWcuZnJlcXVlbmN5fXt0YWcuY29tcGFueV9uYW1lID8gJyAnICsgU3RyaW5nLmZyb21DaGFyQ29kZSgxODMpICsgJyAnICsgdGFnLmNvbXBhbnlfbmFtZSA6ICcnfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWcubm90ZSAmJiA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0wLjUiPnt0YWcubm90ZX08L3A+fQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBhY2NlcHRQYXltZW50VGFnKHRhZyl9IGNsYXNzTmFtZT0icHgtMyBweS0xLjUgdGV4dC14cyBmb250LW1lZGl1bSBiZy1lbWVyYWxkLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctZW1lcmFsZC02MDAgdHJhbnNpdGlvbiI+QWNjZXB0PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGRlY2xpbmVQYXltZW50VGFnKHRhZyl9IGNsYXNzTmFtZT0icHgtMyBweS0xLjUgdGV4dC14cyBmb250LW1lZGl1bSBiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNjAwIHJvdW5kZWQtbGcgaG92ZXI6YmctcmVkLTUwIGhvdmVyOnRleHQtcmVkLTYwMCB0cmFuc2l0aW9uIj5EZWNsaW5lPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2Pil9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+fQoKICAgICAgICAgICAgey8qIEFjY2VwdGVkIFBheW1lbnRzICovfQogICAgICAgICAgICB7aW5jb21pbmdQYXltZW50cy5maWx0ZXIocCA9PiBwLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJykubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iYmctZW1lcmFsZC01MC81MCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZW1lcmFsZC0xMDAgcC00IG1iLTIiPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZW1lcmFsZC02MDAgbWItMiI+UmVjZW50bHkgQWNjZXB0ZWQgUGF5bWVudHM8L3A+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICB7aW5jb21pbmdQYXltZW50cy5maWx0ZXIocCA9PiBwLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJykuc2xpY2UoMCwgMykubWFwKHRhZyA9PiA8ZGl2IGtleT17dGFnLmlkfSBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQteHMgdGV4dC1ncmF5LTUwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzEwQjk4MSIgc3Ryb2tlV2lkdGg9IjMiPjxwb2x5bGluZSBwb2ludHM9IjIwIDYgOSAxNyA0IDEyIi8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntTdHJpbmcuZnJvbUNoYXJDb2RlKDgzNTgpfXtOdW1iZXIodGFnLmFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKX0ge3RhZy5wYXltZW50X3R5cGV9IGZyb20ge3RhZy5zZW5kZXJfbmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX0KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj59CgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00Ij4KICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5JbmNvbWUgU3RyZWFtczwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbCgnYWRkSW5jb21lJyl9IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWJsdWUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPntJLnBsdXMoIiMzQjgyRjYiKX0gQWRkPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIHtpbmNvbWVTdHJlYW1zLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5IGljb249e0kuZG9sbGFyKCIjOUNBM0FGIil9IHRpdGxlPSJObyBpbmNvbWUgc3RyZWFtcyB5ZXQiIHN1Yj0iQWRkIHlvdXIgZmlyc3QgaW5jb21lIHN0cmVhbSB0byBzdGFydCB0cmFja2luZyIgYWN0aW9uPXsoKSA9PiBzZXRNb2RhbCgnYWRkSW5jb21lJyl9IGFjdGlvbkxhYmVsPSJBZGQgSW5jb21lIFN0cmVhbSIgLz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIHtpbmNvbWVTdHJlYW1zLm1hcChzID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzLmlkfSBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTUgY2FyZC1zaGFkb3cgY2FyZC1zaGFkb3ctaG92ZXIgdHJhbnNpdGlvbi1hbGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgY3Vyc29yLXBvaW50ZXIgZmxleC0xIiBvbkNsaWNrPXsoKSA9PiBzZXRFeHBhbmRlZEluY29tZShleHBhbmRlZEluY29tZSA9PT0gcy5pZCA/IG51bGwgOiBzLmlkKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J3ctMiBoLTEyIHJvdW5kZWQtZnVsbCAnICsgKHMuc3RhdHVzID09PSAnR3Jvd2luZycgPyAnYmctYmx1ZS00MDAnIDogcy5zdGF0dXMgPT09ICdBdCBSaXNrJyA/ICdiZy1yZWQtMzAwJyA6ICdiZy1lbWVyYWxkLTQwMCcpfT48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIHRleHQtc20iPntzLm5hbWV9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsocy5yb2xlIHx8IHMuY29tcGFueSkgJiYgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMC41Ij57cy5yb2xlfXtzLnJvbGUgJiYgcy5jb21wYW55ID8gJyDigKIgJyA6ICcnfXtzLmNvbXBhbnl9PC9wPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtdC0xIGZsZXgtd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17J3RleHQteHMgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsICcgKyAocy50eXBlID09PSAnQWN0aXZlJyA/ICdiZy1ibHVlLTUwIHRleHQtYmx1ZS02MDAnIDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS01MDAnKX0+e3MudHlwZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17J3RleHQteHMgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsICcgKyAoc3RhdHVzQ29sb3JzW3Muc3RhdHVzXSB8fCAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTYwMCcpfT57cy5zdGF0dXN9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy5wYXltZW50Q3ljbGUgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNTAwIj57cy5wYXltZW50Q3ljbGV9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MubmV4dFBheW1lbnQgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1hbWJlci01MCB0ZXh0LWFtYmVyLTcwMCI+RHVlIHtuZXcgRGF0ZShzLm5leHRQYXltZW50KS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsIGRheTonbnVtZXJpYyd9KX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgZmxleC1zaHJpbmstMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy50cmVuZCAmJiA8U3BhcmsgZGF0YT17cy50cmVuZH0gLz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1yaWdodCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+e2ZtdE5haXJhKHMubW9udGhseSl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleHBlbnNlc0J5U3RyZWFtW3MuaWRdICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXJlZC01MDAgbXQtMC41Ij4te2ZtdE5haXJhKGV4cGVuc2VzQnlTdHJlYW1bcy5pZF0ucmVkdWNlKCh0LGUpID0+IHQgKyBlLmFtb3VudCwgMCkpfSBleHBlbnNlczwvcD59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17ZSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IHNldEVkaXRJdGVtKHMpOyBzZXRNb2RhbCgnZWRpdEluY29tZScpOyB9fSBjbGFzc05hbWU9InAtMS41IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbiI+e0kuZWRpdCgiIzlDQTNBRiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzLnBheW1lbnRzICYmIHMucGF5bWVudHMubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LTMgcHQtMyBib3JkZXItdCBib3JkZXItZ3JheS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPlBheW1lbnQgUHJvZ3Jlc3M8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+e3MucGF5bWVudHMuZmlsdGVyKHAgPT4gcC5wYWlkKS5sZW5ndGh9L3tzLnBheW1lbnRzLmxlbmd0aH0gcGFpZDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMS41IG1iLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLWdyZWVuLTUwMCBoLTEuNSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwiIHN0eWxlPXt7d2lkdGg6IE1hdGgucm91bmQocy5wYXltZW50cy5maWx0ZXIocCA9PiBwLnBhaWQpLmxlbmd0aCAvIHMucGF5bWVudHMubGVuZ3RoICogMTAwKSArICclJ319PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy5wYXltZW50cy5tYXAocG0gPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtwbS5pZH0gY2xhc3NOYW1lPXsiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQteHMgcHgtMiBweS0xIHJvdW5kZWQgIiArIChwbS5wYWlkID8gInRleHQtZ3JlZW4tNzAwIGJnLWdyZWVuLTUwIiA6ICJ0ZXh0LWdyYXktNjAwIGJnLWdyYXktNTAiKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57cG0ucGFpZCA/ICJcdTI3MTMiIDogIlx1MjVDQiJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtwbS5wYWlkID8gImxpbmUtdGhyb3VnaCIgOiAiIn0+e3BtLmxhYmVsIHx8ICdQYXltZW50J308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BtLmFtb3VudCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJmb250LW1lZGl1bSI+e2ZtdE5haXJhKHBtLmFtb3VudCl9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwbS5kdWVEYXRlICYmICFwbS5wYWlkICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1hbWJlci02MDAiPkR1ZSB7bmV3IERhdGUocG0uZHVlRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHttb250aDonc2hvcnQnLCBkYXk6J251bWVyaWMnfSl9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwbS5wYWlkICYmIHBtLnBhaWREYXRlICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1ncmVlbi02MDAiPlBhaWQge25ldyBEYXRlKHBtLnBhaWREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsIGRheTonbnVtZXJpYyd9KX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MucGF5bWVudHMuc29tZShwID0+ICFwLnBhaWQpICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtdC0yIHRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1hbWJlci02MDAgYmctYW1iZXItNTAgcm91bmRlZCBweC0yIHB5LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhbGFuY2UgcmVtYWluaW5nOiB7Zm10TmFpcmEocy5wYXltZW50cy5maWx0ZXIocCA9PiAhcC5wYWlkKS5yZWR1Y2UoKHQsIHApID0+IHQgKyAocC5hbW91bnQgfHwgMCksIDApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNCI+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+RXhwZW5zZXM8L2gyPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ2FkZEV4cGVuc2UnKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+e0kucGx1cygiIzNCODJGNiIpfSBBZGQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAge2V4cGVuc2VzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5IGljb249e0kucmVjZWlwdCgiIzlDQTNBRiIpfSB0aXRsZT0iTm8gZXhwZW5zZXMgdHJhY2tlZCB5ZXQiIHN1Yj0iQWRkIGV4cGVuc2VzIHRvIHNlZSB5b3VyIG5ldCBpbmNvbWUiIGFjdGlvbj17KCkgPT4gc2V0TW9kYWwoJ2FkZEV4cGVuc2UnKX0gYWN0aW9uTGFiZWw9IkFkZCBFeHBlbnNlIiAvPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAge3RvdGFsRXhwZW5zZXMgPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgcC01Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIj5Nb250aGx5IEJyZWFrZG93bjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+e2ZtdE5haXJhKHRvdGFsRXhwZW5zZXMpfS9tbzwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGgtMyBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwgZmxleCBvdmVyZmxvdy1oaWRkZW4gbWItMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleHBlbnNlc0J5Q2F0ZWdvcnkubWFwKChbY2F0LCBhbXRdLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBbJ2JnLXJlZC00MDAnLCdiZy1vcmFuZ2UtNDAwJywnYmctYW1iZXItNDAwJywnYmctYmx1ZS00MDAnLCdiZy1wdXJwbGUtNDAwJywnYmctcGluay00MDAnLCdiZy10ZWFsLTQwMCcsJ2JnLWluZGlnby00MDAnLCdiZy1ncmF5LTQwMCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtjYXR9IGNsYXNzTmFtZT17Y29sb3JzW2kgJSBjb2xvcnMubGVuZ3RoXSArICcgaC1mdWxsJ30gc3R5bGU9e3t3aWR0aDogKGFtdCAvIHRvdGFsRXhwZW5zZXMgKiAxMDApICsgJyUnfX0gdGl0bGU9e2NhdCArICc6ICcgKyBmbXROYWlyYShhbXQpfT48L2Rpdj47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtd3JhcCBnYXAteC00IGdhcC15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXhwZW5zZXNCeUNhdGVnb3J5Lm1hcCgoW2NhdCwgYW10XSwgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG90cyA9IFsnYmctcmVkLTQwMCcsJ2JnLW9yYW5nZS00MDAnLCdiZy1hbWJlci00MDAnLCdiZy1ibHVlLTQwMCcsJ2JnLXB1cnBsZS00MDAnLCdiZy1waW5rLTQwMCcsJ2JnLXRlYWwtNDAwJywnYmctaW5kaWdvLTQwMCcsJ2JnLWdyYXktNDAwJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBrZXk9e2NhdH0gY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41Ij48ZGl2IGNsYXNzTmFtZT17J3ctMiBoLTIgcm91bmRlZC1mdWxsICcgKyBkb3RzW2kgJSBkb3RzLmxlbmd0aF19PjwvZGl2PjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj57Y2F0fTwvc3Bhbj48c3BhbiBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCI+e2ZtdE5haXJhKGFtdCl9PC9zcGFuPjwvZGl2PjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXhwZW5zZXMubWFwKGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZCA9IGUubGlua2VkU3RyZWFtSWQgPyBpbmNvbWVTdHJlYW1zLmZpbmQocyA9PiBzLmlkID09PSBlLmxpbmtlZFN0cmVhbUlkKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlRGF0ZU9iaiA9IGUuZHVlRGF0ZSA/IG5ldyBEYXRlKGUuZHVlRGF0ZSArICdUMDA6MDA6MDAnKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOyB0b2RheS5zZXRIb3VycygwLDAsMCwwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXlzVW50aWxEdWUgPSBkdWVEYXRlT2JqID8gTWF0aC5jZWlsKChkdWVEYXRlT2JqIC0gdG9kYXkpIC8gODY0MDAwMDApIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVDb2xvciA9IGRheXNVbnRpbER1ZSAhPT0gbnVsbCA/IChkYXlzVW50aWxEdWUgPCAwID8gJ3RleHQtcmVkLTUwMCcgOiBkYXlzVW50aWxEdWUgPD0gMyA/ICd0ZXh0LWFtYmVyLTUwMCcgOiAndGV4dC1ncmF5LTQwMCcpIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVlTGFiZWwgPSBkYXlzVW50aWxEdWUgIT09IG51bGwgPyAoZGF5c1VudGlsRHVlIDwgMCA/ICdPdmVyZHVlJyA6IGRheXNVbnRpbER1ZSA9PT0gMCA/ICdEdWUgdG9kYXknIDogZGF5c1VudGlsRHVlID09PSAxID8gJ0R1ZSB0b21vcnJvdycgOiBkYXlzVW50aWxEdWUgPD0gNyA/ICdEdWUgaW4gJyArIGRheXNVbnRpbER1ZSArICcgZGF5cycgOiBkdWVEYXRlT2JqLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7bW9udGg6ICdzaG9ydCcsIGRheTogJ251bWVyaWMnfSkpIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZS5pZH0gY2xhc3NOYW1lPXsnYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgcHgtNSBweS00IGNhcmQtc2hhZG93IGNhcmQtc2hhZG93LWhvdmVyIHRyYW5zaXRpb24tYWxsICcgKyAoZGF5c1VudGlsRHVlICE9PSBudWxsICYmIGRheXNVbnRpbER1ZSA8IDAgPyAnYm9yZGVyLXJlZC0yMDAnIDogZGF5c1VudGlsRHVlICE9PSBudWxsICYmIGRheXNVbnRpbER1ZSA8PSAzID8gJ2JvcmRlci1hbWJlci0yMDAnIDogJ2JvcmRlci1ncmF5LTEwMCcpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1sZyBmbGV4LXNocmluay0wIiByb2xlPSJpbWciPntjYXRJY29uc1tlLmNhdGVnb3J5XSB8fCAnw7DCn8KTwownfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIj57ZS5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIgbXQtMC41IGZsZXgtd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e2UuY2F0ZWdvcnl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS0zMDAiPuKAojwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57ZS5mcmVxdWVuY3l9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmtlZCAmJiA8PjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktMzAwIj7igKI8L3NwYW4+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAiPmZyb20ge2xpbmtlZC5uYW1lfTwvc3Bhbj48Lz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZS5kdWVEYXRlICYmIDw+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS0zMDAiPuKAojwvc3Bhbj48c3BhbiBjbGFzc05hbWU9eyd0ZXh0LXhzIGZvbnQtbWVkaXVtICcgKyBkdWVDb2xvcn0+e2R1ZUxhYmVsfTwvc3Bhbj48Lz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZS5ub3RlICYmIDw+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS0zMDAiPuKAojwvc3Bhbj48c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBpdGFsaWMiPntlLm5vdGV9PC9zcGFuPjwvPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXJlZC02MDAiPi17Zm10TmFpcmEoZS5hbW91bnQpfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0RWRpdEl0ZW0oZSk7IHNldE1vZGFsKCdlZGl0RXhwZW5zZScpOyB9fSBjbGFzc05hbWU9InAtMS41IHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbiI+e0kuZWRpdCgiIzlDQTNBRiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFBheW1lbnQgVGFnIEJhZGdlcyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwYXltZW50VGFncy5maWx0ZXIodCA9PiB0LmV4cGVuc2VfaWQgPT09IFN0cmluZyhlLmlkKSkubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LXdyYXAgZ2FwLTEuNSBtdC0yIHB0LTIgYm9yZGVyLXQgYm9yZGVyLWdyYXktNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG1yLTEiPlRhZ2dlZDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BheW1lbnRUYWdzLmZpbHRlcih0ID0+IHQuZXhwZW5zZV9pZCA9PT0gU3RyaW5nKGUuaWQpKS5tYXAodCA9PiA8c3BhbiBrZXk9e3QuaWR9IGNsYXNzTmFtZT17InRleHQteHMgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIGZvbnQtbWVkaXVtICIgKyAodC5zdGF0dXMgPT09ICdhY2NlcHRlZCcgPyAiYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNjAwIiA6IHQuc3RhdHVzID09PSAnZGVjbGluZWQnID8gImJnLWdyYXktMTAwIHRleHQtZ3JheS00MDAgbGluZS10aHJvdWdoIiA6ICJiZy1hbWJlci01MCB0ZXh0LWFtYmVyLTYwMCIpfT57dC5zdGF0dXMgPT09ICdhY2NlcHRlZCcgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKDEwMDAzKSA6IHQuc3RhdHVzID09PSAnZGVjbGluZWQnID8gU3RyaW5nLmZyb21DaGFyQ29kZSgxMDAwNykgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDkyMDMpfSBAe3QucmVjaXBpZW50X3VzZXJuYW1lfTwvc3Bhbj4pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTQiPgogICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkFjdGl2ZSBQcm9qZWN0czwvaDI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbCgnYWRkUHJvamVjdCcpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj57SS5wbHVzKCIjM0I4MkY2Iil9IEFkZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICB7cHJvamVjdHMubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHkgaWNvbj17SS5iYXIoIiM5Q0EzQUYiKX0gdGl0bGU9Ik5vIHByb2plY3RzIHlldCIgc3ViPSJBZGQgeW91ciBmaXJzdCBwcm9qZWN0IHRvIHN0YXJ0IHRyYWNraW5nIHByb2dyZXNzIiBhY3Rpb249eygpID0+IHNldE1vZGFsKCdhZGRQcm9qZWN0Jyl9IGFjdGlvbkxhYmVsPSJBZGQgUHJvamVjdCIgLz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkgOiAoPD4KICAgICAgICAgICAgICAgICAgICB7c2hhcmVkUHJvamVjdHMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0ibWItNiI+CiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgY2xhc3NOYW1lPSJ3LTUgaC01IHRleHQtaW5kaWdvLTUwMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlTGluZWNhcD0icm91bmQiIHN0cm9rZUxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9Ik0xNyAyMGg1di0yYTMgMyAwIDAwLTUuMzU2LTEuODU3TTE3IDIwSDdtMTAgMHYtMmMwLS42NTYtLjEyNi0xLjI4My0uMzU2LTEuODU3TTcgMjBIMnYtMmEzIDMgMCAwMTUuMzU2LTEuODU3TTcgMjB2LTJjMC0uNjU2LjEyNi0xLjI4My4zNTYtMS44NTdtMCAwYTUuMDAyIDUuMDAyIDAgMDE5LjI4OCAwTTE1IDdhMyAzIDAgMTEtNiAwIDMgMyAwIDAxNiAweiIgLz48L3N2Zz5Qcm9qZWN0cyBTaGFyZWQgV2l0aCBZb3U8L2gzPgogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0zIGdhcC00Ij4KICAgICAgICAgICAgICAgIHtzaGFyZWRQcm9qZWN0cy5tYXAoZnVuY3Rpb24oc3AsIHNpKSB7CiAgICAgICAgICAgICAgICAgIHZhciBzbmFwID0gc3AucHJvamVjdF9zbmFwc2hvdCB8fCB7fTsKICAgICAgICAgICAgICAgICAgdmFyIHRhc2tzQXJyID0gc3AudGFza3Nfc25hcHNob3QgfHwgW107CiAgICAgICAgICAgICAgICAgIHZhciBteVRhc2tzID0gdGFza3NBcnIuZmlsdGVyKGZ1bmN0aW9uKHQpIHsgcmV0dXJuIHQuZGVsZWdhdGVkVG8gJiYgdXNlclByb2ZpbGUgJiYgdC5kZWxlZ2F0ZWRUby50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHVzZXJQcm9maWxlLnVzZXJuYW1lKTsgfSk7CiAgICAgICAgICAgICAgICAgIHZhciBjb21wbGV0ZWRJZHMgPSAoc3AuY29tcGxldGlvbnMgfHwgW10pLm1hcChmdW5jdGlvbih0YykgeyByZXR1cm4gdGMudGFza19pZDsgfSk7CiAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNDb2xvciA9IHNuYXAuc3RhdHVzID09PSAnSW4gUHJvZ3Jlc3MnID8gJ3RleHQtYmx1ZS02MDAgYmctYmx1ZS01MCcgOiBzbmFwLnN0YXR1cyA9PT0gJ1BsYW5uaW5nJyA/ICd0ZXh0LXllbGxvdy02MDAgYmcteWVsbG93LTUwJyA6IHNuYXAuc3RhdHVzID09PSAnQ29tcGxldGVkJyA/ICd0ZXh0LWdyZWVuLTYwMCBiZy1ncmVlbi01MCcgOiAndGV4dC1ncmF5LTYwMCBiZy1ncmF5LTUwJzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtzaX0gY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItaW5kaWdvLTEwMCBwLTQgaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24iPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMiI+CiAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1ncmF5LTgwMCI+e3NuYXAubmFtZSB8fCAnUHJvamVjdCd9PC9oND4KICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17InRleHQteHMgcHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIGZvbnQtbWVkaXVtICIgKyBzdGF0dXNDb2xvcn0+e3NuYXAuc3RhdHVzIHx8ICdBY3RpdmUnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICB7c25hcC5kZXNjICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIG1iLTIiPntzbmFwLmRlc2Muc3Vic3RyaW5nKDAsIDEwMCl9PC9wPn0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMyI+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIGgtMS41IGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW4iPjxkaXYgY2xhc3NOYW1lPSJoLWZ1bGwgYmctaW5kaWdvLTUwMCByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwiIHN0eWxlPXt7d2lkdGg6IChzbmFwLnByb2dyZXNzIHx8IDApICsgJyUnfX0+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBmb250LW1lZGl1bSI+e3NuYXAucHJvZ3Jlc3MgfHwgMH0lPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIHtzcC5vd25lciAmJiA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtYi0yIj5Pd25lcjoge3NwLm93bmVyLmZ1bGxfbmFtZX08L3A+fQogICAgICAgICAgICAgICAgICAgIHtzcC5tZW1iZXJzICYmIHNwLm1lbWJlcnMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iZmxleCAtc3BhY2UteC0xIG1iLTMiPntzcC5tZW1iZXJzLnNsaWNlKDAsIDYpLm1hcChmdW5jdGlvbihtZW0sIG1pKSB7IHJldHVybiBtZW0uYXZhdGFyX3VybCA/IDxpbWcga2V5PXttaX0gc3JjPXttZW0uYXZhdGFyX3VybH0gY2xhc3NOYW1lPSJ3LTYgaC02IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItd2hpdGUgb2JqZWN0LWNvdmVyIiB0aXRsZT17bWVtLmZ1bGxfbmFtZX0gLz4gOiA8ZGl2IGtleT17bWl9IGNsYXNzTmFtZT0idy02IGgtNiByb3VuZGVkLWZ1bGwgYmctaW5kaWdvLTQwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtWzEwcHhdIGZvbnQtYm9sZCBib3JkZXItMiBib3JkZXItd2hpdGUiIHRpdGxlPXttZW0uZnVsbF9uYW1lfT57bWVtLmluaXRpYWxzIHx8ICc/J308L2Rpdj47IH0pfTwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICB7bXlUYXNrcy5sZW5ndGggPiAwICYmIDxkaXYgY2xhc3NOYW1lPSJib3JkZXItdCBwdC0yIG10LTIiPjxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtaW5kaWdvLTYwMCBtYi0xIj5Zb3VyIFRhc2tzICh7bXlUYXNrcy5sZW5ndGh9KTwvcD57bXlUYXNrcy5zbGljZSgwLCA0KS5tYXAoZnVuY3Rpb24odCwgdGkpIHsgdmFyIHRhc2tLZXkgPSAodC50eXBlIHx8ICd0YXNrJykgKyAnXycgKyAodC5pZCB8fCB0aSk7IHZhciBpc0RvbmUgPSBjb21wbGV0ZWRJZHMuaW5jbHVkZXModGFza0tleSk7IHJldHVybiA8ZGl2IGtleT17dGl9IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHktMC41Ij48YnV0dG9uIG9uQ2xpY2s9e2Z1bmN0aW9uKCkgeyBpZiAoaXNEb25lKSByZXR1cm47IHN1cGFiYXNlLmZyb20oJ3NoYXJlZF90YXNrX2NvbXBsZXRpb25zJykuaW5zZXJ0KHsgcHJvamVjdF9vd25lcl9pZDogc3AucHJvamVjdF9vd25lcl9pZCwgcHJvamVjdF9sb2NhbF9pZDogc3AucHJvamVjdF9sb2NhbF9pZCwgdGFza19pZDogdGFza0tleSwgY29tcGxldGVkX2J5OiBzdXBhVXNlci5pZCB9KS50aGVuKGZ1bmN0aW9uKCkgeyBmZXRjaFNoYXJlZFByb2plY3RzKCk7IH0pOyB9fSBjbGFzc05hbWU9eyJ3LTQgaC00IHJvdW5kZWQgYm9yZGVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteHMgIiArIChpc0RvbmUgPyAiYmctZ3JlZW4tNTAwIGJvcmRlci1ncmVlbi01MDAgdGV4dC13aGl0ZSIgOiAiYm9yZGVyLWdyYXktMzAwIGhvdmVyOmJvcmRlci1pbmRpZ28tNDAwIGN1cnNvci1wb2ludGVyIil9Pntpc0RvbmUgJiYgJ1x1MjcxMyd9PC9idXR0b24+PHNwYW4gY2xhc3NOYW1lPXsidGV4dC14cyAiICsgKGlzRG9uZSA/ICJ0ZXh0LWdyYXktNDAwIGxpbmUtdGhyb3VnaCIgOiAidGV4dC1ncmF5LTcwMCIpfT57dC50YXNrIHx8IHQudGFza190ZXh0IHx8ICdUYXNrJ308L3NwYW4+PC9kaXY+OyB9KX08L2Rpdj59CiAgICAgICAgICAgICAgICAgICAge215VGFza3MubGVuZ3RoID09PSAwICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGl0YWxpYyI+Tm8gdGFza3MgYXNzaWduZWQgdG8geW91IHlldDwvcD59CiAgICAgICAgICAgICAgICAgIDwvZGl2PjsKICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj59CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0zIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAge3Byb2plY3RzLm1hcChwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9QID0gZ2V0UHJvamVjdFByb2dyZXNzKHAuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVByb2dyZXNzID0gYXV0b1AgIT09IG51bGwgPyBhdXRvUCA6IHAucHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWRDb3VudCA9IHdlZWtseVBsYW4uZmlsdGVyKHcgPT4gdy5wcm9qZWN0SWQgPT09IHAuaWQpLmxlbmd0aCArIHF1aWNrVGFza3MuZmlsdGVyKHQgPT4gdC5wcm9qZWN0SWQgPT09IHAuaWQpLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17cC5pZH0gY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC01IGNhcmQtc2hhZG93IGNhcmQtc2hhZG93LWhvdmVyIHRyYW5zaXRpb24tYWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gbWItMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9ImZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCB0ZXh0LXNtIj57cC5uYW1lfTwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eyd0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCAnICsgKHN0YXR1c0NvbG9yc1twLnN0YXR1c10gfHwgJ2JnLWdyYXktMTAwIHRleHQtZ3JheS02MDAnKX0+e3Auc3RhdHVzfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRFZGl0SXRlbShwKTsgc2V0TW9kYWwoJ2VkaXRQcm9qZWN0Jyk7IH19IGNsYXNzTmFtZT0icC0xIHJvdW5kZWQtbGcgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbiBtbC0xIj57SS5lZGl0KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG1iLTQiPntwLmRlc2N9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIG1iLTEuNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e2Rpc3BsYXlQcm9ncmVzc30lPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPntsaW5rZWRDb3VudCA+IDAgPyBsaW5rZWRDb3VudCArICcgbGlua2VkIHRhc2tzJyA6IHAudGVhbSArICcgcGVvcGxlJ308L3NwYW4+CgogICAgICAgICAgICAgICAgICAgIHtwLnRlYW1NZW1iZXJzICYmIHAudGVhbU1lbWJlcnMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT0iZmxleCAtc3BhY2UteC0xIG10LTIiPntwLnRlYW1NZW1iZXJzLnNsaWNlKDAsIDUpLm1hcChmdW5jdGlvbih0bSwgdGkpIHsgcmV0dXJuIHRtLmF2YXRhcl91cmwgPyA8aW1nIGtleT17dGl9IHNyYz17dG0uYXZhdGFyX3VybH0gY2xhc3NOYW1lPSJ3LTYgaC02IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItd2hpdGUgb2JqZWN0LWNvdmVyIiB0aXRsZT17dG0uZnVsbF9uYW1lIHx8IHRtLm5hbWV9IC8+IDogPGRpdiBrZXk9e3RpfSBjbGFzc05hbWU9InctNiBoLTYgcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC1bMTBweF0gZm9udC1ib2xkIGJvcmRlci0yIGJvcmRlci13aGl0ZSIgdGl0bGU9e3RtLmZ1bGxfbmFtZSB8fCB0bS5uYW1lfT57KHRtLmZ1bGxfbmFtZSB8fCB0bS5uYW1lIHx8ICI/Iikuc3BsaXQoIiAiKS5tYXAoZnVuY3Rpb24odyl7cmV0dXJuIHdbMF19KS5qb2luKCIiKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsMil9PC9kaXY+OyB9KX17cC50ZWFtTWVtYmVycy5sZW5ndGggPiA1ICYmIDxkaXYgY2xhc3NOYW1lPSJ3LTYgaC02IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTMwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LWdyYXktNjAwIHRleHQtWzEwcHhdIGZvbnQtYm9sZCBib3JkZXItMiBib3JkZXItd2hpdGUiPit7cC50ZWFtTWVtYmVycy5sZW5ndGggLSA1fTwvZGl2Pn08L2Rpdj59ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC0xLjUgYmctZ3JheS0xMDAgcm91bmRlZC1mdWxsIj48ZGl2IGNsYXNzTmFtZT17J2gtZnVsbCByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgJyArIChhdXRvUCAhPT0gbnVsbCA/ICdiZy1ibHVlLTUwMCcgOiAnYmctYmx1ZS0zMDAnKX0gc3R5bGU9e3t3aWR0aDogZGlzcGxheVByb2dyZXNzICsgJyUnfX0+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3AubmV4dCAmJiA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSBtdC0yIj5OZXh0OiB7cC5uZXh0fTwvcD59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3AubGF1bmNoICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTEiPkxhdW5jaDoge25ldyBEYXRlKHAubGF1bmNoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsZGF5OidudW1lcmljJyx5ZWFyOidudW1lcmljJ30pfTwvcD59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC8+KX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgKTsKICAgIH07CgogICAgY29uc3QgQm9hcmRyb29tTW9kdWxlID0gKCkgPT4gewogICAgY29uc3QgW3JlbWluZGVyTXNnLCBzZXRSZW1pbmRlck1zZ10gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtsZWFkZXJib2FyZFByb2plY3QsIHNldExlYWRlcmJvYXJkUHJvamVjdF0gPSB1c2VTdGF0ZSgnYWxsJyk7CiAgICBjb25zdCBbZW9tRGlzbWlzc2VkLCBzZXRFb21EaXNtaXNzZWRdID0gdXNlU3RhdGUoZmFsc2UpOwoKICAgIGNvbnN0IHRhc2tIaXN0b3J5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbnVvcF90YXNrSGlzdG9yeScpIHx8ICdbXScpOwogICAgCiAgICAvLyBVc2UgZGVsZWdhdGVkQnlNZSBmcm9tIFN1cGFiYXNlICh0aGUgZnVsbCBsaXN0IG9mIHRhc2tzIFlPVSBkZWxlZ2F0ZWQpCiAgICBjb25zdCBhbGxEZWxlZ2F0ZWQgPSBkZWxlZ2F0ZWRCeU1lIHx8IFtdOwogICAgCiAgICAvLyBCdWlsZCBtZW1iZXJMaXN0IGZyb20gQUxMIHByb2ZpbGVzIChhdXRvLXBvcHVsYXRlZCBmcm9tIFN1cGFiYXNlKQogICAgY29uc3QgbWVtYmVyTGlzdCA9IGFsbFByb2ZpbGVzLm1hcChwcm9mID0+IHsKICAgICAgY29uc3Qga2V5ID0gcHJvZi51c2VybmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBtZW1iZXJUYXNrcyA9IGFsbERlbGVnYXRlZC5maWx0ZXIoZCA9PiAoZC5yZWNpcGllbnRfdXNlcm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09IGtleSk7CiAgICAgIGNvbnN0IGFzc2lnbmVkID0gbWVtYmVyVGFza3MubGVuZ3RoOwogICAgICBjb25zdCBjb21wbGV0ZWQgPSBtZW1iZXJUYXNrcy5maWx0ZXIoZCA9PiBkLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDsKICAgICAgY29uc3QgYWNjZXB0ZWQgPSBtZW1iZXJUYXNrcy5maWx0ZXIoZCA9PiBkLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJykubGVuZ3RoOwogICAgICBjb25zdCBwZW5kaW5nID0gbWVtYmVyVGFza3MuZmlsdGVyKGQgPT4gZC5zdGF0dXMgPT09ICdwZW5kaW5nJyk7CiAgICAgIGNvbnN0IG1lbWJlclByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHAgPT4gQXJyYXkuaXNBcnJheShwLnRlYW1NZW1iZXJzKSAmJiBwLnRlYW1NZW1iZXJzLmluY2x1ZGVzKHByb2YudXNlcm5hbWUpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiBwcm9mLmZ1bGxfbmFtZSB8fCBwcm9mLnVzZXJuYW1lLAogICAgICAgIGtleSwKICAgICAgICBhdmF0YXJfdXJsOiBwcm9mLmF2YXRhcl91cmwsCiAgICAgICAgYXNzaWduZWQsCiAgICAgICAgY29tcGxldGVkLAogICAgICAgIGFjY2VwdGVkLAogICAgICAgIHBlbmRpbmcsCiAgICAgICAgcHJvamVjdENvdW50OiBtZW1iZXJQcm9qZWN0cy5sZW5ndGgsCiAgICAgICAgY29tcGxldGlvblJhdGU6IGFzc2lnbmVkID4gMCA/IE1hdGgucm91bmQoKGNvbXBsZXRlZCAvIGFzc2lnbmVkKSAqIDEwMCkgOiAwCiAgICAgIH07CiAgICB9KS5zb3J0KChhLCBiKSA9PiBiLmNvbXBsZXRlZCAtIGEuY29tcGxldGVkIHx8IGIuYXNzaWduZWQgLSBhLmFzc2lnbmVkKTsKICAgIAogICAgY29uc3QgdG90YWxBc3NpZ25lZCA9IGFsbERlbGVnYXRlZC5sZW5ndGg7CiAgICBjb25zdCB0b3RhbENvbXBsZXRlZCA9IGFsbERlbGVnYXRlZC5maWx0ZXIoZCA9PiBkLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDsKICAgIGNvbnN0IHRvdGFsUGVuZGluZyA9IGFsbERlbGVnYXRlZC5maWx0ZXIoZCA9PiBkLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCcpLmxlbmd0aDsKICAgIGNvbnN0IHRvdGFsQWNjZXB0ZWQgPSBhbGxEZWxlZ2F0ZWQuZmlsdGVyKGQgPT4gZC5zdGF0dXMgPT09ICdhY2NlcHRlZCcpLmxlbmd0aDsKICAgIGNvbnN0IGF2Z1JhdGUgPSB0b3RhbEFzc2lnbmVkID4gMCA/IE1hdGgucm91bmQoKHRvdGFsQ29tcGxldGVkIC8gdG90YWxBc3NpZ25lZCkgKiAxMDApIDogMDsKICAgIC8vIEVtcGxveWVlIG9mIHRoZSBNb250aCAtIGZpbHRlciB0byBjdXJyZW50IG1vbnRoCiAgICBjb25zdCBlb21Ob3cgPSBuZXcgRGF0ZSgpOwogICAgY29uc3QgbW9udGhTdGFydCA9IG5ldyBEYXRlKGVvbU5vdy5nZXRGdWxsWWVhcigpLCBlb21Ob3cuZ2V0TW9udGgoKSwgMSkudG9JU09TdHJpbmcoKTsKICAgIGNvbnN0IG1vbnRobHlEZWxlZ2F0ZWQgPSBhbGxEZWxlZ2F0ZWQuZmlsdGVyKGQgPT4gZC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGQuY3JlYXRlZF9hdCA+PSBtb250aFN0YXJ0KTsKICAgIGNvbnN0IG1vbnRobHlTdGF0cyA9IGFsbFByb2ZpbGVzLm1hcChwcm9mID0+IHsKICAgICAgY29uc3Qga2V5ID0gcHJvZi51c2VybmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBtb250aFRhc2tzID0gbW9udGhseURlbGVnYXRlZC5maWx0ZXIoZCA9PiAoZC5yZWNpcGllbnRfdXNlcm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09IGtleSk7CiAgICAgIHJldHVybiB7IG5hbWU6IHByb2YuZnVsbF9uYW1lIHx8IHByb2YudXNlcm5hbWUsIGtleSwgYXZhdGFyX3VybDogcHJvZi5hdmF0YXJfdXJsLCBpbml0aWFsczogcHJvZi5pbml0aWFscyB8fCAocHJvZi5mdWxsX25hbWUgfHwgcHJvZi51c2VybmFtZSkuc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsMiksIGNvbXBsZXRlZDogbW9udGhUYXNrcy5sZW5ndGggfTsKICAgIH0pLmZpbHRlcihtID0+IG0uY29tcGxldGVkID4gMCkuc29ydCgoYSwgYikgPT4gYi5jb21wbGV0ZWQgLSBhLmNvbXBsZXRlZCk7CiAgICBjb25zdCBlbXBsb3llZU9mTW9udGggPSBtb250aGx5U3RhdHMubGVuZ3RoID4gMCA/IG1vbnRobHlTdGF0c1swXSA6IG51bGw7CgogICAgLy8gUHJvamVjdHMgd2l0aCB0YWdnZWQgbWVtYmVycyAoZm9yIGxlYWRlcmJvYXJkIGZpbHRlcikKICAgIGNvbnN0IHByb2plY3RzV2l0aE1lbWJlcnMgPSBwcm9qZWN0cy5maWx0ZXIocCA9PiBBcnJheS5pc0FycmF5KHAudGVhbU1lbWJlcnMpICYmIHAudGVhbU1lbWJlcnMubGVuZ3RoID4gMCk7CgogICAgLy8gTGVhZGVyYm9hcmQgLSBmaWx0ZXJlZCBtZW1iZXJMaXN0IGJ5IHByb2plY3QKICAgIGNvbnN0IGxlYWRlcmJvYXJkTGlzdCA9IGxlYWRlcmJvYXJkUHJvamVjdCA9PT0gJ2FsbCcgPyBtZW1iZXJMaXN0LmZpbHRlcihtID0+IG0uY29tcGxldGVkID4gMCB8fCBtLmFzc2lnbmVkID4gMCkgOiBtZW1iZXJMaXN0LmZpbHRlcihtID0+IHsKICAgICAgY29uc3QgcHJvaiA9IHByb2plY3RzLmZpbmQocCA9PiBTdHJpbmcocC5pZCkgPT09IFN0cmluZyhsZWFkZXJib2FyZFByb2plY3QpKTsKICAgICAgcmV0dXJuIHByb2ogJiYgQXJyYXkuaXNBcnJheShwcm9qLnRlYW1NZW1iZXJzKSAmJiBwcm9qLnRlYW1NZW1iZXJzLmluY2x1ZGVzKG0ua2V5KTsKICAgIH0pOwoKICAgIGNvbnN0IHRvcENvbnRyaWJ1dG9yID0gbWVtYmVyTGlzdC5maW5kKG0gPT4gbS5jb21wbGV0ZWQgPiAwKSB8fCAobWVtYmVyTGlzdC5sZW5ndGggPiAwID8gbWVtYmVyTGlzdFswXSA6IG51bGwpOwogICAgCiAgICAvLyBBbGwgcGVuZGluZyB0YXNrcyBzb3J0ZWQgYnkgZGVhZGxpbmUgKG5lYXJlc3QgZmlyc3QpCiAgICBjb25zdCBhbGxQZW5kaW5nVGFza3MgPSBhbGxEZWxlZ2F0ZWQuZmlsdGVyKGQgPT4gZC5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKS5zb3J0KChhLCBiKSA9PiB7CiAgICAgIGlmICghYS5kZWFkbGluZSAmJiAhYi5kZWFkbGluZSkgcmV0dXJuIDA7CiAgICAgIGlmICghYS5kZWFkbGluZSkgcmV0dXJuIDE7CiAgICAgIGlmICghYi5kZWFkbGluZSkgcmV0dXJuIC0xOwogICAgICByZXR1cm4gbmV3IERhdGUoYS5kZWFkbGluZSkgLSBuZXcgRGF0ZShiLmRlYWRsaW5lKTsKICAgIH0pOwogICAgCiAgICBjb25zdCBtYXhBc3NpZ25lZCA9IE1hdGgubWF4KC4uLm1lbWJlckxpc3QubWFwKG0gPT4gbS5hc3NpZ25lZCksIDEpOwogICAgCiAgICAvLyBVbmlxdWUgdGVhbSBtZW1iZXJzIGNvdW50IC0gdXNlIGFsbFByb2ZpbGVzIGRpcmVjdGx5CiAgICBjb25zdCB1bmlxdWVNZW1iZXJzID0gbmV3IFNldCgpOwogICAgYWxsUHJvZmlsZXMuZm9yRWFjaChwID0+IHVuaXF1ZU1lbWJlcnMuYWRkKHAudXNlcm5hbWUpKTsKICAgIHRlYW1NZW1iZXJzLmZvckVhY2godG0gPT4gdW5pcXVlTWVtYmVycy5hZGQodG0ubmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSkpOwogICAgbWVtYmVyTGlzdC5mb3JFYWNoKG0gPT4gdW5pcXVlTWVtYmVycy5hZGQobS5rZXkpKTsKICAgIC8vIEFjdGl2aXR5IGhlYXRtYXA6IGxhc3QgMTIgd2Vla3MKICAgIGNvbnN0IHdlZWtzID0gW107CiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgZm9yIChsZXQgdyA9IDExOyB3ID49IDA7IHctLSkgewogICAgICBjb25zdCB3ZWVrU3RhcnQgPSBuZXcgRGF0ZShub3cpOwogICAgICB3ZWVrU3RhcnQuc2V0RGF0ZSh3ZWVrU3RhcnQuZ2V0RGF0ZSgpIC0gKHcgKiA3KSk7CiAgICAgIGNvbnN0IHdlZWtMYWJlbCA9IHdlZWtTdGFydC50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyBtb250aDogJ3Nob3J0JywgZGF5OiAnbnVtZXJpYycgfSk7CiAgICAgIGxldCBjb3VudCA9IDA7CiAgICAgIHRhc2tIaXN0b3J5LmZvckVhY2goZGF5ID0+IHsKICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoZGF5LmRhdGUpOwogICAgICAgIGNvbnN0IGRpZmYgPSBNYXRoLmZsb29yKCh3ZWVrU3RhcnQgLSBkKSAvIDg2NDAwMDAwKTsKICAgICAgICBpZiAoZGlmZiA+PSAwICYmIGRpZmYgPCA3KSBjb3VudCArPSAoZGF5LnRhc2tzID8gZGF5LnRhc2tzLmxlbmd0aCA6IDApOwogICAgICB9KTsKICAgICAgd2Vla3MucHVzaCh7IGxhYmVsOiB3ZWVrTGFiZWwsIGNvdW50IH0pOwogICAgfQogICAgY29uc3QgbWF4V2Vla0NvdW50ID0gTWF0aC5tYXgoLi4ud2Vla3MubWFwKHcgPT4gdy5jb3VudCksIDEpOwoKCiAgICAvLyBEZXRlcm1pbmUgaWYgY3VycmVudCB1c2VyIGlzIGFkbWluIChoYXMgbG9jYWwgcHJvamVjdHMpIG9yIHRlYW0gbWVtYmVyCiAgICBjb25zdCBpc0FkbWluID0gcHJvamVjdHMubGVuZ3RoID4gMDsKICAgIAogICAgLy8gVGVhbSBtZW1iZXIgdmlldzogcGVyc29uYWwgZGFzaGJvYXJkCiAgICBpZiAoIWlzQWRtaW4pIHsKICAgICAgICBjb25zdCBteVRhc2tzID0gZGVsZWdhdGVkVG9NZSB8fCBbXTsKICAgICAgICBjb25zdCBteVBlbmRpbmcgPSBteVRhc2tzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAncGVuZGluZycpOwogICAgICAgIGNvbnN0IG15QWNjZXB0ZWQgPSBteVRhc2tzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnYWNjZXB0ZWQnKTsKICAgICAgICBjb25zdCBteUNvbXBsZXRlZCA9IG15VGFza3MuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKTsKICAgICAgICBjb25zdCBteVRvdGFsID0gbXlUYXNrcy5sZW5ndGg7CiAgICAgICAgY29uc3QgbXlSYXRlID0gbXlUb3RhbCA+IDAgPyBNYXRoLnJvdW5kKChteUNvbXBsZXRlZC5sZW5ndGggLyBteVRvdGFsKSAqIDEwMCkgOiAwOwogICAgICAgIAogICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiBtYXgtdy01eGwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgIDxkaXY+PGgxIGNsYXNzTmFtZT0idGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCI+TXkgRGFzaGJvYXJkPC9oMT4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNTAwIG10LTEiPllvdXIgcGVyc29uYWwgcHJvZHVjdGl2aXR5IG92ZXJ2aWV3PC9wPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTQgZ2FwLTQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTQgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yIj57SS5jbGlwYm9hcmQoIiMzQjgyRjYiKX08cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+VG90YWwgQXNzaWduZWQ8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCI+e215VG90YWx9PC9wPgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57bXlQZW5kaW5nLmxlbmd0aH0gcGVuZGluZywge215QWNjZXB0ZWQubGVuZ3RofSBhY3RpdmU8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIHAtNCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTIiPntJLmNoZWNrKCIjMTBCOTgxIil9PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPkNvbXBsZXRlZDwvcD48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtNjAwIj57bXlDb21wbGV0ZWQubGVuZ3RofTwvcD48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC00IGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMiI+e0kudHJlbmRpbmcoIiNGNTlFMEIiKX08cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+Q29tcGxldGlvbiBSYXRlPC9wPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAiPntteVJhdGV9JTwvcD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBoLTIgbXQtMiI+PGRpdiBjbGFzc05hbWU9ImJnLWVtZXJhbGQtNTAwIGgtMiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwiIHN0eWxlPXt7d2lkdGg6IG15UmF0ZSArICclJ319PjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTQgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yIj57SS5jbG9jaygiIzhCNUNGNiIpfTxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj5BY3RpdmUgVGFza3M8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1wdXJwbGUtNjAwIj57bXlBY2NlcHRlZC5sZW5ndGh9PC9wPjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIHtteUFjY2VwdGVkLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93IG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHgtNSBweS00IGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCI+PGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+QWN0aXZlIFRhc2tzPC9oMj4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTAuNSI+VGFza3MgeW91IGhhdmUgYWNjZXB0ZWQgYW5kIGFyZSB3b3JraW5nIG9uPC9wPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj57bXlBY2NlcHRlZC5tYXAoKGQsIGkpID0+ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZC5pZCB8fCBpfSBjbGFzc05hbWU9InB4LTUgcHktMyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS04MDAiPntkLnRhc2tfdGV4dH08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+RnJvbToge2QuZGVsZWdhdG9yX25hbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkLmRlYWRsaW5lICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5EdWU6IHtuZXcgRGF0ZShkLmRlYWRsaW5lKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtbWVkaXVtIGJnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTcwMCI+YWNjZXB0ZWQ8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+KX0KICAgICAgICAgICAgCiAgICAgICAgICAgIHtteVBlbmRpbmcubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItcHVycGxlLTIwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItcHVycGxlLTUwIGJnLXB1cnBsZS01MC8zMCI+PGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1wdXJwbGUtOTAwIj5QZW5kaW5nIEFjY2VwdGFuY2U8L2gyPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtcHVycGxlLTQwMCBtdC0wLjUiPlRhc2tzIHdhaXRpbmcgZm9yIHlvdSB0byBhY2NlcHQ8L3A+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLXB1cnBsZS01MCI+e215UGVuZGluZy5tYXAoKGQsIGkpID0+ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZC5pZCB8fCBpfSBjbGFzc05hbWU9InB4LTUgcHktMyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS04MDAiPntkLnRhc2tfdGV4dH08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+RnJvbToge2QuZGVsZWdhdG9yX25hbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkLmRlYWRsaW5lICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5EdWU6IHtuZXcgRGF0ZShkLmRlYWRsaW5lKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjY2VwdGluZ1Rhc2soZCl9IGNsYXNzTmFtZT0idGV4dC14cyBweC0yLjUgcHktMSByb3VuZGVkLWxnIGJnLWdyZWVuLTUwIHRleHQtZ3JlZW4tNjAwIGhvdmVyOmJnLWdyZWVuLTEwMCBmb250LW1lZGl1bSI+QWNjZXB0PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+KX0KICAgICAgICAgICAgCiAgICAgICAgICAgIHtteUNvbXBsZXRlZC5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAiPjxoMiBjbGFzc05hbWU9InRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkNvbXBsZXRlZDwvaDI+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0wLjUiPlRhc2tzIHlvdSBoYXZlIGZpbmlzaGVkPC9wPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj57bXlDb21wbGV0ZWQuc2xpY2UoMCwgMTApLm1hcCgoZCwgaSkgPT4gKAogICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtkLmlkIHx8IGl9IGNsYXNzTmFtZT0icHgtNSBweS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG9wYWNpdHktNzAiPgogICAgICAgICAgICAgICAgICAgICAgICB7SS5jaGVjaygiIzEwQjk4MSIpfQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbGluZS10aHJvdWdoIj57ZC50YXNrX3RleHR9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPkZyb206IHtkLmRlbGVnYXRvcl9uYW1lfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+KX0KICAgICAgICA8L2Rpdj4pOwogICAgfQogICAgCiAgICAvLyBBZG1pbiB2aWV3IGJlbG93CiAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTYgbWF4LXctNXhsIj4KICAgICAgICB7cmVtaW5kZXJNc2cgJiYgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOidmaXhlZCcsdG9wOjIwLHJpZ2h0OjIwLHpJbmRleDo5OTk5LGJhY2tncm91bmQ6JyMxMGI5ODEnLGNvbG9yOid3aGl0ZScscGFkZGluZzonMTJweCAyNHB4Jyxib3JkZXJSYWRpdXM6OCxib3hTaGFkb3c6JzAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjE1KScsZm9udFdlaWdodDo1MDAsZm9udFNpemU6MTQsYW5pbWF0aW9uOidmYWRlSW4gMC4zcyd9fT57cmVtaW5kZXJNc2d9PC9kaXY+fQoKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgIDxkaXY+PGgxIGNsYXNzTmFtZT0idGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMCI+Qm9hcmRyb29tPC9oMT4KICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbXQtMSI+VGVhbSBwcm9kdWN0aXZpdHkgb3ZlcnZpZXc8L3A+PC9kaXY+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTQgZ2FwLTQiPgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTQgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMiI+e0kudXNlcigiIzYzNjZGMSIpfTxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj5UZWFtIE1lbWJlcnM8L3A+PC9kaXY+CiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAiPnt1bmlxdWVNZW1iZXJzLnNpemV9PC9wPjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTQgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMiI+e0kudHJlbmRpbmcoIiNGNTlFMEIiKX08cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+VG9wIENvbnRyaWJ1dG9yPC9wPjwvZGl2PgogICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgdHJ1bmNhdGUiPnt0b3BDb250cmlidXRvciA/IHRvcENvbnRyaWJ1dG9yLm5hbWUgOiAnLSd9PC9wPgogICAgICAgICAgICB7dG9wQ29udHJpYnV0b3IgJiYgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPnt0b3BDb250cmlidXRvci5jb21wbGV0ZWR9IGNvbXBsZXRlZDwvcD59PC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIHAtNCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yIj57SS5jbGlwYm9hcmQoIiMzQjgyRjYiKX08cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+VG90YWwgRGVsZWdhdGVkPC9wPjwvZGl2PgogICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIj57dG90YWxBc3NpZ25lZH08L3A+CiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57dG90YWxQZW5kaW5nfSBwZW5kaW5nLCB7dG90YWxBY2NlcHRlZH0gYWNjZXB0ZWQsIHt0b3RhbENvbXBsZXRlZH0gZG9uZTwvcD48L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC00IGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTIiPntJLmNoZWNrKCIjMTBCOTgxIil9PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS01MDAiPkF2ZyBDb21wbGV0aW9uIFJhdGU8L3A+PC9kaXY+CiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAiPnthdmdSYXRlfSU8L3A+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAiPjxoMiBjbGFzc05hbWU9InRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPlRlYW0gT3ZlcnZpZXc8L2gyPjwvZGl2PgogICAgICAgICAge21lbWJlckxpc3QubGVuZ3RoID09PSAwID8gKDxkaXYgY2xhc3NOYW1lPSJwLTggdGV4dC1jZW50ZXIiPjxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIj5ObyBkZWxlZ2F0ZWQgdGFza3MgeWV0LiBBc3NpZ24gdGFza3MgdG8gdGVhbSBtZW1iZXJzIHRvIHNlZSBwcm9kdWN0aXZpdHkgZGF0YS48L3A+PC9kaXY+CiAgICAgICAgICApIDogKDx0YWJsZSBjbGFzc05hbWU9InctZnVsbCI+PHRoZWFkPjx0ciBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCBib3JkZXItYiBib3JkZXItZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InRleHQtbGVmdCBweC01IHB5LTMgZm9udC1tZWRpdW0iPk1lbWJlcjwvdGg+CiAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InRleHQtY2VudGVyIHB4LTMgcHktMyBmb250LW1lZGl1bSI+QXNzaWduZWQ8L3RoPgogICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciBweC0zIHB5LTMgZm9udC1tZWRpdW0iPkNvbXBsZXRlZDwvdGg+CiAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InRleHQtY2VudGVyIHB4LTMgcHktMyBmb250LW1lZGl1bSI+QWNjZXB0ZWQ8L3RoPgogICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciBweC0zIHB5LTMgZm9udC1tZWRpdW0iPlBlbmRpbmc8L3RoPgogICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJ0ZXh0LWxlZnQgcHgtMyBweS0zIGZvbnQtbWVkaXVtIj5Db21wbGV0aW9uIFJhdGU8L3RoPjwvdHI+PC90aGVhZD4KICAgICAgICAgICAgICA8dGJvZHk+e21lbWJlckxpc3QubWFwKChtLCBpKSA9PiAoPHRyIGtleT17bS5rZXl9IGNsYXNzTmFtZT17aSAlIDIgPT09IDAgPyAnYmctZ3JheS01MC81MCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icHgtNSBweS0zIj48ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICB7bS5hdmF0YXJfdXJsID8gPGltZyBzcmM9e20uYXZhdGFyX3VybH0gY2xhc3NOYW1lPSJ3LTggaC04IHJvdW5kZWQtZnVsbCBvYmplY3QtY292ZXIiIC8+IDogPGRpdiBjbGFzc05hbWU9InctOCBoLTggcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLTYwMCBmb250LXNlbWlib2xkIHRleHQtc20iPnttLm5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9PC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMCI+e20ubmFtZX08L3NwYW4+PC9kaXY+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciBweC0zIHB5LTMgdGV4dC1zbSB0ZXh0LWdyYXktNjAwIj57bS5hc3NpZ25lZH08L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9InRleHQtY2VudGVyIHB4LTMgcHktMyB0ZXh0LXNtIHRleHQtZW1lcmFsZC02MDAgZm9udC1tZWRpdW0iPnttLmNvbXBsZXRlZH08L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9InRleHQtY2VudGVyIHB4LTMgcHktMyB0ZXh0LXNtIHRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0iPnttLmFjY2VwdGVkfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0idGV4dC1jZW50ZXIgcHgtMyBweS0zIHRleHQtc20gdGV4dC1hbWJlci02MDAgZm9udC1tZWRpdW0iPnttLnBlbmRpbmcubGVuZ3RofTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icHgtMyBweS0zIj48ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBoLTIgbWF4LXctWzEwMHB4XSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImgtMiByb3VuZGVkLWZ1bGwiIHN0eWxlPXt7d2lkdGg6IE1hdGgubWF4KG0uY29tcGxldGlvblJhdGUsIDIpICsgJyUnLCBiYWNrZ3JvdW5kQ29sb3I6IG0uY29tcGxldGlvblJhdGUgPj0gNzAgPyAnIzEwQjk4MScgOiBtLmNvbXBsZXRpb25SYXRlID49IDQwID8gJyNGNTlFMEInIDogJyNFRjQ0NDQnfX0+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIHctOCI+e20uY29tcGxldGlvblJhdGV9JTwvc3Bhbj48L2Rpdj48L3RkPjwvdHI+KSl9PC90Ym9keT48L3RhYmxlPil9CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBFbXBsb3llZSBvZiB0aGUgTW9udGggKi99CiAgICAgICAgeyFlb21EaXNtaXNzZWQgJiYgKAogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1ncmFkaWVudC10by1yIGZyb20tYW1iZXItNTAgdmlhLXllbGxvdy01MCB0by1hbWJlci01MCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYW1iZXItMjAwIGNhcmQtc2hhZG93IG1iLTQgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIGgtMSBiZy1ncmFkaWVudC10by1yIGZyb20tYW1iZXItNDAwIHZpYS15ZWxsb3ctMzAwIHRvLWFtYmVyLTQwMCI+PC9kaXY+CiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEVvbURpc21pc3NlZCh0cnVlKX0gY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMyByaWdodC0zIHRleHQtYW1iZXItNDAwIGhvdmVyOnRleHQtYW1iZXItNjAwIHRleHQteHMiPmRpc21pc3M8L2J1dHRvbj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC02IHB5LTUgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTUiPgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUiPgogICAgICAgICAgICAgIHtlbXBsb3llZU9mTW9udGggPyAoCiAgICAgICAgICAgICAgICBlbXBsb3llZU9mTW9udGguYXZhdGFyX3VybCA/IDxpbWcgc3JjPXtlbXBsb3llZU9mTW9udGguYXZhdGFyX3VybH0gY2xhc3NOYW1lPSJ3LTIwIGgtMjAgcm91bmRlZC1mdWxsIG9iamVjdC1jb3ZlciBib3JkZXItNCBib3JkZXItYW1iZXItMzAwIHNoYWRvdy1sZyIgLz4gOiA8ZGl2IGNsYXNzTmFtZT0idy0yMCBoLTIwIHJvdW5kZWQtZnVsbCBiZy1hbWJlci0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC0yeGwgZm9udC1ib2xkIHRleHQtYW1iZXItNzAwIGJvcmRlci00IGJvcmRlci1hbWJlci0zMDAgc2hhZG93LWxnIj57ZW1wbG95ZWVPZk1vbnRoLmluaXRpYWxzfTwvZGl2PgogICAgICAgICAgICAgICkgOiA8ZGl2IGNsYXNzTmFtZT0idy0yMCBoLTIwIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LTJ4bCB0ZXh0LWdyYXktMzAwIGJvcmRlci00IGJvcmRlci1ncmF5LTIwMCI+PzwvZGl2Pn0KICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgLWJvdHRvbS0xIC1yaWdodC0xIHctOCBoLTggYmctYW1iZXItNDAwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtc20gc2hhZG93LW1kIj4n8J+RkSc8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEiPgogICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtYW1iZXItNjAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtYi0xIj5FbXBsb3llZSBvZiB0aGUgTW9udGg8L3A+CiAgICAgICAgICAgICAge2VtcGxveWVlT2ZNb250aCA/ICg8PgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIj57ZW1wbG95ZWVPZk1vbnRoLm5hbWV9PC9wPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtYW1iZXItNzAwIG10LTAuNSI+e2VtcGxveWVlT2ZNb250aC5jb21wbGV0ZWR9IHRhc2t7ZW1wbG95ZWVPZk1vbnRoLmNvbXBsZXRlZCAhPT0gMSA/ICdzJyA6ICcnfSBjb21wbGV0ZWQgdGhpcyBtb250aDwvcD4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWFtYmVyLTUwMCBtdC0xIGl0YWxpYyI+VXBkYXRlcyBkeW5hbWljYWxseSBhcyB0YXNrcyBhcmUgY29tcGxldGVkITwvcD4KICAgICAgICAgICAgICA8Lz4pIDogKDw+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTUwMCI+Tm8gY29tcGxldGVkIHRhc2tzIHlldCB0aGlzIG1vbnRoPC9wPgogICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYW1iZXItNTAwIG10LTEiPlRoZSByYWNlIGlzIG9uIC0gd2hvIHdpbGwgdGFrZSB0aGUgY3Jvd24/PC9wPgogICAgICAgICAgICAgIDwvPil9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICB7bW9udGhseVN0YXRzLmxlbmd0aCA+IDEgJiYgPGRpdiBjbGFzc05hbWU9InRleHQtcmlnaHQiPgogICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWFtYmVyLTYwMCBmb250LW1lZGl1bSBtYi0xIj5SdW5uZXJzIHVwPC9wPgogICAgICAgICAgICAgIHttb250aGx5U3RhdHMuc2xpY2UoMSwgNCkubWFwKChtLCBpKSA9PiA8cCBrZXk9e20ua2V5fSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCI+e2kgPT09IDAgPyAn8J+liCcgOiBpID09PSAxID8gJ/CfpYknIDogJzR0aCd9IHttLm5hbWV9ICh7bS5jb21wbGV0ZWR9KTwvcD4pfQogICAgICAgICAgICA8L2Rpdj59CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICApfQoKICAgICAgICB7LyogUHJvamVjdCBUZWFtIExlYWRlcmJvYXJkICovfQogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgbWItNCI+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHgtNSBweS00IGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Qcm9qZWN0IExlYWRlcmJvYXJkPC9oMj4KICAgICAgICAgICAgPHNlbGVjdCB2YWx1ZT17bGVhZGVyYm9hcmRQcm9qZWN0fSBvbkNoYW5nZT17ZSA9PiBzZXRMZWFkZXJib2FyZFByb2plY3QoZS50YXJnZXQudmFsdWUpfSBjbGFzc05hbWU9InRleHQteHMgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHB4LTIgcHktMS41IHRleHQtZ3JheS02MDAgYmctd2hpdGUiPgogICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFsbCI+QWxsIE1lbWJlcnM8L29wdGlvbj4KICAgICAgICAgICAgICB7cHJvamVjdHNXaXRoTWVtYmVycy5tYXAocCA9PiA8b3B0aW9uIGtleT17cC5pZH0gdmFsdWU9e3AuaWR9PntwLm5hbWV9PC9vcHRpb24+KX0KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHtsZWFkZXJib2FyZExpc3QubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC02IHRleHQtY2VudGVyIHRleHQteHMgdGV4dC1ncmF5LTQwMCI+Tm8gbWVtYmVycyBmb3VuZCBmb3IgdGhpcyBwcm9qZWN0PC9kaXY+CiAgICAgICAgICApIDogKAogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC00Ij4KICAgICAgICAgICAgICB7bGVhZGVyYm9hcmRMaXN0Lm1hcCgobSwgaSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbWVkYWwgPSBpID09PSAwID8gJ/CfpYcnIDogaSA9PT0gMSA/ICfwn6WIJyA6IGkgPT09IDIgPyAn8J+liScgOiAoaSArIDEpOwogICAgICAgICAgICAgICAgY29uc3QgYmdDbGFzcyA9IGkgPT09IDAgPyAnYmctYW1iZXItNTAgYm9yZGVyLWFtYmVyLTIwMCcgOiBpID09PSAxID8gJ2JnLWdyYXktNTAgYm9yZGVyLWdyYXktMjAwJyA6IGkgPT09IDIgPyAnYmctb3JhbmdlLTUwIGJvcmRlci1vcmFuZ2UtMjAwJyA6ICdiZy13aGl0ZSBib3JkZXItZ3JheS0xMDAnOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e20ua2V5fSBjbGFzc05hbWU9eyJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBweC00IHB5LTMgcm91bmRlZC14bCBtYi0yIGJvcmRlciAiICsgYmdDbGFzc30+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWxnIHctOCB0ZXh0LWNlbnRlciBmbGV4LXNocmluay0wIj57bWVkYWx9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIHttLmF2YXRhcl91cmwgPyA8aW1nIHNyYz17bS5hdmF0YXJfdXJsfSBjbGFzc05hbWU9InctMTAgaC0xMCByb3VuZGVkLWZ1bGwgb2JqZWN0LWNvdmVyIiAvPiA6IDxkaXYgY2xhc3NOYW1lPSJ3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ibHVlLTYwMCBmb250LXNlbWlib2xkIHRleHQtc20iPnttLm5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9PC9kaXY+fQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57bS5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57bS5hc3NpZ25lZH0gYXNzaWduZWQgJm1pZGRvdDsge20uY29tcGxldGVkfSBjb21wbGV0ZWQ8L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtcmlnaHQiPgogICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXsidGV4dC1sZyBmb250LWJvbGQgIiArIChtLmNvbXBsZXRpb25SYXRlID49IDcwID8gJ3RleHQtZW1lcmFsZC01MDAnIDogbS5jb21wbGV0aW9uUmF0ZSA+PSA0MCA/ICd0ZXh0LWFtYmVyLTUwMCcgOiAndGV4dC1ncmF5LTQwMCcpfT57bS5jb21wbGV0aW9uUmF0ZX0lPC9wPgogICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPnJhdGU8L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApfQogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMSBsZzpncmlkLWNvbHMtMiBnYXAtNCI+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktNCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5QZW5kaW5nIFRhc2tzPC9oMj4KICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+c29ydGVkIGJ5IGRlYWRsaW5lPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLWdyYXktNTAgbWF4LWgtODAgb3ZlcmZsb3cteS1hdXRvIj4KICAgICAgICAgICAgICB7YWxsUGVuZGluZ1Rhc2tzLmxlbmd0aCA9PT0gMCA/ICg8ZGl2IGNsYXNzTmFtZT0icC02IHRleHQtY2VudGVyIj48cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCI+QWxsIHRhc2tzIGNvbXBsZXRlZCE8L3A+PC9kaXY+CiAgICAgICAgICAgICAgKSA6IGFsbFBlbmRpbmdUYXNrcy5zbGljZSgwLCAxMikubWFwKChkLCBpKSA9PiAoPGRpdiBrZXk9e2QuaWQgfHwgaX0gY2xhc3NOYW1lPSJweC01IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTgwMCB0cnVuY2F0ZSI+e2QudGFza190ZXh0fTwvcD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5Ubzoge2QucmVjaXBpZW50X3VzZXJuYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgIHtkLmRlYWRsaW5lICYmIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5EdWU6IHtuZXcgRGF0ZShkLmRlYWRsaW5lKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3A+fQogICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsidGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQgZm9udC1tZWRpdW0gIiArIChkLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyA/ICJiZy1ncmVlbi01MCB0ZXh0LWdyZWVuLTYwMCIgOiAiYmctcHVycGxlLTUwIHRleHQtcHVycGxlLTYwMCIpfT57ZC5zdGF0dXN9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogclVzZXIgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Byb2ZpbGVzJykuc2VsZWN0KCdpZCcpLmVxKCd1c2VybmFtZScsIGQucmVjaXBpZW50X3VzZXJuYW1lKS5zaW5nbGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJVc2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnbm90aWZpY2F0aW9ucycpLmluc2VydCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiByVXNlci5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnVGFzayBSZW1pbmRlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB1c2VyUHJvZmlsZS5uYW1lICsgJyByZW1pbmRlZCB5b3UgYWJvdXQ6ICcgKyBkLnRhc2tfdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcl9uYW1lOiB1c2VyUHJvZmlsZS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcmVhZDogZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZW1pbmRlck1zZygnUmVtaW5kZXIgc2VudCB0byAnICsgZC5yZWNpcGllbnRfdXNlcm5hbWUgKyAnIScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlbWluZGVyTXNnKCdDb3VsZCBub3QgZmluZCB1c2VyICcgKyBkLnJlY2lwaWVudF91c2VybmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtaW5kZXIgZXJyb3I6JywgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVtaW5kZXJNc2coJ0ZhaWxlZCB0byBzZW5kIHJlbWluZGVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFJlbWluZGVyTXNnKCcnKSwgMzAwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTIuNSBweS0xIHJvdW5kZWQtbGcgYmctYmx1ZS01MCB0ZXh0LWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtMTAwIGZvbnQtbWVkaXVtIHdoaXRlc3BhY2Utbm93cmFwIj5SZW1pbmQ8L2J1dHRvbj4KPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBtYXJrRGVsZWdhdGVkRG9uZShkLmlkKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTIuNSBweS0xIHJvdW5kZWQtbGcgYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNjAwIGhvdmVyOmJnLWVtZXJhbGQtMTAwIGZvbnQtbWVkaXVtIHdoaXRlc3BhY2Utbm93cmFwIiB0aXRsZT0iTWFyayBhcyBjb21wbGV0ZWQiPkRvbmU8L2J1dHRvbj48L2Rpdj4pKX0KICAgICAgICAgICAgICB7YWxsUGVuZGluZ1Rhc2tzLmxlbmd0aCA+IDEyICYmIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTIgdGV4dC1jZW50ZXIiPjxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj4rIHthbGxQZW5kaW5nVGFza3MubGVuZ3RoIC0gMTJ9IG1vcmUgdGFza3M8L3A+PC9kaXY+fTwvZGl2PjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj48aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Bc3NpZ25lZCB2cyBDb21wbGV0ZWQ8L2gyPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC01Ij57bWVtYmVyTGlzdC5sZW5ndGggPT09IDAgPyAoPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHB5LTYiPjxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIj5ObyBkYXRhIHlldDwvcD48L2Rpdj4KICAgICAgICAgICAgICApIDogKDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTMiPnttZW1iZXJMaXN0Lm1hcChtID0+ICg8ZGl2IGtleT17bS5rZXl9IGNsYXNzTmFtZT0ic3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNjAwIj57bS5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PGRpdiBjbGFzc05hbWU9ImZsZXgtMSBmbGV4IGdhcC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC01IHJvdW5kZWQtbCBiZy1ibHVlLTQwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciIgc3R5bGU9e3t3aWR0aDogTWF0aC5tYXgoKG0uYXNzaWduZWQgLyBtYXhBc3NpZ25lZCkgKiAxMDAsIDgpICsgJyUnfX0+PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtIj57bS5hc3NpZ25lZH08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImgtNSByb3VuZGVkLXIgYmctZW1lcmFsZC00MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiIHN0eWxlPXt7d2lkdGg6IE1hdGgubWF4KChtLmNvbXBsZXRlZCAvIG1heEFzc2lnbmVkKSAqIDEwMCwgOCkgKyAnJSd9fT48c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIHRleHQtd2hpdGUgZm9udC1tZWRpdW0iPnttLmNvbXBsZXRlZH08L3NwYW4+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+KSl9CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBwdC0yIGJvcmRlci10IGJvcmRlci1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxkaXYgY2xhc3NOYW1lPSJ3LTMgaC0zIHJvdW5kZWQgYmctYmx1ZS00MDAiPjwvZGl2PjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj5Bc3NpZ25lZDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxkaXYgY2xhc3NOYW1lPSJ3LTMgaC0zIHJvdW5kZWQgYmctZW1lcmFsZC00MDAiPjwvZGl2PjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNTAwIj5Db21wbGV0ZWQ8L3NwYW4+PC9kaXY+PC9kaXY+PC9kaXY+KX08L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93Ij4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj48aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Qcm9kdWN0aXZpdHkgT3ZlcnZpZXc8L2gyPgogICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0wLjUiPlRhc2tzIGNvbXBsZXRlZCBwZXIgd2VlayAobGFzdCAxMiB3ZWVrcyk8L3A+PC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC01Ij48ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1lbmQgZ2FwLTIiPnt3ZWVrcy5tYXAoKHcsIGkpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGludGVuc2l0eSA9IHcuY291bnQgPiAwID8gTWF0aC5tYXgoMC4xNSwgdy5jb3VudCAvIG1heFdlZWtDb3VudCkgOiAwOwogICAgICAgICAgICAgICAgcmV0dXJuICg8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSJmbGV4LTEgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTEiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgcm91bmRlZC1tZCIgc3R5bGU9e3toZWlnaHQ6IE1hdGgubWF4KHcuY291bnQgPiAwID8gMjAgOiA4LCAody5jb3VudCAvIG1heFdlZWtDb3VudCkgKiA4MCkgKyAncHgnLCBiYWNrZ3JvdW5kQ29sb3I6IHcuY291bnQgPiAwID8gJ3JnYmEoNTksMTMwLDI0NiwnICsgaW50ZW5zaXR5ICsgJyknIDogJyNGM0Y0RjYnfX0gdGl0bGU9e3cuY291bnQgKyAnIHRhc2tzJ30+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVs5cHhdIHRleHQtZ3JheS00MDAiPnt3LmxhYmVsfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICB7dy5jb3VudCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtIj57dy5jb3VudH08L3NwYW4+fTwvZGl2Pik7CiAgICAgICAgICAgICAgfSl9PC9kaXY+PC9kaXY+PC9kaXY+CiAgICAgIDwvZGl2Pik7CiAgfTsKCiAgCiAgY29uc3QgUHJvamVjdFN0YXR1c0JvYXJkID0gKCkgPT4gewogICAgY29uc3QgW2V4cGFuZGVkUHJvamVjdCwgc2V0RXhwYW5kZWRQcm9qZWN0XSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2FkZGVkVGFza3MsIHNldEFkZGVkVGFza3NdID0gdXNlU3RhdGUoe30pOwogICAgY29uc3QgW2Nsb3VkUHJvamVjdHMsIHNldENsb3VkUHJvamVjdHNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW2Nsb3VkVGFza3MsIHNldENsb3VkVGFza3NdID0gdXNlU3RhdGUoW10pOwoKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgIGlmICghc3VwYVVzZXIpIHJldHVybjsKICAgICAgY29uc3QgZmV0Y2hDbG91ZCA9IGFzeW5jICgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgeyBkYXRhOiBzcCB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgncHJvamVjdHMnKS5zZWxlY3QoJyonKTsKICAgICAgICAgIGNvbnN0IHsgZGF0YTogc3QgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ3dlZWtseV90YXNrcycpLnNlbGVjdCgnKicpOwogICAgICAgICAgaWYgKHNwKSBzZXRDbG91ZFByb2plY3RzKHNwKTsKICAgICAgICAgIGlmIChzdCkgc2V0Q2xvdWRUYXNrcyhzdCk7CiAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUubG9nKCdDbG91ZCBmZXRjaCBlcnJvcjonLCBlKTsgfQogICAgICB9OwogICAgICBmZXRjaENsb3VkKCk7CiAgICB9LCBbc3VwYVVzZXJdKTsKCiAgICBjb25zdCBpc093bmVyID0gcHJvamVjdHMubGVuZ3RoID4gMDsKICAgIGNvbnN0IGFjdGl2ZVByb2plY3RzID0gaXNPd25lciA/IHByb2plY3RzIDogY2xvdWRQcm9qZWN0cy5tYXAoc3AgPT4gKHsKICAgICAgaWQ6IHNwLmxvY2FsX2lkLCBuYW1lOiBzcC5uYW1lLCBkZXNjOiBzcC5kZXNjcmlwdGlvbiwgcHJvZ3Jlc3M6IHNwLnByb2dyZXNzLAogICAgICBzdGF0dXM6IHNwLnN0YXR1cywgc3RhcnQ6IHNwLnN0YXJ0X2RhdGUsIGxhdW5jaDogc3AubGF1bmNoX2RhdGUsCiAgICAgIHRlYW06IHNwLnRlYW1fc2l6ZSwgbmV4dDogc3AubmV4dF9zdGVwLCB0ZWFtTWVtYmVyczogc3AudGVhbV9tZW1iZXJzCiAgICB9KSk7CiAgICBjb25zdCBhY3RpdmVUYXNrcyA9IGlzT3duZXIgPyB3ZWVrbHlQbGFuIDogY2xvdWRUYXNrcy5tYXAoc3QgPT4gKHsKICAgICAgaWQ6IHN0LmxvY2FsX2lkLCB0YXNrOiBzdC50YXNrX3RleHQsIHByb2plY3RJZDogc3QucHJvamVjdF9sb2NhbF9pZCwKICAgICAgc3VidGFza3M6IHN0LnN1YnRhc2tzIHx8IFtdLCBkZWFkbGluZTogc3QuZGVhZGxpbmUsCiAgICAgIGRlbGVnYXRlZFRvOiBzdC5kZWxlZ2F0ZWRfdG8sIGNvbXBsZXRlZDogc3QuY29tcGxldGVkCiAgICB9KSk7CiAgICBjb25zdCBhY3RpdmVDb21wbGV0ZWQgPSBpc093bmVyID8gY29tcGxldGVkV2Vla2x5IDogKCgpID0+IHsKICAgICAgY29uc3QgYyA9IHt9OyBjbG91ZFRhc2tzLmZvckVhY2goc3QgPT4geyBpZiAoc3QuY29tcGxldGVkKSBjW3N0LmxvY2FsX2lkXSA9IHRydWU7IH0pOyByZXR1cm4gYzsKICAgIH0pKCk7CgogICAgY29uc3QgYWRkVG9NeVBsYW4gPSAodGFzaykgPT4gewogICAgICBjb25zdCBuZXdUYXNrID0gewogICAgICAgIGlkOiBEYXRlLm5vdygpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCksCiAgICAgICAgdGFzazogdGFzay50YXNrLCBwcm9qZWN0SWQ6IHRhc2sucHJvamVjdElkLAogICAgICAgIGRlYWRsaW5lOiB0YXNrLmRlYWRsaW5lIHx8IG51bGwsCiAgICAgICAgc3VidGFza3M6IHRhc2suc3VidGFza3MgPyB0YXNrLnN1YnRhc2tzLm1hcChzID0+ICh7Li4ucywgaWQ6IERhdGUubm93KCkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCl9KSkgOiBbXQogICAgICB9OwogICAgICBzZXRXZWVrbHlQbGFuKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTsKICAgICAgc2V0QWRkZWRUYXNrcyhwcmV2ID0+ICh7Li4ucHJldiwgW3Rhc2suaWRdOiB0cnVlfSkpOwogICAgfTsKCiAgICBjb25zdCBwcm9qZWN0U3RhdHVzRGF0YSA9IGFjdGl2ZVByb2plY3RzLm1hcChwID0+IHsKICAgICAgY29uc3QgcFRhc2tzID0gYWN0aXZlVGFza3MuZmlsdGVyKHcgPT4gdy5wcm9qZWN0SWQgPT09IHAuaWQpOwogICAgICBjb25zdCBjb21wbGV0ZWRDb3VudCA9IHBUYXNrcy5maWx0ZXIodyA9PiBhY3RpdmVDb21wbGV0ZWRbdy5pZF0pLmxlbmd0aDsKICAgICAgY29uc3QgZGVsZWdhdGVkVGFza3MgPSBwVGFza3MuZmlsdGVyKHcgPT4gdy5kZWxlZ2F0ZWRUbyk7CiAgICAgIGNvbnN0IHBlbmRpbmdUYXNrcyA9IHBUYXNrcy5maWx0ZXIodyA9PiAhYWN0aXZlQ29tcGxldGVkW3cuaWRdKTsKICAgICAgcmV0dXJuIHsgLi4ucCwgdGFza3M6IHBUYXNrcywgY29tcGxldGVkQ291bnQsIHRvdGFsVGFza3M6IHBUYXNrcy5sZW5ndGgsIGRlbGVnYXRlZFRhc2tzLCBwZW5kaW5nVGFza3MsIHByb2dyZXNzUGN0OiBwVGFza3MubGVuZ3RoID4gMCA/IE1hdGgucm91bmQoKGNvbXBsZXRlZENvdW50IC8gcFRhc2tzLmxlbmd0aCkgKiAxMDApIDogMCB9OwogICAgfSkuZmlsdGVyKHAgPT4gcC50b3RhbFRhc2tzID4gMCB8fCBwLnN0YXR1cyA9PT0gJ0luIFByb2dyZXNzJyk7CgogICAgaWYgKHByb2plY3RTdGF0dXNEYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7CgogICAgcmV0dXJuICgKICAgICAgPGRpdj4KICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTQiPlByb2plY3QgU3RhdHVzIEJvYXJkPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0zIj4KICAgICAgICAgIHtwcm9qZWN0U3RhdHVzRGF0YS5tYXAocCA9PiAoCiAgICAgICAgICAgIDxkaXYga2V5PXtwLmlkfSBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktNTAgdHJhbnNpdGlvbi1jb2xvcnMiIG9uQ2xpY2s9eygpID0+IHNldEV4cGFuZGVkUHJvamVjdChleHBhbmRlZFByb2plY3QgPT09IHAuaWQgPyBudWxsIDogcC5pZCl9PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eyJ3LTIuNSBoLTIuNSByb3VuZGVkLWZ1bGwgZmxleC1zaHJpbmstMCAiICsgKHAuc3RhdHVzID09PSAnUGxhbm5pbmcnID8gJ2JnLXllbGxvdy00MDAnIDogcC5zdGF0dXMgPT09ICdJbiBQcm9ncmVzcycgPyAnYmctYmx1ZS01MDAnIDogJ2JnLWdyZWVuLTUwMCcpfSAvPgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgdHJ1bmNhdGUiPntwLm5hbWV9PC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17InRleHQteHMgZm9udC1tZWRpdW0gIiArIChwLnN0YXR1cyA9PT0gJ1BsYW5uaW5nJyA/ICd0ZXh0LXllbGxvdy02MDAnIDogcC5zdGF0dXMgPT09ICdJbiBQcm9ncmVzcycgPyAndGV4dC1ibHVlLTYwMCcgOiAndGV4dC1ncmVlbi02MDAnKX0+e3Auc3RhdHVzfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57cC5jb21wbGV0ZWRDb3VudH0ve3AudG90YWxUYXNrc30gdGFza3MgZG9uZTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIHtwLmRlbGVnYXRlZFRhc2tzLmxlbmd0aCA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtcHVycGxlLTUwMCI+e3AuZGVsZWdhdGVkVGFza3MubGVuZ3RofSBkZWxlZ2F0ZWQ8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGZsZXgtc2hyaW5rLTAiPgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0yNCBoLTEuNSBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC1mdWxsIGJnLWJsdWUtNTAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCIgc3R5bGU9e3t3aWR0aDogcC5wcm9ncmVzc1BjdCArICclJ319IC8+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCB3LTggdGV4dC1yaWdodCI+e3AucHJvZ3Jlc3NQY3R9JTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9eyJ3LTQgaC00IHRleHQtZ3JheS00MDAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gIiArIChleHBhbmRlZFByb2plY3QgPT09IHAuaWQgPyAicm90YXRlLTE4MCIgOiAiIil9IGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIHN0cm9rZVdpZHRoPXsyfSBkPSJNMTkgOWwtNyA3LTctNyIgLz48L3N2Zz4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIHtleHBhbmRlZFByb2plY3QgPT09IHAuaWQgJiYgKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJvcmRlci10IGJvcmRlci1ncmF5LTEwMCI+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAge3AudGFza3MubWFwKHRrID0+ICgKICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXt0ay5pZH0gY2xhc3NOYW1lPXsicHgtNSBweS0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiAiICsgKGFjdGl2ZUNvbXBsZXRlZFt0ay5pZF0gPyAib3BhY2l0eS01MCIgOiAiIil9PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsidy00IGgtNCByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgZmxleC1zaHJpbmstMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciAiICsgKGFjdGl2ZUNvbXBsZXRlZFt0ay5pZF0gPyAiYmctZ3JlZW4tMTAwIGJvcmRlci1ncmVlbi00MDAiIDogImJvcmRlci1ncmF5LTMwMCIpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVDb21wbGV0ZWRbdGsuaWRdICYmIDxkaXYgY2xhc3NOYW1lPSJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MDAiIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17InRleHQtc20gdHJ1bmNhdGUgIiArIChhY3RpdmVDb21wbGV0ZWRbdGsuaWRdID8gImxpbmUtdGhyb3VnaCB0ZXh0LWdyYXktNDAwIiA6ICJ0ZXh0LWdyYXktODAwIil9Pnt0ay50YXNrfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtdC0wLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGsuZGVsZWdhdGVkVG8gJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGJnLXB1cnBsZS01MCB0ZXh0LXB1cnBsZS02MDAgcHgtMS41IHB5LTAuNSByb3VuZGVkIj5Ae3RrLmRlbGVnYXRlZFRvfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ay5kZWFkbGluZSAmJiA8c3BhbiBjbGFzc05hbWU9eyJ0ZXh0LXhzICIgKyAobmV3IERhdGUodGsuZGVhZGxpbmUpIDwgbmV3IERhdGUoKSAmJiAhYWN0aXZlQ29tcGxldGVkW3RrLmlkXSA/ICJ0ZXh0LXJlZC01MDAiIDogInRleHQtZ3JheS00MDAiKX0+e25ldyBEYXRlKHRrLmRlYWRsaW5lKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywge21vbnRoOidzaG9ydCcsIGRheTonbnVtZXJpYyd9KX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGsuc3VidGFza3MgJiYgdGsuc3VidGFza3MubGVuZ3RoID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e3RrLnN1YnRhc2tzLmZpbHRlcihzPT5zLmRvbmUpLmxlbmd0aH0ve3RrLnN1YnRhc2tzLmxlbmd0aH0gc3VidGFza3M8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC1zaHJpbmstMCBtbC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICB7IWFjdGl2ZUNvbXBsZXRlZFt0ay5pZF0gJiYgIWFkZGVkVGFza3NbdGsuaWRdICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgYWRkVG9NeVBsYW4odGspOyB9fSBjbGFzc05hbWU9InRleHQteHMgcHgtMi41IHB5LTEgcm91bmRlZC1sZyBiZy1ibHVlLTUwIHRleHQtYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS0xMDAgZm9udC1tZWRpdW0gd2hpdGVzcGFjZS1ub3dyYXAiPisgQWRkIHRvIFBsYW48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgIHthZGRlZFRhc2tzW3RrLmlkXSAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmVlbi02MDAgZm9udC1tZWRpdW0iPkFkZGVkITwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICApOwogIH07CgogIGNvbnN0IEJyaWVmaW5nTW9kdWxlID0gKCkgPT4gKAogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTggbWF4LXctNnhsIj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTQiPgogICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+VGVhbSBEaXJlY3Rvcnk8L2gyPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPnthbGxQcm9maWxlcy5sZW5ndGh9IG1lbWJlcnthbGxQcm9maWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ30gb24gTnVPcGVyYW5kaTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAge2FsbFByb2ZpbGVzLmxlbmd0aCA9PT0gMCA/ICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICA8RW1wdHkgaWNvbj17SS51c2VyKCIjOUNBM0FGIil9IHRpdGxlPSJObyB0ZWFtIG1lbWJlcnMgeWV0IiBzdWI9IlRlYW0gbWVtYmVycyB3aWxsIGFwcGVhciBoZXJlIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGV5IGNyZWF0ZSB0aGVpciBOdU9wZXJhbmRpIGFjY291bnQiIC8+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBzbTpncmlkLWNvbHMtMyBnYXAtNCI+CiAgICAgICAgICAgICAgICB7YWxsUHJvZmlsZXMubWFwKChwcm9mKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbWJlclByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHAgPT4gQXJyYXkuaXNBcnJheShwLnRlYW1NZW1iZXJzKSAmJiBwLnRlYW1NZW1iZXJzLmluY2x1ZGVzKHByb2YudXNlcm5hbWUpKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbWVtYmVyRGVsZWdhdGVkID0gKGRlbGVnYXRlZEJ5TWUgfHwgW10pLmZpbHRlcihkID0+IGQucmVjaXBpZW50X3VzZXJuYW1lID09PSBwcm9mLnVzZXJuYW1lKTsKICAgICAgICAgICAgICAgICAgY29uc3QgbWVtYmVyQWN0aXZlID0gbWVtYmVyRGVsZWdhdGVkLmZpbHRlcihkID0+IGQuc3RhdHVzID09PSAnYWNjZXB0ZWQnKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbWJlclBlbmRpbmcgPSBtZW1iZXJEZWxlZ2F0ZWQuZmlsdGVyKGQgPT4gZC5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoOwogICAgICAgICAgICAgICAgICBjb25zdCBtZW1iZXJEb25lID0gbWVtYmVyRGVsZWdhdGVkLmZpbHRlcihkID0+IGQuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RoOwogICAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFscyA9IHByb2YuaW5pdGlhbHMgfHwgKHByb2YuZnVsbF9uYW1lIHx8IHByb2YudXNlcm5hbWUpLnNwbGl0KCcgJykubWFwKHcgPT4gd1swXSkuam9pbignJykudG9VcHBlckNhc2UoKS5zbGljZSgwLCAyKTsKICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gWwogICAgICAgICAgICAgICAgICAgIFsnYmctYmx1ZS0xMDAnLCAndGV4dC1ibHVlLTYwMCcsICdib3JkZXItYmx1ZS0yMDAnXSwKICAgICAgICAgICAgICAgICAgICBbJ2JnLXB1cnBsZS0xMDAnLCAndGV4dC1wdXJwbGUtNjAwJywgJ2JvcmRlci1wdXJwbGUtMjAwJ10sCiAgICAgICAgICAgICAgICAgICAgWydiZy1lbWVyYWxkLTEwMCcsICd0ZXh0LWVtZXJhbGQtNjAwJywgJ2JvcmRlci1lbWVyYWxkLTIwMCddLAogICAgICAgICAgICAgICAgICAgIFsnYmctYW1iZXItMTAwJywgJ3RleHQtYW1iZXItNzAwJywgJ2JvcmRlci1hbWJlci0yMDAnXSwKICAgICAgICAgICAgICAgICAgICBbJ2JnLXJvc2UtMTAwJywgJ3RleHQtcm9zZS02MDAnLCAnYm9yZGVyLXJvc2UtMjAwJ10sCiAgICAgICAgICAgICAgICAgICAgWydiZy1jeWFuLTEwMCcsICd0ZXh0LWN5YW4tNjAwJywgJ2JvcmRlci1jeWFuLTIwMCddLAogICAgICAgICAgICAgICAgICAgIFsnYmctaW5kaWdvLTEwMCcsICd0ZXh0LWluZGlnby02MDAnLCAnYm9yZGVyLWluZGlnby0yMDAnXSwKICAgICAgICAgICAgICAgICAgICBbJ2JnLXRlYWwtMTAwJywgJ3RleHQtdGVhbC02MDAnLCAnYm9yZGVyLXRlYWwtMjAwJ10sCiAgICAgICAgICAgICAgICAgICAgWydiZy1vcmFuZ2UtMTAwJywgJ3RleHQtb3JhbmdlLTYwMCcsICdib3JkZXItb3JhbmdlLTIwMCddLAogICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICBjb25zdCBjb2xvcklkeCA9IHByb2YudXNlcm5hbWUuY2hhckNvZGVBdCgwKSAlIGNvbG9ycy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGNvbnN0IFtiZ0NvbG9yLCB0ZXh0Q29sb3IsIGJvcmRlckNvbG9yXSA9IGNvbG9yc1tjb2xvcklkeF07CiAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3Byb2YuaWR9IGNsYXNzTmFtZT17ImJnLXdoaXRlIHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC01IGNhcmQtc2hhZG93IGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciJ9PgogICAgICAgICAgICAgICAgICAgICAge3Byb2YuYXZhdGFyX3VybCA/IDxpbWcgc3JjPXtwcm9mLmF2YXRhcl91cmx9IGFsdD17cHJvZi5mdWxsX25hbWUgfHwgcHJvZi51c2VybmFtZX0gY2xhc3NOYW1lPXsidy0xNiBoLTE2IHJvdW5kZWQtZnVsbCBvYmplY3QtY292ZXIgbWItMyBib3JkZXItMiAiICsgYm9yZGVyQ29sb3J9IC8+IDogPGRpdiBjbGFzc05hbWU9eyJ3LTE2IGgtMTYgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteGwgZm9udC1ib2xkIG1iLTMgIiArIGJnQ29sb3IgKyAiICIgKyB0ZXh0Q29sb3J9Pntpbml0aWFsc308L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTAuNSI+e3Byb2YuZnVsbF9uYW1lIHx8IHByb2YudXNlcm5hbWV9PC9wPgogICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbWItMyI+QHtwcm9mLnVzZXJuYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBnYXAtMS41IG1iLTIiPgogICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyUHJvamVjdHMubGVuZ3RoID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9InB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ibHVlLTUwIHRleHQtYmx1ZS02MDAgdGV4dC14cyBmb250LW1lZGl1bSI+e21lbWJlclByb2plY3RzLmxlbmd0aH0gcHJvamVjdHttZW1iZXJQcm9qZWN0cy5sZW5ndGggIT09IDEgPyAncycgOiAnJ308L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyQWN0aXZlID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9InB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ncmVlbi01MCB0ZXh0LWdyZWVuLTYwMCB0ZXh0LXhzIGZvbnQtbWVkaXVtIj57bWVtYmVyQWN0aXZlfSBhY3RpdmU8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyUGVuZGluZyA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctYW1iZXItNTAgdGV4dC1hbWJlci02MDAgdGV4dC14cyBmb250LW1lZGl1bSI+e21lbWJlclBlbmRpbmd9IHBlbmRpbmc8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyRG9uZSA+IDAgJiYgPHNwYW4gY2xhc3NOYW1lPSJweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctZW1lcmFsZC01MCB0ZXh0LWVtZXJhbGQtNjAwIHRleHQteHMgZm9udC1tZWRpdW0iPnttZW1iZXJEb25lfSBkb25lPC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAge21lbWJlclByb2plY3RzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LXdyYXAganVzdGlmeS1jZW50ZXIgZ2FwLTEgbXQtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAge21lbWJlclByb2plY3RzLnNsaWNlKDAsIDIpLm1hcChwID0+IDxzcGFuIGtleT17cC5pZH0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTUwIHRleHQtZ3JheS01MDAiPntwLm5hbWUubGVuZ3RoID4gMTUgPyBwLm5hbWUuc3Vic3RyaW5nKDAsIDE1KSArICcuLi4nIDogcC5uYW1lfTwvc3Bhbj4pfQogICAgICAgICAgICAgICAgICAgICAgICAgIHttZW1iZXJQcm9qZWN0cy5sZW5ndGggPiAyICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctZ3JheS01MCB0ZXh0LWdyYXktNDAwIj4re21lbWJlclByb2plY3RzLmxlbmd0aCAtIDJ9IG1vcmU8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICB7bWVtYmVyUHJvamVjdHMubGVuZ3RoID09PSAwICYmIG1lbWJlckRlbGVnYXRlZC5sZW5ndGggPT09IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTMwMCBpdGFsaWMiPk5ldyBtZW1iZXI8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPFByb2plY3RTdGF0dXNCb2FyZCAvPgoKICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItNCI+UXVpY2sgU25hcHNob3Q8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTMgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC01IGNhcmQtc2hhZG93IHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPntpbmNvbWVTdHJlYW1zLmxlbmd0aH08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTEiPkluY29tZSBTdHJlYW1zPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC01IGNhcmQtc2hhZG93IHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPntwcm9qZWN0cy5sZW5ndGh9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0xIj5BY3RpdmUgUHJvamVjdHM8L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTUgY2FyZC1zaGFkb3cgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+e3F1aWNrVGFza3MuZmlsdGVyKHQgPT4gIWNvbXBsZXRlZFRhc2tzW3QuaWRdKS5sZW5ndGh9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0xIj5QZW5kaW5nIFRhc2tzPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgKTsKCiAgICBjb25zdCBQbGFubmVyTW9kdWxlID0gKCkgPT4gewogICAgICAgIGNvbnN0IGdyb3VwVGFza3NCeVByb2plY3QgPSAodGFza3MpID0+IHsKICAgICAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHt9OwogICAgICAgICAgICBjb25zdCB1bmxpbmtlZCA9IFtdOwogICAgICAgICAgICB0YXNrcy5mb3JFYWNoKHcgPT4gewogICAgICAgICAgICAgICAgaWYgKHcucHJvamVjdElkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFncm91cGVkW3cucHJvamVjdElkXSkgZ3JvdXBlZFt3LnByb2plY3RJZF0gPSBbXTsKICAgICAgICAgICAgICAgICAgICBncm91cGVkW3cucHJvamVjdElkXS5wdXNoKHcpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB1bmxpbmtlZC5wdXNoKHcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHsgZ3JvdXBlZCwgdW5saW5rZWQgfTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGdvYWxzT25seSA9IHVzZU1lbW8oKCkgPT4gd2Vla2x5UGxhbi5maWx0ZXIodyA9PiAhdy50aGlzV2VlayksIFt3ZWVrbHlQbGFuXSk7CiAgICAgICAgY29uc3QgdGhpc1dlZWtPbmx5ID0gdXNlTWVtbygoKSA9PiB3ZWVrbHlQbGFuLmZpbHRlcih3ID0+IHcudGhpc1dlZWspLCBbd2Vla2x5UGxhbl0pOwogICAgICAgIGNvbnN0IHdlZWtseUJ5UHJvamVjdCA9IHVzZU1lbW8oKCkgPT4gZ3JvdXBUYXNrc0J5UHJvamVjdChnb2Fsc09ubHkpLCBbZ29hbHNPbmx5XSk7CiAgICAgICAgY29uc3QgdGhpc1dlZWtCeVByb2plY3QgPSB1c2VNZW1vKCgpID0+IGdyb3VwVGFza3NCeVByb2plY3QodGhpc1dlZWtPbmx5KSwgW3RoaXNXZWVrT25seV0pOwoKICAgICAgICBjb25zdCB7IHdlZWtseURvbmUsIHdlZWtseVRvdGFsIH0gPSB1c2VNZW1vKCgpID0+IHsKICAgICAgICAgICAgbGV0IGRvbmUgPSAwLCB0b3RhbCA9IDA7CiAgICAgICAgICAgIHdlZWtseVBsYW4uZm9yRWFjaCh3ID0+IHsKICAgICAgICAgICAgICAgIGlmICh3LnN1YnRhc2tzICYmIHcuc3VidGFza3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IHcuc3VidGFza3MubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGRvbmUgKz0gdy5zdWJ0YXNrcy5maWx0ZXIocyA9PiBzLmRvbmUpLmxlbmd0aDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdG90YWwgKz0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGVkV2Vla2x5W3cuaWRdKSBkb25lICs9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4geyB3ZWVrbHlEb25lOiBkb25lLCB3ZWVrbHlUb3RhbDogdG90YWwgfTsKICAgICAgICB9LCBbd2Vla2x5UGxhbiwgY29tcGxldGVkV2Vla2x5XSk7CiAgICAgICAgY29uc3QgZGFpbHlEb25lID0gcXVpY2tUYXNrcy5maWx0ZXIodCA9PiBjb21wbGV0ZWRUYXNrc1t0LmlkXSkubGVuZ3RoOwogICAgICAgIGNvbnN0IGRhaWx5VG90YWwgPSBxdWlja1Rhc2tzLmxlbmd0aDsKCiAgICAgICAgY29uc3QgV2Vla2x5VGFza1JvdyA9ICh7IHcsIHNob3dQcm9qZWN0LCBjb250ZXh0IH0pID0+IHsKICAgICAgICAgICAgY29uc3QgYWxyZWFkeVB1c2hlZCA9IHF1aWNrVGFza3Muc29tZSh0ID0+IHQud2Vla2x5U291cmNlSWQgPT09IHcuaWQpOwogICAgICAgICAgICBjb25zdCBzcCA9IGdldFN1YlByb2dyZXNzKHcpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J3B4LTUgcHktMy41IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGdyb3VwICcgKyAoY29tcGxldGVkV2Vla2x5W3cuaWRdID8gJ29wYWNpdHktNTAnIDogJycpfT4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJjdXJzb3ItcG9pbnRlciBmbGV4LXNocmluay0wIiBvbkNsaWNrPXsoKSA9PiB0b2dnbGVXZWVrbHkody5pZCl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbXBsZXRlZFdlZWtseVt3LmlkXSA/IEkuY2hlY2soIiMxMEI5ODEiKSA6IEkuY2lyY2xlKCIjRDFENURCIil9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17J3RleHQtc20gJyArIChjb21wbGV0ZWRXZWVrbHlbdy5pZF0gPyAnbGluZS10aHJvdWdoIHRleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS05MDAnKX0+e3cudGFza308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3AgJiYgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPntzcC5kb25lfS97c3AudG90YWx9IHN1Yi1nb2FscyBkb25lPC9wPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dy5kZWxlZ2F0ZWRGcm9tICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQgYmctcHVycGxlLTEwMCB0ZXh0LXB1cnBsZS02MDAgZm9udC1tZWRpdW0iPmZyb20ge3cuZGVsZWdhdGVkRnJvbX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3LmRlYWRsaW5lICYmIDxzcGFuIGNsYXNzTmFtZT17J3RleHQteHMgcHgtMS41IHB5LTAuNSByb3VuZGVkICcgKyAobmV3IERhdGUody5kZWFkbGluZSkgPCBuZXcgRGF0ZSgpID8gJ2JnLXJlZC01MCB0ZXh0LXJlZC01MDAnIDogJ2JnLWFtYmVyLTUwIHRleHQtYW1iZXItNjAwJyl9PntuZXcgRGF0ZSh3LmRlYWRsaW5lICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7bW9udGg6J3Nob3J0JywgZGF5OidudW1lcmljJ30pfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3cuZGVsZWdhdGVkVG8gJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZCBiZy1wdXJwbGUtNTAgdGV4dC1wdXJwbGUtNTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj57SS51c2VyKCIjOEI1Q0Y2Iil9IHt3LmRlbGVnYXRlZFRvfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICB7dy5kZWxlZ2F0ZWRGcm9tICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTYwMCI+ZnJvbSB7dy5kZWxlZ2F0ZWRGcm9tfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbiBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshY29tcGxldGVkV2Vla2x5W3cuaWRdICYmIGNvbnRleHQgPT09ICdnb2FscycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0V2Vla2x5UGxhbihwcmV2ID0+IHByZXYubWFwKHQgPT4gdC5pZCA9PT0gdy5pZCA/IHsuLi50LCB0aGlzV2VlazogdHJ1ZX0gOiB0KSl9IGNsYXNzTmFtZT0icC0xLjUgcm91bmRlZC1sZyBob3ZlcjpiZy1hbWJlci01MCB0cmFuc2l0aW9uIHRleHQtYW1iZXItNTAwIiB0aXRsZT0iTW92ZSB0byBUaGlzIFdlZWsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7SS5hcnJvd1JpZ2h0KCIjRjU5RTBCIil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFjb21wbGV0ZWRXZWVrbHlbdy5pZF0gJiYgY29udGV4dCA9PT0gJ3RoaXNXZWVrJyAmJiAhYWxyZWFkeVB1c2hlZCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBwdXNoVG9EYWlseSh3KX0gY2xhc3NOYW1lPSJwLTEuNSByb3VuZGVkLWxnIGhvdmVyOmJnLWJsdWUtNTAgdHJhbnNpdGlvbiB0ZXh0LWJsdWUtNTAwIiB0aXRsZT0iUHVzaCB0byBUb2RheSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLmFycm93UmlnaHQoIiMzQjgyRjYiKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWNvbXBsZXRlZFdlZWtseVt3LmlkXSAmJiBjb250ZXh0ID09PSAndGhpc1dlZWsnICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFdlZWtseVBsYW4ocHJldiA9PiBwcmV2Lm1hcCh0ID0+IHQuaWQgPT09IHcuaWQgPyB7Li4udCwgdGhpc1dlZWs6IGZhbHNlfSA6IHQpKX0gY2xhc3NOYW1lPSJwLTEuNSByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24gdGV4dC1ncmF5LTQwMCIgdGl0bGU9IkJhY2sgdG8gR29hbHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlV2lkdGg9IjIiPjxwb2x5bGluZSBwb2ludHM9IjE1IDE4IDkgMTIgMTUgNiI+PC9wb2x5bGluZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWxyZWFkeVB1c2hlZCAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1lbWVyYWxkLTUwMCBweC0yIj5JbiB0b2RheTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0RWRpdEl0ZW0odyk7IHNldE1vZGFsKCdlZGl0V2Vla2x5Jyk7IH19IGNsYXNzTmFtZT0icC0xLjUgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uIj57SS5lZGl0KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIHt3LnN1YnRhc2tzICYmIHcuc3VidGFza3MubGVuZ3RoID4gMCAmJiAhY29tcGxldGVkV2Vla2x5W3cuaWRdICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InBsLTEyIHByLTUgcGItMyBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3cuc3VidGFza3MubWFwKHMgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzLmlkfSBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yLjUgcHktMSBjdXJzb3ItcG9pbnRlciBncm91cC9zdWIiIG9uQ2xpY2s9eygpID0+IHRvZ2dsZVN1YnRhc2sody5pZCwgcy5pZCl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J3ctNCBoLTQgcm91bmRlZCBib3JkZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZmxleC1zaHJpbmstMCB0cmFuc2l0aW9uICcgKyAocy5kb25lID8gJ2JnLWVtZXJhbGQtNTAwIGJvcmRlci1lbWVyYWxkLTUwMCcgOiAnYm9yZGVyLWdyYXktMzAwIGdyb3VwLWhvdmVyL3N1Yjpib3JkZXItYmx1ZS00MDAnKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy5kb25lICYmIDxzdmcgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZVdpZHRoPSIzIiBzdHJva2VMaW5lY2FwPSJyb3VuZCIgc3Ryb2tlTGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiI+PC9wb2x5bGluZT48L3N2Zz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eyd0ZXh0LXhzICcgKyAocy5kb25lID8gJ2xpbmUtdGhyb3VnaCB0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJyl9PntzLnRleHR9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gKAogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTggbWF4LXctNnhsIj4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgcC0xIHctZml0Ij4KICAgICAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2dvYWxzJywgbGFiZWw6ICdHb2FscyAmIEludGVudGlvbnMnLCBjb3VudDogd2Vla2x5UGxhbi5maWx0ZXIodyA9PiAhdy50aGlzV2VlayAmJiAhY29tcGxldGVkV2Vla2x5W3cuaWRdKS5sZW5ndGggfSwKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnd2Vla2x5JywgbGFiZWw6ICdUaGlzIFdlZWsnLCBjb3VudDogd2Vla2x5UGxhbi5maWx0ZXIodyA9PiB3LnRoaXNXZWVrICYmICFjb21wbGV0ZWRXZWVrbHlbdy5pZF0pLmxlbmd0aCB9LAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdkYWlseScsIGxhYmVsOiAnVG9kYXknLCBjb3VudDogZGFpbHlUb3RhbCAtIGRhaWx5RG9uZSB9LAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdzY2hlZHVsZScsIGxhYmVsOiAnU2NoZWR1bGUnLCBjb3VudDogdGltZUJsb2Nrcy5maWx0ZXIoYiA9PiAhY29tcGxldGVkVGltZUJsb2Nrc1tiLmlkXSkubGVuZ3RoIH0sCiAgICAgICAgICAgICAgICBdLm1hcCh0YWIgPT4gKAogICAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXt0YWIuaWR9IG9uQ2xpY2s9eygpID0+IHNldFBsYW5uZXJUYWIodGFiLmlkKX0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsncHgtNCBweS0yIHJvdW5kZWQtbWQgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiAnICsgKHBsYW5uZXJUYWIgPT09IHRhYi5pZCA/ICdiZy13aGl0ZSB0ZXh0LWdyYXktOTAwIHNoYWRvdy1zbScgOiAndGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwJyl9PgogICAgICAgICAgICAgICAgICAgICAgICB7dGFiLmxhYmVsfQogICAgICAgICAgICAgICAgICAgICAgICB7dGFiLmNvdW50ID4gMCAmJiA8c3BhbiBjbGFzc05hbWU9eyd0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsICcgKyAocGxhbm5lclRhYiA9PT0gdGFiLmlkID8gJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS02MDAnIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS01MDAnKX0+e3RhYi5jb3VudH08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAge3BsYW5uZXJUYWIgPT09ICdnb2FscycgJiYgKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTUgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Hb2FscyAmIEludGVudGlvbnM8L2gyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTAuNSI+WW91ciBtYXN0ZXIgcGxhbiDigJQgbW92ZSB0YXNrcyB0byBUaGlzIFdlZWsgd2hlbiByZWFkeTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dlZWtseVBsYW4uc29tZSh3ID0+IGNvbXBsZXRlZFdlZWtseVt3LmlkXSkgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldFdlZWtseVBsYW4ocHJldiA9PiBwcmV2LmZpbHRlcih3ID0+ICFjb21wbGV0ZWRXZWVrbHlbdy5pZF0pKTsgc2V0Q29tcGxldGVkV2Vla2x5KHt9KTsgfX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTYwMCBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+e0kuaGlzdG9yeSgiIzlDQTNBRiIpfSBDbGVhciBkb25lPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ2FkZFdlZWtseScpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj57SS5wbHVzKCIjM0I4MkY2Iil9IEFkZCBHb2FsPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICB7d2Vla2x5VG90YWwgPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC0yIGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImgtZnVsbCBiZy1ibHVlLTUwMCByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwiIHN0eWxlPXt7d2lkdGg6ICh3ZWVrbHlUb3RhbCA+IDAgPyAod2Vla2x5RG9uZSAvIHdlZWtseVRvdGFsKSAqIDEwMCA6IDApICsgJyUnfX0+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAge3dlZWtseVBsYW4ubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eSBpY29uPXtJLmNsaXBib2FyZCgiIzlDQTNBRiIpfSB0aXRsZT0iTm8gd2Vla2x5IHRhc2tzIHlldCIgc3ViPSJTdGFydCBieSBhZGRpbmcgeW91ciBrZXkgb2JqZWN0aXZlcyBmb3IgdGhlIHdlZWsiIGFjdGlvbj17KCkgPT4gc2V0TW9kYWwoJ2FkZFdlZWtseScpfSBhY3Rpb25MYWJlbD0iQWRkIFdlZWtseSBUYXNrIiAvPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyh3ZWVrbHlCeVByb2plY3QuZ3JvdXBlZCkubWFwKHBpZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvaiA9IHByb2plY3RzLmZpbmQocCA9PiBwLmlkID09PSBOdW1iZXIocGlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFza3MgPSB3ZWVrbHlCeVByb2plY3QuZ3JvdXBlZFtwaWRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9qVG90YWwgPSAwLCBwcm9qRG9uZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza3MuZm9yRWFjaCh3ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcuc3VidGFza3MgJiYgdy5zdWJ0YXNrcy5sZW5ndGggPiAwKSB7IHByb2pUb3RhbCArPSB3LnN1YnRhc2tzLmxlbmd0aDsgcHJvakRvbmUgKz0gdy5zdWJ0YXNrcy5maWx0ZXIocyA9PiBzLmRvbmUpLmxlbmd0aDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgcHJvalRvdGFsICs9IDE7IGlmIChjb21wbGV0ZWRXZWVrbHlbdy5pZF0pIHByb2pEb25lICs9IDE7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17cGlkfSBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktMy41IGJnLWJsdWUtNTAvNTAgYm9yZGVyLWIgYm9yZGVyLWJsdWUtMTAwLzUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItcG9pbnRlciBzZWxlY3Qtbm9uZSBob3ZlcjpiZy1ibHVlLTUwLzgwIHRyYW5zaXRpb24iIG9uQ2xpY2s9eygpID0+IHRvZ2dsZVByb2plY3RDb2xsYXBzZShwaWQpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eyd0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDAgJyArIChjb2xsYXBzZWRQcm9qZWN0c1twaWRdID8gJycgOiAncm90YXRlLTkwJyl9PntJLmNoZXZyb24oIiM5Q0EzQUYiKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTIgaC04IHJvdW5kZWQtZnVsbCBiZy1ibHVlLTQwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57cHJvaiA/IHByb2oubmFtZSA6ICdVbmtub3duIFByb2plY3QnfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57cHJvakRvbmV9L3twcm9qVG90YWx9IGRvbmU8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9qICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57Z2V0UHJvamVjdFByb2dyZXNzKE51bWJlcihwaWQpKSB8fCAwfSU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0yMCBoLTEuNSBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwiPjxkaXYgY2xhc3NOYW1lPSJoLWZ1bGwgYmctYmx1ZS01MDAgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsIiBzdHlsZT17e3dpZHRoOiAoZ2V0UHJvamVjdFByb2dyZXNzKE51bWJlcihwaWQpKSB8fCAwKSArICclJ319PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWNvbGxhcHNlZFByb2plY3RzW3BpZF0gJiYgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGFza3MuZmlsdGVyKHcgPT4gIWNvbXBsZXRlZFdlZWtseVt3LmlkXSkubWFwKHcgPT4gPFdlZWtseVRhc2tSb3cga2V5PXt3LmlkfSB3PXt3fSBjb250ZXh0PSJnb2FscyIgLz4pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3dlZWtseUJ5UHJvamVjdC51bmxpbmtlZC5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIGNhcmQtc2hhZG93IG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTMuNSBiZy1ncmF5LTUwLzUwIGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBjdXJzb3ItcG9pbnRlciBzZWxlY3Qtbm9uZSBob3ZlcjpiZy1ncmF5LTUwLzgwIHRyYW5zaXRpb24iIG9uQ2xpY2s9eygpID0+IHRvZ2dsZVByb2plY3RDb2xsYXBzZSgnZ2VuZXJhbCcpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17J3RyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTIwMCAnICsgKGNvbGxhcHNlZFByb2plY3RzWydnZW5lcmFsJ10gPyAnJyA6ICdyb3RhdGUtOTAnKX0+e0kuY2hldnJvbigiIzlDQTNBRiIpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTIgaC04IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTMwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkdlbmVyYWwgVGFza3M8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPk5vdCBsaW5rZWQgdG8gYSBwcm9qZWN0PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IWNvbGxhcHNlZFByb2plY3RzWydnZW5lcmFsJ10gJiYgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3ZWVrbHlCeVByb2plY3QudW5saW5rZWQuZmlsdGVyKHcgPT4gIWNvbXBsZXRlZFdlZWtseVt3LmlkXSkubWFwKHcgPT4gPFdlZWtseVRhc2tSb3cga2V5PXt3LmlkfSB3PXt3fSBjb250ZXh0PSJnb2FscyIgLz4pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICl9CgogICAgICAgICAgICB7cGxhbm5lclRhYiA9PT0gJ3dlZWtseScgJiYgKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTUgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5UaGlzIFdlZWs8L2gyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTAuNSI+e3RoaXNXZWVrT25seS5maWx0ZXIodyA9PiBjb21wbGV0ZWRXZWVrbHlbdy5pZF0pLmxlbmd0aH0gb2Yge3RoaXNXZWVrT25seS5sZW5ndGh9IHRhc2tzIGRvbmUgdGhpcyB3ZWVrPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICB7dGhpc1dlZWtPbmx5Lmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLTIgYmctZ3JheS0xMDAgcm91bmRlZC1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC1mdWxsIGJnLWVtZXJhbGQtNTAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCIgc3R5bGU9e3t3aWR0aDogKCgpID0+IHsgY29uc3QgdCA9IHRoaXNXZWVrT25seS5sZW5ndGg7IGNvbnN0IGQgPSB0aGlzV2Vla09ubHkuZmlsdGVyKHcgPT4gY29tcGxldGVkV2Vla2x5W3cuaWRdKS5sZW5ndGg7IHJldHVybiB0ID4gMCA/IChkIC8gdCkgKiAxMDAgOiAwOyB9KSgpICsgJyUnfX0+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAge3RoaXNXZWVrT25seS5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5IGljb249e0kuY2xpcGJvYXJkKCIjOUNBM0FGIil9IHRpdGxlPSJObyB0YXNrcyBmb3IgdGhpcyB3ZWVrIHlldCIgc3ViPSJNb3ZlIHRhc2tzIGZyb20gR29hbHMgJiBJbnRlbnRpb25zIHRvIGZvY3VzIG9uIHRoZW0gdGhpcyB3ZWVrIiAvPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyh0aGlzV2Vla0J5UHJvamVjdC5ncm91cGVkKS5tYXAocGlkID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9qID0gcHJvamVjdHMuZmluZChwID0+IHAuaWQgPT09IE51bWJlcihwaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrcyA9IHRoaXNXZWVrQnlQcm9qZWN0Lmdyb3VwZWRbcGlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUYXNrcyA9IHRhc2tzLmZpbHRlcih3ID0+ICFjb21wbGV0ZWRXZWVrbHlbdy5pZF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbmVUYXNrcyA9IHRhc2tzLmZpbHRlcih3ID0+IGNvbXBsZXRlZFdlZWtseVt3LmlkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3BpZH0gY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTMuNSBiZy1lbWVyYWxkLTUwLzUwIGJvcmRlci1iIGJvcmRlci1lbWVyYWxkLTEwMC81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTIgaC04IHJvdW5kZWQtZnVsbCBiZy1lbWVyYWxkLTQwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57cHJvaiA/IHByb2oubmFtZSA6ICdVbmtub3duIFByb2plY3QnfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57ZG9uZVRhc2tzLmxlbmd0aH0ve3Rhc2tzLmxlbmd0aH0gZG9uZTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhc2tzLm1hcCh3ID0+IDxXZWVrbHlUYXNrUm93IGtleT17dy5pZH0gdz17d30gY29udGV4dD0idGhpc1dlZWsiIC8+KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXNXZWVrQnlQcm9qZWN0LnVubGlua2VkLmZpbHRlcih3ID0+ICFjb21wbGV0ZWRXZWVrbHlbdy5pZF0pLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3cgb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTUgcHktMy41IGJnLWdyYXktNTAvNTAgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTIgaC04IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTMwMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPkdlbmVyYWwgVGFza3M8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJkaXZpZGUteSBkaXZpZGUtZ3JheS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpc1dlZWtCeVByb2plY3QudW5saW5rZWQuZmlsdGVyKHcgPT4gIWNvbXBsZXRlZFdlZWtseVt3LmlkXSkubWFwKHcgPT4gPFdlZWtseVRhc2tSb3cga2V5PXt3LmlkfSB3PXt3fSBjb250ZXh0PSJ0aGlzV2VlayIgLz4pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgICAgIHtwbGFubmVyVGFiID09PSAnZGFpbHknICYmICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTYiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCI+VG9kYXkncyBUYXNrczwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1aWNrVGFza3Muc29tZSh0ID0+IGNvbXBsZXRlZFRhc2tzW3QuaWRdKSAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FyY2hpdmVDb21wbGV0ZWR9IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPntJLmhpc3RvcnkoIiM5Q0EzQUYiKX0gQXJjaGl2ZSBkb25lPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ2FkZFRhc2snKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+e0kucGx1cygiIzNCODJGNiIpfSBBZGQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1aWNrVGFza3MubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RW1wdHkgaWNvbj17SS5jaGVjaygiIzlDQTNBRiIpfSB0aXRsZT0iTm8gdGFza3MgeWV0IiBzdWI9IkFkZCB0YXNrcyBvciBwdWxsIGZyb20geW91ciB3ZWVrbHkgcGxhbiIgYWN0aW9uPXsoKSA9PiBzZXRNb2RhbCgnYWRkVGFzaycpfSBhY3Rpb25MYWJlbD0iQWRkIFRhc2siIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUGVuZGluZyB0YXNrcyBmaXJzdCAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1aWNrVGFza3MuZmlsdGVyKHQgPT4gIWNvbXBsZXRlZFRhc2tzW3QuaWRdKS5tYXAodCA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dC5pZH0gY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC00IGNhcmQtc2hhZG93IGNhcmQtc2hhZG93LWhvdmVyIHRyYW5zaXRpb24tYWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImN1cnNvci1wb2ludGVyIiBvbkNsaWNrPXsoKSA9PiB0b2dnbGVUYXNrKHQuaWQpfT57SS5jaXJjbGUoIiNEMUQ1REIiKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAiPnt0LnRhc2t9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57dC5kdWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3QucHJvamVjdElkICYmIHByb2plY3ROYW1lKHQucHJvamVjdElkKSAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZCBiZy1ibHVlLTUwIHRleHQtYmx1ZS01MDAgdHJ1bmNhdGUgbWF4LXctWzEyMHB4XSI+e3Byb2plY3ROYW1lKHQucHJvamVjdElkKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3QuZGVsZWdhdGVkVG8gJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQgYmctcHVycGxlLTUwIHRleHQtcHVycGxlLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+e0kudXNlcigiIzhCNUNGNiIpfSB7dC5kZWxlZ2F0ZWRUb308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eyd0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBmb250LW1lZGl1bSBmbGV4LXNocmluay0wICcgKyAocHJpb0NvbG9yW3QucHJpb3JpdHldIHx8IHByaW9Db2xvci5tZWRpdW0pfT57cHJpb0xhYmVsW3QucHJpb3JpdHldIHx8ICdNZWQnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0RWRpdEl0ZW0odCk7IHNldE1vZGFsKCdlZGl0VGFzaycpOyB9fSBjbGFzc05hbWU9InAtMSByb3VuZGVkLWxnIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24gZmxleC1zaHJpbmstMCI+e0kuZWRpdCgiIzlDQTNBRiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQ29tcGxldGVkIHRhc2tzIChkaW1tZWQpICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cXVpY2tUYXNrcy5maWx0ZXIodCA9PiBjb21wbGV0ZWRUYXNrc1t0LmlkXSkubWFwKHQgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3QuaWR9IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIHAtNCBjYXJkLXNoYWRvdyB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBvcGFjaXR5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImN1cnNvci1wb2ludGVyIiBvbkNsaWNrPXsoKSA9PiB0b2dnbGVUYXNrKHQuaWQpfT57SS5jaGVjaygiIzEwQjk4MSIpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG1pbi13LTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTQwMCBsaW5lLXRocm91Z2giPnt0LnRhc2t9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBEZWxlZ2F0ZWQgc2VjdGlvbiAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtxdWlja1Rhc2tzLmZpbHRlcih0ID0+IHQuZGVsZWdhdGVkVG8gJiYgIWNvbXBsZXRlZFRhc2tzW3QuaWRdKS5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtNiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLnVzZXIoIiM4QjVDRjYiKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5EZWxlZ2F0ZWQ8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtNjAwIj57cXVpY2tUYXNrcy5maWx0ZXIodCA9PiB0LmRlbGVnYXRlZFRvICYmICFjb21wbGV0ZWRUYXNrc1t0LmlkXSkubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3F1aWNrVGFza3MuZmlsdGVyKHQgPT4gdC5kZWxlZ2F0ZWRUbyAmJiAhY29tcGxldGVkVGFza3NbdC5pZF0pLm1hcCh0ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17J2RlbC0nK3QuaWR9IGNsYXNzTmFtZT0iYmctcHVycGxlLTUwLzUwIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1wdXJwbGUtMTAwIHAtNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTggaC04IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtcHVycGxlLTYwMCBmb250LXNlbWlib2xkIHRleHQteHMgZmxleC1zaHJpbmstMCI+e3QuZGVsZWdhdGVkVG8uc3BsaXQoJyAnKS5tYXAodyA9PiB3WzBdKS5qb2luKCcnKS50b1VwcGVyQ2FzZSgpLnNsaWNlKDAsMil9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCI+e3QudGFza308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1wdXJwbGUtNTAwIG10LTAuNSI+QXNzaWduZWQgdG8ge3QuZGVsZWdhdGVkVG99PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsndGV4dC14cyBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgZm9udC1tZWRpdW0gJyArIChwcmlvQ29sb3JbdC5wcmlvcml0eV0gfHwgcHJpb0NvbG9yLm1lZGl1bSl9PntwcmlvTGFiZWxbdC5wcmlvcml0eV0gfHwgJ01lZCd9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi00Ij5BdCBhIEdsYW5jZTwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWdyYXktMTAwIHAtNCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIG1iLTIiPldlZWtseSBQcm9ncmVzczwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPnt3ZWVrbHlEb25lfSAvIHt3ZWVrbHlUb3RhbH08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj53ZWVrbHkgdGFza3MgZG9uZTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3dlZWtseVRvdGFsID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGgtMS41IGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBtdC0yIj48ZGl2IGNsYXNzTmFtZT0iaC1mdWxsIGJnLWJsdWUtNTAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCIgc3R5bGU9e3t3aWR0aDogKCh3ZWVrbHlEb25lIC8gd2Vla2x5VG90YWwpICogMTAwKSArICclJ319PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0xMDAgcC00IGNhcmQtc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMiI+VG9kYXk8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj57ZGFpbHlEb25lfSAvIHtkYWlseVRvdGFsfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPnRhc2tzIGRvbmU8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBwLTQgY2FyZC1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSBtYi0yIj5TY2hlZHVsZTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPnt0aW1lQmxvY2tzLmZpbHRlcihiID0+ICFjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdKS5sZW5ndGh9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+YmxvY2tzIHJlbWFpbmluZzwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0RXhwYW5kZWRJZGVhcyghZXhwYW5kZWRJZGVhcyl9IGNsYXNzTmFtZT0idy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTUgaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uIHJvdW5kZWQteGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj57SS5idWxiKCIjRjU5RTBCIil9PHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5JZGVhcyAmIExlYXJuaW5nPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG1sLTIiPntpZGVhcy5sZW5ndGggKyBsZWFybmluZy5sZW5ndGh9IGl0ZW1zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsndHJhbnNpdGlvbi10cmFuc2Zvcm0gJyArIChleHBhbmRlZElkZWFzID8gJ3JvdGF0ZS05MCcgOiAnJyl9PntJLmNoZXZyb24oIiM5Q0EzQUYiKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWRJZGVhcyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHgtNSBwYi01IHNwYWNlLXktNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUiPklkZWFzIEkgRG9uJ3QgV2FudCB0byBGb3JnZXQ8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsKCdhZGRJZGVhJyl9IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWJsdWUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW0iPntJLnBsdXMoIiMzQjgyRjYiKX08L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpZGVhcy5sZW5ndGggPT09IDAgPyA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCBpdGFsaWMiPk5vIGlkZWFzIGNhcHR1cmVkIHlldC4gQ2xpY2sgKyB0byBhZGQgb25lLjwvcD4gOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aWRlYXMubWFwKGlkZWEgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWRlYS5pZH0gY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0zIHAtMyBiZy1hbWJlci01MCByb3VuZGVkLWxnIGdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEuNSBoLTEuNSByb3VuZGVkLWZ1bGwgYmctYW1iZXItNDAwIG10LTIgZmxleC1zaHJpbmstMCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIj48cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTgwMCI+e2lkZWEudGV4dH08L3A+PHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMC41Ij57aWRlYS50fTwvcD48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRFZGl0SXRlbShpZGVhKTsgc2V0TW9kYWwoJ2VkaXRJZGVhJyk7IH19IGNsYXNzTmFtZT0ib3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHAtMSByb3VuZGVkIGhvdmVyOmJnLWFtYmVyLTEwMCB0cmFuc2l0aW9uIj57SS5lZGl0KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUiPlRoaW5ncyBJIFNhaWQgSSdkIExlYXJuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRNb2RhbCgnYWRkTGVhcm5pbmcnKX0gY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBmb250LW1lZGl1bSI+e0kucGx1cygiIzNCODJGNiIpfTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xlYXJuaW5nLmxlbmd0aCA9PT0gMCA/IDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIGl0YWxpYyI+Tm8gbGVhcm5pbmcgZ29hbHMgeWV0LiBDbGljayArIHRvIGFkZCBvbmUuPC9wPiA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsZWFybmluZy5tYXAoKGl0ZW0sIGkpID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcC0zIGJnLWJsdWUtNTAgcm91bmRlZC1sZyBncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xLjUgaC0xLjUgcm91bmRlZC1mdWxsIGJnLWJsdWUtNDAwIGZsZXgtc2hyaW5rLTAiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS04MDAgZmxleC0xIj57aXRlbX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0RWRpdEl0ZW0oaXRlbSk7IHNldE1vZGFsKCdlZGl0TGVhcm5pbmdfJyArIGkpOyB9fSBjbGFzc05hbWU9Im9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCBwLTEgcm91bmRlZCBob3ZlcjpiZy1ibHVlLTEwMCB0cmFuc2l0aW9uIj57SS5lZGl0KCIjOUNBM0FGIil9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgey8qIERlbGVnYXRlZCBieSBZb3UgKi99CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtNiI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTMiPkRlbGVnYXRlZCBieSBZb3U8L2gzPgogICAgICAgICAgICAgICAgICAgIHtkZWxlZ2F0ZWRCeU1lLmZpbHRlcihkID0+IGQuc3RhdHVzICE9PSAnY29tcGxldGVkJykubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCBpdGFsaWMiPk5vIGRlbGVnYXRlZCB0YXNrcyB5ZXQuIFVzZSB0aGUgRGVsZWdhdGUgTGF1bmNocGFkIHRvIGFzc2lnbiB0YXNrcy48L3A+CiAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAge2RlbGVnYXRlZEJ5TWUuZmlsdGVyKGQgPT4gZC5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKS5tYXAoZCA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtkLmlkfSBjbGFzc05hbWU9eyJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIHJvdW5kZWQtbGcgYm9yZGVyIHRyYW5zaXRpb24gIiArIChkLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyA/ICJiZy1ncmVlbi01MCBib3JkZXItZ3JlZW4tMjAwIiA6ICJiZy1wdXJwbGUtNTAgYm9yZGVyLXB1cnBsZS0yMDAiKX0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgbWluLXctMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktODAwIj57ZC50YXNrX3RleHR9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0wLjUiPlRvOiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtbWVkaXVtIj57ZC5yZWNpcGllbnRfdXNlcm5hbWV9PC9zcGFuPiB7ZC5kZWFkbGluZSAmJiA8c3BhbiBjbGFzc05hbWU9Im1sLTIiPkR1ZToge25ldyBEYXRlKGQuZGVhZGxpbmUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj59PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsicHgtMiBweS0wLjUgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1tZWRpdW0gIiArIChkLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyA/ICJiZy1ncmVlbi0yMDAgdGV4dC1ncmVlbi03MDAiIDogImJnLXllbGxvdy0yMDAgdGV4dC15ZWxsb3ctNzAwIil9PntkLnN0YXR1c308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gbWFya0RlbGVnYXRlZERvbmUoZC5pZCl9IGNsYXNzTmFtZT0idGV4dC14cyBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTcwMCBob3ZlcjpiZy1lbWVyYWxkLTIwMCBmb250LW1lZGl1bSB0cmFuc2l0aW9uIiB0aXRsZT0iTWFyayBhcyBkb25lIj5Eb25lPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgIDwvZGl2Pgo8L2Rpdj4KICAgICAgICAgICAgKX0KCiAgICAgICAgICAgIHtwbGFubmVyVGFiID09PSAnc2NoZWR1bGUnICYmICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTYiPgogICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5Ub2RheSdzIFNjaGVkdWxlPC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0TW9kYWwoJ2FkZFRpbWVCbG9jaycpfSBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ibHVlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGZvbnQtbWVkaXVtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj57SS5wbHVzKCIjM0I4MkY2Iil9IEFkZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAge3RpbWVCbG9ja3MubGVuZ3RoID09PSAwID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5IGljb249e0kuY2FsZW5kYXIoIiM5Q0EzQUYiKX0gdGl0bGU9Ik5vIHRpbWUgYmxvY2tzIHlldCIgc3ViPSJQbGFuIHlvdXIgZGF5IGJ5IGFkZGluZyB0aW1lIGJsb2NrcyIgYWN0aW9uPXsoKSA9PiBzZXRNb2RhbCgnYWRkVGltZUJsb2NrJyl9IGFjdGlvbkxhYmVsPSJBZGQgVGltZSBCbG9jayIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpbWVCbG9ja3MubWFwKGIgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17Yi5pZH0gY2xhc3NOYW1lPXsoY2F0Q29sb3JzW2IuY2F0XSB8fCBjYXRDb2xvcnMuYmx1ZSkgKyAnIGJvcmRlciByb3VuZGVkLXhsIHB4LTUgcHktMy41IHRyYW5zaXRpb24tYWxsIGhvdmVyOnNoYWRvdy1zbSAnICsgKGNvbXBsZXRlZFRpbWVCbG9ja3NbYi5pZF0gPyAnb3BhY2l0eS01MCcgOiAnJyl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC00IGN1cnNvci1wb2ludGVyIGZsZXgtMSIgb25DbGljaz17KCkgPT4gdG9nZ2xlQmxvY2soYi5pZCl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J3ctMiBoLTIgcm91bmRlZC1mdWxsICcgKyAoY2F0RG90W2IuY2F0XSB8fCBjYXREb3QuYmx1ZSl9PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgZm9udC1tZWRpdW0gb3BhY2l0eS03MCB3LTMyIj57Yi50aW1lfXtiLmVuZCA/ICcgLSAnICsgYi5lbmQgOiAnJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17J3RleHQtc20gZm9udC1tZWRpdW0gJyArIChjb21wbGV0ZWRUaW1lQmxvY2tzW2IuaWRdID8gJ2xpbmUtdGhyb3VnaCBvcGFjaXR5LTYwJyA6ICcnKX0+e2IudGFza308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldEVkaXRJdGVtKGIpOyBzZXRNb2RhbCgnZWRpdFRpbWVCbG9jaycpOyB9fSBjbGFzc05hbWU9InAtMSByb3VuZGVkLWxnIGhvdmVyOmJnLXdoaXRlLzUwIHRyYW5zaXRpb24iPntJLmVkaXQoIiM5Q0EzQUYiKX08L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbXBsZXRlZFRpbWVCbG9ja3NbYi5pZF0gPyBJLmNoZWNrKCIjMTBCOTgxIikgOiA8c3BhbiBjbGFzc05hbWU9ImN1cnNvci1wb2ludGVyIiBvbkNsaWNrPXsoKSA9PiB0b2dnbGVCbG9jayhiLmlkKX0+e0kuY2lyY2xlKCIjRDFENURCIil9PC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICl9CiAgICAgICAgPC9kaXY+CiAgICAgICAgKTsKICAgIH07CgogICAgY29uc3QgSGlzdG9yeU1vZHVsZSA9ICgpID0+IHsKICAgICAgICBjb25zdCBzb3J0ZWRIaXN0b3J5ID0gWy4uLnRhc2tIaXN0b3J5XS5zb3J0KChhLCBiKSA9PiBiLmRhdGUubG9jYWxlQ29tcGFyZShhLmRhdGUpKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02IG1heC13LTR4bCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIj5UYXNrIEhpc3Rvcnk8L2gyPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0wLjUiPkNvbXBsZXRlZCB0YXNrcyBhcmNoaXZlZCBieSBkYXRlPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICB7c29ydGVkSGlzdG9yeS5sZW5ndGggPT09IDAgPyAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxFbXB0eSBpY29uPXtJLmhpc3RvcnkoIiM5Q0EzQUYiKX0gdGl0bGU9Ik5vIGhpc3RvcnkgeWV0IiBzdWI9IkNvbXBsZXRlZCB0YXNrcyB3aWxsIGF1dG9tYXRpY2FsbHkgbW92ZSBoZXJlIiAvPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAge3NvcnRlZEhpc3RvcnkubWFwKGVudHJ5ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtlbnRyeS5kYXRlfSBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTEwMCBjYXJkLXNoYWRvdyBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC01IHB5LTMuNSBiZy1ncmF5LTUwLzUwIGJvcmRlci1iIGJvcmRlci1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0kuY2FsZW5kYXIoIiM2QjcyODAiKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAiPntuZXcgRGF0ZShlbnRyeS5kYXRlICsgJ1QwMDowMDowMCcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJywgbW9udGg6ICdsb25nJywgZGF5OiAnbnVtZXJpYycsIHllYXI6ICdudW1lcmljJyB9KX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+e2VudHJ5LnRhc2tzLmxlbmd0aH0gdGFza3tlbnRyeS50YXNrcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2VudHJ5LnRhc2tzLm1hcCgodCwgaSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3QuaWQgfHwgaX0gY2xhc3NOYW1lPSJweC01IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtJLmNoZWNrKCIjMTBCOTgxIil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSBtaW4tdy0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtZ3JheS02MDAiPnt0LnRhc2t9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMC41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0LnByb2plY3RJZCAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgcHgtMS41IHB5LTAuNSByb3VuZGVkIGJnLWJsdWUtNTAgdGV4dC1ibHVlLTUwMCI+e3Byb2plY3ROYW1lKHQucHJvamVjdElkKX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3QuZGVsZWdhdGVkVG8gJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZCBiZy1wdXJwbGUtNTAgdGV4dC1wdXJwbGUtNTAwIj57SS51c2VyKCIjOEI1Q0Y2Iil9IHt0LmRlbGVnYXRlZFRvfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0LmNvbXBsZXRlZEF0ICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj57bmV3IERhdGUodC5jb21wbGV0ZWRBdCkudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHtob3VyOicyLWRpZ2l0JywgbWludXRlOicyLWRpZ2l0J30pfTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICApOwogICAgfTsKCiAgICAvLyBNQUlOIFJFVFVSTgogICAgaWYgKGF1dGhMb2FkaW5nKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9ImZpeGVkIGluc2V0LTAgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1ibHVlLTUwIHZpYS13aGl0ZSB0by1ncmF5LTUwIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiPjxFbWJsZW0gc2l6ZT17NDh9IC8+PHAgY2xhc3NOYW1lPSJtbC0zIHRleHQtZ3JheS00MDAiPkxvYWRpbmcuLi48L3A+PC9kaXY+OwogICAgaWYgKCFzdXBhVXNlciB8fCAhdXNlclByb2ZpbGUpIHJldHVybiA8QXV0aEZsb3cgb25BdXRoPXtoYW5kbGVBdXRofSAvPjsKICAgIHJldHVybiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9Imgtc2NyZWVuIGJnLWdyYXktNTAgZmxleCI+CiAgICAgICAgICAgIDxTaWRlYmFyIC8+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsnZmxleC0xIGZsZXggZmxleC1jb2wgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICcgKyAoc2lkZWJhck9wZW4gPyAnbWwtNjAnIDogJ21sLTE2Jyl9PgogICAgICAgICAgICAgICAgPFRvcEJhciAvPgogICAgICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPSJmbGV4LTEgb3ZlcmZsb3ctYXV0byBweC04IHB5LTYiPgogICAgICAgICAgICAgICAgICAgIHthY3RpdmVNb2R1bGUgPT09ICdjb21tYW5kJyAmJiBDb21tYW5kQ2VudHJlKCl9CiAgICAgICAgICAgICAgICAgICAge2FjdGl2ZU1vZHVsZSA9PT0gJ2luY29tZScgJiYgPEluY29tZU1vZHVsZSAvPn0KICAgICAgICAgICAgICAgICAgICB7YWN0aXZlTW9kdWxlID09PSAnYnJpZWZpbmcnICYmIDxCcmllZmluZ01vZHVsZSAvPn0KICAgICAgICAgICAgICAgICAgICB7YWN0aXZlTW9kdWxlID09PSAncGxhbm5lcicgJiYgPFBsYW5uZXJNb2R1bGUgLz59CiAgICAgICAgICAgICAgICAgICAge2FjdGl2ZU1vZHVsZSA9PT0gJ2hpc3RvcnknICYmIDxIaXN0b3J5TW9kdWxlIC8+fQogICAgICAgICAgICAgIHthY3RpdmVNb2R1bGUgPT09ICdib2FyZHJvb20nICYmIDxCb2FyZHJvb21Nb2R1bGUgLz59CiAgICAgICAgICAgICAgICA8L21haW4+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgey8qIEZsb2F0aW5nICsgQnV0dG9uICovfQogICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldE1vZGFsKG1vZGFsID09PSAnYWRkTWVudScgPyBudWxsIDogJ2FkZE1lbnUnKX0gY2xhc3NOYW1lPXsnZml4ZWQgYm90dG9tLTggcmlnaHQtOCB3LTEyIGgtMTIgcm91bmRlZC1mdWxsIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc2hhZG93LWxnIGhvdmVyOnNoYWRvdy14bCBob3ZlcjpiZy1ibHVlLTYwMCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJyArIChtb2RhbCA9PT0gJ2FkZE1lbnUnID8gJ3JvdGF0ZS00NScgOiAnJyl9IHRpdGxlPSJRdWljayBBZGQiPgogICAgICAgICAgICAgICAge0kucGx1cygid2hpdGUiKX0KICAgICAgICAgICAgPC9idXR0b24+CgogICAgICAgICAgICB7LyogTU9EQUxTICovfQogICAgICAgICAgICB7bW9kYWwgPT09ICdhZGRNZW51JyAmJiA8QWRkTWVudSBvbkNsb3NlPXsoKSA9PiBzZXRNb2RhbChudWxsKX0gYWN0aXZlTW9kdWxlPXthY3RpdmVNb2R1bGV9IHNldE1vZGFsPXtzZXRNb2RhbH0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2FkZEluY29tZScgJiYgPEluY29tZUZvcm0gc2V0SW5jb21lU3RyZWFtcz17c2V0SW5jb21lU3RyZWFtc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdlZGl0SW5jb21lJyAmJiA8SW5jb21lRm9ybSBpdGVtPXtlZGl0SXRlbX0gc2V0SW5jb21lU3RyZWFtcz17c2V0SW5jb21lU3RyZWFtc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdhZGRQcm9qZWN0JyAmJiA8UHJvamVjdEZvcm0gc2V0UHJvamVjdHM9e3NldFByb2plY3RzfSBnZXRQcm9qZWN0UHJvZ3Jlc3M9e2dldFByb2plY3RQcm9ncmVzc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19ICBzdXBhVXNlcj17c3VwYVVzZXJ9IHdlZWtseVBsYW49e3dlZWtseVBsYW59IHF1aWNrVGFza3M9e3F1aWNrVGFza3N9Lz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2VkaXRQcm9qZWN0JyAmJiA8UHJvamVjdEZvcm0gaXRlbT17ZWRpdEl0ZW19IHNldFByb2plY3RzPXtzZXRQcm9qZWN0c30gZ2V0UHJvamVjdFByb2dyZXNzPXtnZXRQcm9qZWN0UHJvZ3Jlc3N9IG9uQ2xvc2U9eygpID0+IHsgc2V0TW9kYWwobnVsbCk7IHNldEVkaXRJdGVtKG51bGwpOyB9fSAgc3VwYVVzZXI9e3N1cGFVc2VyfSB3ZWVrbHlQbGFuPXt3ZWVrbHlQbGFufSBxdWlja1Rhc2tzPXtxdWlja1Rhc2tzfS8+fQogICAgICAgICAgICB7YWNjZXB0aW5nVGFzayAmJiA8QWNjZXB0VGFza01vZGFsIHRhc2s9e2FjY2VwdGluZ1Rhc2t9IG9uQ2hvb3NlRGFpbHk9e2FjY2VwdFRvRGFpbHl9IG9uQ2hvb3NlV2Vla2x5PXthY2NlcHRUb1dlZWtseX0gb25DYW5jZWw9eygpID0+IHNldEFjY2VwdGluZ1Rhc2sobnVsbCl9IC8+fQogICAgICB7bW9kYWwgPT09ICdhZGRXZWVrbHknICYmIDxXZWVrbHlUYXNrRm9ybSBzZXRXZWVrbHlQbGFuPXtzZXRXZWVrbHlQbGFufSBhY3RpdmVQcm9qZWN0cz17YWN0aXZlUHJvamVjdHN9IG9uRGVsZWdhdGU9e2hhbmRsZURlbGVnYXRlfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2VkaXRXZWVrbHknICYmIDxXZWVrbHlUYXNrRm9ybSBpdGVtPXtlZGl0SXRlbX0gc2V0V2Vla2x5UGxhbj17c2V0V2Vla2x5UGxhbn0gYWN0aXZlUHJvamVjdHM9e2FjdGl2ZVByb2plY3RzfSBvbkRlbGVnYXRlPXtoYW5kbGVEZWxlZ2F0ZX0gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdhZGRUYXNrJyAmJiA8VGFza0Zvcm0gc2V0UXVpY2tUYXNrcz17c2V0UXVpY2tUYXNrc30gYWN0aXZlUHJvamVjdHM9e2FjdGl2ZVByb2plY3RzfSBvbkRlbGVnYXRlPXtoYW5kbGVEZWxlZ2F0ZX0gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdlZGl0VGFzaycgJiYgPFRhc2tGb3JtIGl0ZW09e2VkaXRJdGVtfSBzZXRRdWlja1Rhc2tzPXtzZXRRdWlja1Rhc2tzfSBhY3RpdmVQcm9qZWN0cz17YWN0aXZlUHJvamVjdHN9IG9uRGVsZWdhdGU9e2hhbmRsZURlbGVnYXRlfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2FkZFRpbWVCbG9jaycgJiYgPFRpbWVCbG9ja0Zvcm0gc2V0VGltZUJsb2Nrcz17c2V0VGltZUJsb2Nrc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdlZGl0VGltZUJsb2NrJyAmJiA8VGltZUJsb2NrRm9ybSBpdGVtPXtlZGl0SXRlbX0gc2V0VGltZUJsb2Nrcz17c2V0VGltZUJsb2Nrc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdhZGRJZGVhJyAmJiA8SWRlYUZvcm0gc2V0SWRlYXM9e3NldElkZWFzfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2VkaXRJZGVhJyAmJiA8SWRlYUZvcm0gaXRlbT17ZWRpdEl0ZW19IHNldElkZWFzPXtzZXRJZGVhc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdhZGRUZWFtJyAmJiA8VGVhbUZvcm0gc2V0VGVhbU1lbWJlcnM9e3NldFRlYW1NZW1iZXJzfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ2FkZEV4cGVuc2UnICYmIDxFeHBlbnNlRm9ybSBzZXRFeHBlbnNlcz17c2V0RXhwZW5zZXN9IGluY29tZVN0cmVhbXM9e2luY29tZVN0cmVhbXN9IHN1cGFVc2VyPXtzdXBhVXNlcn0gdXNlclByb2ZpbGU9e3VzZXJQcm9maWxlfSBwYXltZW50VGFncz17cGF5bWVudFRhZ3N9IHNldFBheW1lbnRUYWdzPXtzZXRQYXltZW50VGFnc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdlZGl0RXhwZW5zZScgJiYgPEV4cGVuc2VGb3JtIGl0ZW09e2VkaXRJdGVtfSBzZXRFeHBlbnNlcz17c2V0RXhwZW5zZXN9IGluY29tZVN0cmVhbXM9e2luY29tZVN0cmVhbXN9IHN1cGFVc2VyPXtzdXBhVXNlcn0gdXNlclByb2ZpbGU9e3VzZXJQcm9maWxlfSBwYXltZW50VGFncz17cGF5bWVudFRhZ3N9IHNldFBheW1lbnRUYWdzPXtzZXRQYXltZW50VGFnc30gb25DbG9zZT17KCkgPT4geyBzZXRNb2RhbChudWxsKTsgc2V0RWRpdEl0ZW0obnVsbCk7IH19IC8+fQogICAgICAgICAgICB7bW9kYWwgPT09ICdlZGl0VGVhbScgJiYgPFRlYW1Gb3JtIGl0ZW09e2VkaXRJdGVtfSBzZXRUZWFtTWVtYmVycz17c2V0VGVhbU1lbWJlcnN9IG9uQ2xvc2U9eygpID0+IHsgc2V0TW9kYWwobnVsbCk7IHNldEVkaXRJdGVtKG51bGwpOyB9fSAvPn0KICAgICAgICAgICAge21vZGFsID09PSAnYWRkTGVhcm5pbmcnICYmIDxMZWFybmluZ0Zvcm0gc2V0TGVhcm5pbmc9e3NldExlYXJuaW5nfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCAmJiBtb2RhbC5zdGFydHNXaXRoKCdlZGl0TGVhcm5pbmdfJykgJiYgPExlYXJuaW5nRm9ybSBpdGVtPXtlZGl0SXRlbX0gaWR4PXtwYXJzZUludChtb2RhbC5zcGxpdCgnXycpWzFdKX0gc2V0TGVhcm5pbmc9e3NldExlYXJuaW5nfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyBzZXRFZGl0SXRlbShudWxsKTsgfX0gLz59CiAgICAgICAgICAgIHttb2RhbCA9PT0gJ3NldHRpbmdzJyAmJiA8UHJvZmlsZUVkaXRNb2RhbCB1c2VyUHJvZmlsZT17dXNlclByb2ZpbGV9IHNldFVzZXJQcm9maWxlPXtzZXRVc2VyUHJvZmlsZX0gc3VwYVVzZXI9e3N1cGFVc2VyfSBvbkNsb3NlPXsoKSA9PiB7IHNldE1vZGFsKG51bGwpOyB9fSAvPn0KICAgICAgICAgICAge25vdGlmaWNhdGlvbnNPcGVuICYmIDxOb3RpZmljYXRpb25zUGFuZWwgbm90aWZpY2F0aW9ucz17bm90aWZpY2F0aW9uc30gb25NYXJrUmVhZD17bWFya05vdGlmUmVhZH0gb25DbG9zZT17KCkgPT4gc2V0Tm90aWZpY2F0aW9uc09wZW4oZmFsc2UpfSBkZWxlZ2F0ZWRUb01lPXtkZWxlZ2F0ZWRUb01lfSBvbkFjY2VwdFRhc2s9e3NldEFjY2VwdGluZ1Rhc2t9IHF1aWNrVGFza3M9e3F1aWNrVGFza3N9IHdlZWtseVBsYW49e3dlZWtseVBsYW59IHNldEFjdGl2ZU1vZHVsZT17c2V0QWN0aXZlTW9kdWxlfSBzZXRQbGFubmVyVGFiPXtzZXRQbGFubmVyVGFifSAvPn19CiAgICAgICAgPC9kaXY+CiAgICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgTnVPcGVyYW5kaTsK"}